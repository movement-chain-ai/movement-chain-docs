# 工程术语表

> 嵌入式系统、传感器工程、信号处理相关术语

---

## 术语索引

| # | 术语 | 英文 | 简要说明 |
|---|------|------|----------|
| 1 | [IMU](#1-imu-惯性测量单元) | Inertial Measurement Unit | 惯性测量单元，包含加速度计和陀螺仪 |
| 2 | [EMG](#2-emg-肌电传感器) | Electromyography | 肌电传感器，测量肌肉电活动 |
| 3 | [采样率](#3-采样率-sampling-rate) | Sampling Rate | 传感器每秒采集数据的次数，单位 Hz |
| 4 | [漂移](#4-漂移-drift) | Drift | 传感器随时间累积的测量误差 |
| 5 | [边缘 AI](#5-边缘-ai-edge-ai) | Edge AI | 在设备端直接运行 AI 推理 |
| 6 | [I2C / SPI](#6-i2c--spi-通信协议) | Communication Protocols | 芯片间的通信协议 |
| 7 | [MCU](#7-mcu-微控制器) | Microcontroller Unit | 微控制器，嵌入式系统的"大脑" |
| 8 | [PCB](#8-pcb-印刷电路板) | Printed Circuit Board | 印刷电路板，电子元件的物理载体 |
| 9 | [KiCad](#9-kicad) | KiCad | 开源 EDA 软件，用于 PCB 设计 |
| 10 | [BLE 抖动](#10-ble-抖动-ble-jitter) | BLE Jitter | 蓝牙低功耗传输的时间不确定性，15-30ms |

---

## 1. IMU (惯性测量单元)

**定义：** IMU (Inertial Measurement Unit) 是一种传感器模块，用于测量物体的运动状态。

---

### 组成

| 传感器 | 测量内容 | 单位 | 轴数 |
|--------|----------|------|------|
| **加速度计** | 线性加速度（往哪个方向移动、多快） | g 或 m/s² | 3 轴 (X, Y, Z) |
| **陀螺仪** | 角速度（转动的快慢） | °/s 或 rad/s | 3 轴 (X, Y, Z) |

### 常见 IMU 规格

| 规格 | 说明 |
|------|------|
| **6 轴 IMU** | 3 轴加速度计 + 3 轴陀螺仪 |
| **9 轴 IMU** | 6 轴 + 3 轴磁力计（指南针） |

### Movement Chain AI 选用

我们选用 **STMicroelectronics LSM6DSV16X**（6 轴 IMU）：

| 参数 | 规格 |
|------|------|
| 加速度计量程 | ±2/±4/±8/±16g |
| 陀螺仪量程 | ±125 ~ ±2000 dps |
| 最大采样率 | 7680 Hz |
| 推荐采样率 | 100-200 Hz（运动分析） |
| 工作电流 | 0.55mA @ 104Hz |
| 特色功能 | 内置 MLC（机器学习核心） |

> 详见：[ADR-0002 LSM6DSV16X IMU 选型](../design/decisions/0002-lsm6dsv16x-imu.md)

---

## 2. EMG (肌电传感器)

**定义：** EMG (Electromyography，肌电图) 是一种测量肌肉电活动的传感器技术，用于分析肌肉激活模式。

---

### 工作原理

肌肉收缩时，神经信号触发肌纤维产生**电位变化**（约 0.1-5 mV），EMG 传感器检测并放大这些微弱的电信号。

```text
神经信号 → 肌纤维激活 → 电位变化 → EMG 电极检测 → 信号放大 → 数字化
```

### EMG 信号特性

| 特性 | 数值 |
|------|------|
| 信号幅度 | 0.1 - 5 mV |
| 频率范围 | 20 - 500 Hz |
| 推荐采样率 | 1000 - 2000 Hz |
| 典型信噪比 | 需要滤波处理 |

### 电极类型

| 类型 | 特点 | 适用场景 |
|------|------|----------|
| **湿电极** | 导电凝胶，信号质量最佳 | 医疗级、实验室 |
| **干电极** | 无凝胶，可重复使用 | 消费级可穿戴 |
| **针电极** | 插入肌肉，最精确 | 临床诊断（侵入式） |

Movement Chain AI 选用**干电极**，平衡信号质量与用户体验。

### 在高尔夫中的应用

EMG 是我们的**核心差异化**——市场上 0 家竞品有此功能。

| 应用场景 | EMG 提供的洞察 |
|----------|---------------|
| **肌肉代偿检测** | 核心弱 → 手臂代偿 |
| **发力时序分析** | 髋 → 核心 → 肩 → 臂 顺序 |
| **疲劳预警** | 在受伤前提醒休息 |
| **左右不平衡** | 识别弱侧肌群 |

```text
场景: 用户挥杆"感觉不对"

❌ 无 EMG:  视觉显示"转肩不足" → 用户不知道为什么
✅ 有 EMG:  检测到"核心激活弱 → 肩部代偿" → 给出针对性训练
```

### Movement Chain AI EMG 配置

| 参数 | 规格 |
|------|------|
| EMG 通道数 | 2 通道（左右前臂） |
| 模拟前端芯片 | ADS1292 |
| 采样率 | 1000 Hz |
| 电极类型 | 可重复使用干电极 |

> 详见：[EMG 硬件](../components/emg/hardware.md)

---

## 3. 采样率 (Sampling Rate)

**定义：** 采样率是指传感器每秒采集数据的次数，单位为赫兹 (Hz)。

---

### 公式

$$
f_s = \frac{n}{\Delta t}
$$

| 符号 | 含义 | 单位 |
|------|------|------|
| f_s | 采样率 | Hz |
| n | 采样次数 | 次 |
| Δt | 时间间隔 | s |

### 常见采样率

| 采样率 | 每次采样间隔 | 说明 |
|--------|-------------|------|
| 30 Hz | 33.3 ms | 普通视频帧率 |
| 60 Hz | 16.7 ms | 高帧率视频 |
| 100 Hz | 10 ms | 基础运动捕捉 |
| 500 Hz | 2 ms | IMU 标准采样 |
| 1000 Hz | 1 ms | 高精度 IMU / EMG |

### 奈奎斯特定理

采样率必须**至少是信号最高频率的 2 倍**，才能准确重建信号：

$$
f_s \geq 2 \times f_{max}
$$

### 在高尔夫中的应用

高尔夫下杆仅约 **250ms**，需要高采样率才能捕捉细节：

| 传感器类型 | 典型采样率 | 适用场景 |
|-----------|-----------|----------|
| **Vision (视觉)** | 30-60 Hz | 姿态估计，慢动作分析 |
| **IMU (惯性)** | 500-1000+ Hz | 挥杆速度、加速度、角度 |
| **EMG (肌电)** | 1000+ Hz | 肌肉激活时序分析 |

#### 为什么 EMG 需要高采样率？

肌电信号的频率范围约 **20-500 Hz**，根据奈奎斯特定理：

$$
f_s \geq 2 \times 500 = 1000 \text{ Hz}
$$

因此 EMG 采样率通常为 **1000-2000 Hz**。

#### 采样率 vs 精度

| 采样率 | 下杆期间采样点数 | 能捕捉的细节 |
|--------|-----------------|-------------|
| 30 Hz | ~8 点 | ❌ 太少，丢失关键瞬间 |
| 100 Hz | ~25 点 | ⚠️ 基础分析 |
| 500 Hz | ~125 点 | ✅ 详细运动轨迹 |
| 1000 Hz | ~250 点 | ✅✅ 肌肉激活时序 |

---

## 4. 漂移 (Drift)

**定义：** 漂移是指传感器的测量值随时间逐渐偏离真实值的现象，是 IMU 的固有问题。

---

### 漂移的来源

| 来源 | 说明 |
|------|------|
| **陀螺仪偏置** | 静止时输出不为零，误差随时间累积 |
| **温度变化** | 温度影响传感器精度 |
| **噪声积分** | 对角速度积分求角度时，噪声也被积分 |

### 漂移的影响

```text
开始时：传感器认为"正前方"是 0°
10分钟后：传感器认为"正前方"是 2°（实际没变）
30分钟后：传感器认为"正前方"是 6°（误差越来越大）
```

### 不同 IMU 的漂移性能

| IMU | 稳定窗口 | 评价 |
|-----|----------|------|
| MPU6050 | 10-15 分钟 | ❌ 过时技术 |
| BNO055 | 15-20 分钟 | ⚠️ 已停产 |
| ICM-42688-P | 25-30 分钟 | ⚠️ 中档 |
| **LSM6DSV16X** | **45+ 分钟** | ✅ 专业级 |

### 漂移补偿方法

| 方法 | 说明 |
|------|------|
| **传感器融合** | 结合加速度计、磁力计校正陀螺仪 |
| **卡尔曼滤波** | 用数学算法估计和修正误差 |
| **定期校准** | 用户手动重置参考方向 |
| **视觉辅助** | 用摄像头数据校正 IMU 漂移 |

---

## 5. 边缘 AI (Edge AI)

**定义：** 边缘 AI 是指在终端设备（如传感器、手机）上直接运行 AI 推理，而不依赖云端服务器。

---

### 传统方式 vs 边缘 AI

| 方式 | 流程 | 延迟 | 功耗 | 隐私 |
|------|------|------|------|------|
| **云端 AI** | 设备 → 云服务器 → AI 处理 → 返回结果 | 高 | 高 | 差 |
| **边缘 AI** | 设备内部 AI 处理 → 直接输出结果 | 低 | 低 | 好 |

### LSM6DSV16X 的 MLC（机器学习核心）

LSM6DSV16X 内置 MLC，可以在芯片内部直接进行运动分类：

| 能力 | 说明 |
|------|------|
| 算法类型 | 决策树分类器 |
| 程序内存 | 256 字节/树，最多 8 棵树 |
| 分类延迟 | <1ms |
| 功耗优势 | 比连续 MCU 处理减少 90% |
| 用例 | 运动识别、跌倒检测、手势分类 |

### 边缘 AI 的优势

| 优势 | 说明 |
|------|------|
| **低延迟** | 实时反馈，无需等待网络 |
| **低功耗** | 不需要不停发送数据 |
| **隐私保护** | 原始数据不离开设备 |
| **离线可用** | 无需网络连接 |

---

## 6. I2C / SPI (通信协议)

**定义：** I2C 和 SPI 是两种常用的芯片间串行通信协议，用于 MCU 与传感器之间的数据传输。

---

### I2C (Inter-Integrated Circuit)

| 特性 | 说明 |
|------|------|
| **线数** | 2 线（SDA 数据 + SCL 时钟） |
| **速度** | 标准 100kHz，快速 400kHz，高速 1MHz |
| **拓扑** | 总线型，可挂多个设备 |
| **优势** | 接线简单，节省引脚 |
| **劣势** | 速度较慢 |

### SPI (Serial Peripheral Interface)

| 特性 | 说明 |
|------|------|
| **线数** | 4 线（MOSI, MISO, SCK, CS） |
| **速度** | 可达 10MHz+ |
| **拓扑** | 主从型，每个从设备需独立 CS |
| **优势** | 速度快，全双工 |
| **劣势** | 引脚多 |

### 选择建议

| 场景 | 推荐协议 | 原因 |
|------|----------|------|
| 原型开发 | I2C | 接线简单，调试方便 |
| 生产产品 | SPI | 高速传输，适合 100Hz+ 采样 |
| 多传感器 | I2C | 总线共享，节省引脚 |
| 高速采样 | SPI | 带宽足够 |

### Movement Chain AI 配置

| 阶段 | 协议 | 配置 |
|------|------|------|
| MVP 原型 | I2C | 400kHz，简化接线 |
| 生产版本 | SPI | 8MHz，配合 DMA |

---

## 7. MCU (微控制器)

**定义：** MCU (Microcontroller Unit) 是嵌入式系统的核心处理器，集成了 CPU、内存、外设接口于一体。

---

### MCU vs CPU

| 特性 | MCU | CPU (电脑处理器) |
|------|-----|------------------|
| 集成度 | 高（CPU + RAM + Flash + 外设） | 低（需外部芯片） |
| 功耗 | 极低（mA 级） | 高（W 级） |
| 性能 | 适中 | 极高 |
| 成本 | 低（$1-10） | 高（$100+） |
| 用途 | 嵌入式设备、IoT | 电脑、服务器 |

### Movement Chain AI 选用

我们选用 **ESP32-S3**：

| 参数 | 规格 |
|------|------|
| CPU | 双核 Xtensa LX7 @ 240MHz |
| RAM | 512KB SRAM + 8MB PSRAM |
| Flash | 16MB |
| 无线 | WiFi + Bluetooth 5 (BLE) |
| 特色 | AI 加速器，支持 TensorFlow Lite |
| 成本 | ~$4/片 |

> 详见：[ADR-0005 ESP32-S3 微控制器选型](../design/decisions/0005-esp32-s3-microcontroller.md)

### 为什么选 ESP32-S3？

| 对比项 | ESP32-C3 | ESP32-S3 | 结论 |
|--------|----------|----------|------|
| CPU 核心 | 单核 RISC-V | 双核 Xtensa | S3 更强 |
| AI 加速 | 无 | 有向量指令 | S3 适合 ML |
| BLE | BLE 5.0 | BLE 5.0 | 相同 |
| 成本 | $2.5 | $4 | C3 更便宜 |
| **选择** | 简单应用 | **ML + 多传感器** | ✅ S3 |

---

## 8. PCB (印刷电路板)

**定义：** PCB (Printed Circuit Board，印刷电路板) 是电子设备的物理基础，用于机械支撑和电气连接电子元件。

---

### 什么是 PCB？

PCB 是一块由绝缘材料制成的板子，表面覆盖铜箔，通过蚀刻形成导电线路，用于连接各种电子元件。

```text
软件 vs 硬件 类比：
────────────────────────────────────
代码文件 (.py, .dart)  ←→  PCB 设计文件 (.kicad_pcb)
VS Code 编辑器         ←→  KiCad 设计软件
编译运行               ←→  发给工厂生产
软件应用               ←→  实体电路板
```

### PCB 的层级

| 类型 | 层数 | 成本 | 适用场景 |
|------|------|------|----------|
| **单层板** | 1 层 | 最低 | 简单电路（玩具、遥控器） |
| **双层板** | 2 层 | 低 | 大多数消费电子 |
| **四层板** | 4 层 | 中等 | 复杂数字电路、高速信号 |
| **多层板** | 6-12+ 层 | 高 | 高密度设计（手机、电脑主板） |

### Movement Chain AI PCB 设计

我们的传感器模块需要一块自定义 PCB：

```text
┌─────────────────────────────────────┐
│          Movement Chain PCB          │
│  ┌───────────┐  ┌───────────────┐   │
│  │ ESP32-S3  │──│  LSM6DSV16X   │   │  ← MCU 连接 IMU
│  │   (MCU)   │  │    (IMU)      │   │
│  └───────────┘  └───────────────┘   │
│        │        ┌───────────────┐   │
│        └────────│   ADS1292     │   │  ← MCU 连接 EMG
│                 │    (EMG)      │   │
│                 └───────────────┘   │
│     [电池]  [BLE天线]  [USB充电]     │
└─────────────────────────────────────┘
```

### PCB 设计流程

| 步骤 | 输出文件 | 说明 |
|------|----------|------|
| 1. 原理图设计 | .sch | 定义元件及电气连接 |
| 2. PCB 布局 | .kicad_pcb | 物理位置和走线 |
| 3. 设计规则检查 (DRC) | - | 验证无短路、间距合规 |
| 4. 生成制造文件 | Gerber + BOM | 发给 PCB 工厂 |
| 5. 焊接装配 | - | SMT 贴片或手工焊接 |

### 常见 PCB 术语

| 术语 | 英文 | 说明 |
|------|------|------|
| **走线** | Trace | PCB 上的铜导线 |
| **过孔** | Via | 连接不同层的孔 |
| **焊盘** | Pad | 元件焊接点 |
| **丝印** | Silkscreen | PCB 上的文字/标记 |
| **阻焊层** | Solder Mask | 绿色/蓝色保护层 |
| **BOM** | Bill of Materials | 元件清单 |
| **Gerber** | Gerber Files | 标准制造文件格式 |

---

## 9. KiCad

**定义：** KiCad 是一款开源的 EDA (Electronic Design Automation) 软件，用于设计 PCB 原理图和布局。

---

### 基本信息

| 项目 | 内容 |
|------|------|
| **类型** | 开源 EDA 软件 |
| **许可证** | GPL v3（免费） |
| **支持平台** | Windows / macOS / Linux |
| **官网** | [kicad.org](https://www.kicad.org) |
| **当前版本** | KiCad 8.x (2024-2025) |

### KiCad 的核心功能

| 功能模块 | 作用 |
|----------|------|
| **Eeschema** | 原理图编辑器 |
| **PCBnew** | PCB 布局编辑器 |
| **3D Viewer** | 3D 预览 PCB 成品效果 |
| **Gerber Viewer** | 查看制造文件 |
| **符号/封装库** | 内置海量元件库 |

### KiCad vs 其他 EDA 工具

| 工具 | 类型 | 价格 | 特点 |
|------|------|------|------|
| **KiCad** | 开源 | 免费 | 功能完整，社区活跃 ✅ |
| Altium Designer | 商业 | ~$7000/年 | 专业级，企业首选 |
| Eagle (Fusion 360) | 商业 | ~$500/年 | Autodesk 生态 |
| EasyEDA | 云端 | 免费/付费 | 与 JLCPCB 集成 |

**我们选择 KiCad 的原因：**

- ✅ **免费开源** - 无许可证成本
- ✅ **功能完整** - 专业级 PCB 设计能力
- ✅ **跨平台** - macOS / Windows / Linux
- ✅ **社区活跃** - 丰富的教程和元件库
- ✅ **版本控制友好** - 文本格式，可用 Git 管理

### 典型工作流程

```text
1. 原理图设计 (Eeschema)
   └─ 添加元件 → 连线 → 电气规则检查 (ERC)

2. 封装分配
   └─ 为每个符号指定物理封装 (如 QFN-24, 0603 电阻)

3. PCB 布局 (PCBnew)
   └─ 导入网表 → 放置元件 → 布线 → 铺铜 → DRC 检查

4. 输出制造文件
   └─ Gerber 文件 + 钻孔文件 + BOM + 贴片坐标

5. 发送给 PCB 工厂
   └─ 常用: JLCPCB, PCBWay, 嘉立创
```

### Movement Chain AI 的 KiCad 使用

| 阶段 | 设计内容 |
|------|----------|
| **MVP 原型** | ESP32-S3 + LSM6DSV16X + ADS1292 单板设计 |
| **生产版本** | 小型化设计，4 层板，集成电池管理 |

---

## 10. BLE 抖动 (BLE Jitter)

**定义：** BLE 抖动是指蓝牙低功耗 (Bluetooth Low Energy) 协议在数据传输时的时间不确定性，典型值为 15-30ms。

---

### 什么是抖动？

抖动 (Jitter) 是指信号传输延迟的**变化量**，而非延迟本身。

```text
理想情况（无抖动）:
ESP32 发送数据 ──────────────────> 手机接收（延迟固定 10ms）
ESP32 发送数据 ──────────────────> 手机接收（延迟固定 10ms）

实际情况（有抖动）:
ESP32 发送数据 ──────────────────> 手机接收（延迟 8ms）
ESP32 发送数据 ──────────────────> 手机接收（延迟 25ms）  ← 抖动!
ESP32 发送数据 ──────────────────> 手机接收（延迟 15ms）
ESP32 发送数据 ──────────────────> 手机接收（延迟 30ms）  ← 抖动!
```

### 抖动的来源

| 原因 | 说明 |
|------|------|
| **连接间隔** | BLE 每 7.5-4000ms 才有一次传输窗口 |
| **跳频机制** | BLE 在 37 个信道间跳转，时间不固定 |
| **重传机制** | 数据丢失时需重传，增加延迟 |
| **多设备竞争** | 多个 ESP32 共享带宽时互相影响 |

### 为什么这是问题？

对于高尔夫挥杆分析，BLE 抖动会破坏**多传感器时间同步**：

| 参数 | 数值 | 问题 |
|------|------|------|
| 下杆时间 | 200-300ms | BLE 抖动占 5-15% |
| Impact 瞬间 | ~0.5ms | 抖动是 Impact 的 30-60 倍 |
| 肌肉激活顺序 | 10-50ms 差异 | 抖动可能颠倒顺序 |

如果前臂 ESP32 和手腕 ESP32 的数据有 30ms 时间偏差，肌肉激活顺序分析就会**完全错误**。

### 解决方案：Sensor Hub 架构

```text
方案 1（有问题）: 每个传感器独立 ESP32
├── ESP32-A (前臂 EMG) ──BLE抖动──> 手机
├── ESP32-B (前臂 IMU) ──BLE抖动──> 手机
└── 两者时间无法精确对齐 ❌

方案 2（推荐）: Sensor Hub 架构
├── ESP32-A (前臂 EMG + IMU) ──> 共享同一时钟源 ✅
└── 同一 ESP32 内的数据时间戳完全同步
```

**核心思想**：同一身体部位的 IMU + EMG 放在同一个 ESP32 上，共享时钟源。

### 跨设备时间对齐

不同 ESP32 之间仍有 BLE 抖动，通过 **Impact 事件对齐**解决：

```text
ESP32-前臂:  ─────────────┤ Impact ├─────────────
ESP32-手腕:  ─────────────┤ Impact ├─────────────
                          ↑
                    以此为锚点对齐
```

Impact（击球瞬间）产生明显的加速度峰值，可作为跨设备的**时间同步锚点**。

> 详见：[关键决策 2025-12 § 时间同步](../decisions/architecture-decisions-2025-12-23.md#45-视频与传感器同步方案)

---

## 相关文档

- [物理学术语表](physics-glossary.md) - 力学概念（角速度、角动量等）
- [商业术语表](business-glossary.md) - 商业相关术语
- [ADR-0002 IMU 选型](../design/decisions/0002-lsm6dsv16x-imu.md) - LSM6DSV16X 选型决策
- [ADR-0005 MCU 选型](../design/decisions/0005-esp32-s3-microcontroller.md) - ESP32-S3 选型决策

---

**最后更新**: 2025年12月24日
