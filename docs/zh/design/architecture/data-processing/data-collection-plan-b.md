# 数据采集计划 B

> **文档状态**: 草稿 v1.0
> **最后更新**: 2026-01-08
> **关联文档**: [数据管道架构](data-pipeline.md) | [指标计算](metrics-calculation.md) | [信号处理](signal-processing.md) | [计划 A](data-collection-plan-a.md)

---

## 一、实验概览

| 项目 | 内容 |
|------|------|
| 受试者 | 10人 |
| 时长 | 3天 |
| 总采集量 | 400次挥杆 |
| 目的 | 建立基准数据库，验证诊断规则 |

---

## 二、受试者分组

| 组别 | ID | 差点 | 人数 | 目的 |
|------|-----|------|------|------|
| 进阶组 | A1-A5 | 5-15 | 5人 | 较好水平基准 |
| 初级组 | B1-B5 | 16-30 | 5人 | 常见问题数据 |

---

## 三、时间安排

### Day 1：进阶组采集

| 时间 | 内容 |
|------|------|
| 08:30-09:00 | 设备调试、传感器校准 |
| 09:00-09:40 | A1 **30次** Full Swing |
| 09:40-10:20 | A2 **30次** Full Swing |
| 10:20-10:40 | 休息 |
| 10:40-11:20 | A3 **30次** Full Swing |
| 11:20-12:00 | A4 **30次** Full Swing |
| 午休 | |
| 14:00-14:40 | A5 **30次** Full Swing |
| 14:40-15:30 | A1-A5 各 **5次** 错误动作 |

### Day 2：初级组采集

| 时间 | 内容 |
|------|------|
| 08:30-09:00 | 设备检查 |
| 09:00-09:40 | B1 **30次** Full Swing |
| 09:40-10:20 | B2 **30次** Full Swing |
| 10:20-10:40 | 休息 |
| 10:40-11:20 | B3 **30次** Full Swing |
| 11:20-12:00 | B4 **30次** Full Swing |
| 午休 | |
| 14:00-14:40 | B5 **30次** Full Swing |
| 14:40-15:30 | B1-B5 各 **5次** 错误动作 |

### Day 3：补充采集 + 数据验证

| 时间 | 内容 |
|------|------|
| 09:00-12:00 | 补采缺失数据、重采质量差数据 |
| 14:00-17:00 | 数据质量检查、初步分析 |

---

## 四、采集汇总

| 类型 | 计算 | 次数 |
|------|------|------|
| 正常挥杆 | 10人 × 30次 | 300次 |
| 错误动作 | 10人 × 5次 | 50次 |
| 补采预留 | | 50次 |
| **总计** | | **400次** |

### 错误动作分配

| 错误类型 | 次数/人 | 总次数 | 触发规则 |
|---------|--------|--------|---------|
| 手臂先启动 | 2次 | 20次 | `ARMS_BEFORE_CORE` |
| 早释放 | 2次 | 20次 | `EARLY_RELEASE` |
| 节奏过快 | 1次 | 10次 | `FAST_TEMPO` |

---

## 五、验证目标

- [ ] IMU 检测 Top/Impact 准确率 >90%
- [ ] EMG 区分核心 vs 手臂顺序准确率 >85%
- [ ] 时间同步 <1ms
- [ ] 6条诊断规则全部可触发
- [ ] 进阶组 vs 初级组指标差异显著

---

## 六、原始数据格式

### 6.1 IMU 数据（1666Hz）

```csv
timestamp_ms, acc_x, acc_y, acc_z, gyro_x, gyro_y, gyro_z
0.0,    0.12,  9.78,  0.34,   2.1,   -1.3,    5.2
0.6,    0.15,  9.81,  0.31,   3.4,   -2.1,   12.8
1.2,    0.21,  9.75,  0.29,  15.2,   -8.4,   85.3
...
600.0,  2.34,  8.12,  3.21, 180.5, -120.3, 1850.2  ← Impact 附近
```

- **acc**: 加速度 (g)
- **gyro**: 角速度 (°/s)

### 6.2 EMG 数据（1000Hz）

```csv
timestamp_ms, forearm_raw, forearm_rms, core_raw, core_rms
0.0,    12,   0.02,    8,   0.01
1.0,    15,   0.02,   11,   0.01
2.0,    18,   0.03,   45,   0.08  ← 核心先激活
...
350.0, 180,   0.42,  120,   0.35  ← 前臂后激活
```

- **raw**: 原始 ADC 值
- **rms**: 平滑后的激活强度 (0-1)

### 6.3 Vision 数据（30fps）

```csv
timestamp_ms, shoulder_x, shoulder_y, hip_x, hip_y, wrist_x, wrist_y, ...
0,     320, 180, 325, 350, 280, 420
33,    318, 178, 326, 352, 275, 415
66,    312, 172, 330, 355, 260, 400
...
```

- 33个 MediaPipe 关键点的 x, y 坐标

### 6.4 计算后的指标（每次挥杆1条）

```json
{
  "swing_id": "A1_001",
  "timestamp": "2026-01-08T09:15:32",
  "subject": "A1",
  "group": "advanced",

  "phases": {
    "address_ms": 0,
    "top_ms": 720,
    "impact_ms": 980
  },

  "metrics": {
    "x_factor": 48.2,
    "shoulder_rotation": 92.5,
    "hip_rotation": 47.1,
    "peak_angular_velocity": 1820,
    "tempo_ratio": 2.8,
    "backswing_duration_ms": 720,
    "downswing_duration_ms": 260,
    "core_activation_pct": 0.72,
    "core_forearm_delay_ms": 45
  },

  "diagnosis": {
    "triggered_rules": [],
    "score": 85
  }
}
```

---

## 七、文件结构

```text
data/
├── raw/
│   ├── advanced/
│   │   ├── A1_001/
│   │   │   ├── imu.csv
│   │   │   ├── emg.csv
│   │   │   ├── vision.csv
│   │   │   └── video.mp4
│   │   ├── A1_002/
│   │   └── ...
│   └── beginner/
│       ├── B1_001/
│       └── ...
├── processed/
│   ├── swings.json
│   └── stats/
│       ├── advanced_summary.json
│       └── beginner_summary.json
└── labels/
    └── annotations.csv
```

400次挥杆 ≈ **2-2.5GB** 总数据量

---

## 八、设备清单

| 设备 | 数量 | 用途 |
|------|------|------|
| iPhone | 1 | 视频采集 + MediaPipe |
| IMU (LSM6DSV16X) | 2 | 手背 + 前臂 |
| EMG (MyoWare 2.0) | 2 | 前臂 + 核心 |
| ESP32-S3 | 1 | 数据汇聚 |
| 三脚架 | 1 | 固定手机 |
| 高尔夫球杆 | 1 | Driver |
| 练习球 | 若干 | |
| 备用电池 | 2 | IMU/EMG 供电 |
| 酒精棉片 | 若干 | EMG 电极清洁 |

---

## 九、受试者信息采集

每位受试者需记录：

| 字段 | 说明 |
|------|------|
| ID | A1-A5 / B1-B5 |
| 年龄 | |
| 性别 | |
| 身高 (cm) | |
| 体重 (kg) | |
| 差点 | |
| 球龄 (年) | |
| 惯用手 | 左/右 |
| 近期伤病 | 无/描述 |

---

## 十、数据质量检查清单

每次采集后检查：

- [ ] IMU 数据完整（无断点）
- [ ] EMG 信号正常（SNR >10dB）
- [ ] 视频清晰、完整
- [ ] 时间戳连续
- [ ] Impact 时刻可检测
- [ ] 文件命名正确

---

## 十一、预期成果

| 成果 | 说明 |
|------|------|
| 基准数据库 | 进阶组/初级组各150次有效挥杆 |
| 指标基准值 | 两组的12个指标均值和标准差 |
| 诊断规则阈值 | 6条规则的触发阈值 |
| 准确率报告 | 各规则的灵敏度/特异性 |
