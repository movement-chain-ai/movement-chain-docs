# è¯„ä¼°æ¨¡å¼

> **æ–‡æ¡£ç›®çš„**: å®šä¹‰ä¸‰æ®µå¼è¯„ä¼°æ¨¡å¼çš„å»¶è¿Ÿè¦æ±‚ã€è§¦å‘æ¡ä»¶å’Œå®ç°ç­–ç•¥
>
> **æ ¸å¿ƒæ´å¯Ÿ**: ä¸åŒè¯„ä¼°æ¨¡å¼æœ‰ä¸åŒçš„å»¶è¿Ÿè¦æ±‚å’Œåé¦ˆæ—¶æœº
>
---

## 1. ä¸‰æ®µå¼è¯„ä¼°è®¾è®¡

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    THREE-STEP ASSESSMENT                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Step 1: SETUP CHECK (ç«™å§¿æ£€æŸ¥)                 å»¶è¿Ÿè¦æ±‚: <300ms               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ç”¨æˆ·é™æ­¢å‡†å¤‡ â†’ å®æ—¶æ£€æµ‹å§¿åŠ¿ â†’ è¯­éŸ³/è§†è§‰åé¦ˆ                                      â”‚
â”‚  "è‚©è†€æœ‰äº›ç´§å¼ " / "ç«™è·åçª„"                                                    â”‚
â”‚                                                                             â”‚
â”‚  â±ï¸ ç”¨æˆ·æœ‰ 2-5 ç§’ååº”æ—¶é—´ â†’ å®Œå…¨å¯è¡Œ                                            â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Step 2: SLOW MOTION ANALYSIS (æ…¢åŠ¨ä½œåˆ†æ)      å»¶è¿Ÿè¦æ±‚: <500ms               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ç”¨æˆ·æ…¢é€ŸæŒ¥æ† (1/4-1/2 é€Ÿåº¦) â†’ æ¯é˜¶æ®µæ£€æµ‹ â†’ é˜¶æ®µæ€§åé¦ˆ                            â”‚
â”‚  "è‚©è†€è½¬åŠ¨å¹…åº¦ä¸å¤Ÿ" / "æ‰‹è…•é‡Šæ”¾è¿‡æ—©"                                             â”‚
â”‚                                                                             â”‚
â”‚  â±ï¸ æ…¢åŠ¨ä½œæŒ¥æ† 3-5 ç§’ â†’ æœ‰æ—¶é—´åœ¨æ¯é˜¶æ®µç»™åé¦ˆ                                     â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Step 3: FULL SPEED ANALYSIS (å…¨é€Ÿåˆ†æ)         å»¶è¿Ÿè¦æ±‚: <500ms (æŒ¥æ†å)       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  æ­£å¸¸é€Ÿåº¦æŒ¥æ† â†’ æŒ¥æ†åå³æ—¶åˆ†æ â†’ ç»¼åˆåé¦ˆ                                         â”‚
â”‚  "èŠ‚å¥è‰¯å¥½ï¼Œæ ¸å¿ƒå‘åŠ›æ—¶æœºåæ™š"                                                    â”‚
â”‚                                                                             â”‚
â”‚  â±ï¸ æŒ¥æ†åªæœ‰ 1.2 ç§’ â†’ åªèƒ½äº‹ååé¦ˆ                                              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
---

## 2. Step 1: ç«™å§¿æ£€æŸ¥

### 2.1 è®¾è®¡åŸåˆ™

ç”¨æˆ·åœ¨æŒ¥æ†å‰æœ‰ 2-5 ç§’çš„å‡†å¤‡æ—¶é—´ï¼Œè¿™æ˜¯**æœ€ä½³åé¦ˆçª—å£**ï¼š

- ç”¨æˆ·é™æ­¢ï¼Œå§¿æ€ç¨³å®š
- æœ‰æ—¶é—´å¬å–å¹¶è°ƒæ•´
- æ¯æ¬¡æŒ¥æ†å‰éƒ½å¯ä»¥æ£€æŸ¥
- è¿™æ˜¯æ•™ç»ƒæœ€å¸¸åšçš„äº‹æƒ…

### 2.2 æ£€æµ‹é¡¹ç›®

| æ£€æµ‹é¡¹ | ä¼ æ„Ÿå™¨ | é˜ˆå€¼ | åé¦ˆï¼ˆå®¢è§‚æè¿°ï¼‰ |
|-------|--------|-----|-----------------|
| å¤´éƒ¨ä½ç½®è¿‡é«˜ | Vision | `nose.y < shoulder.y * 0.7` | "å¤´éƒ¨ä½ç½®åé«˜" |
| è‚©è†€è€¸èµ· | Vision | `(shoulder.y - ear.y) < threshold` | "è‚©è†€æœ‰äº›ç´§å¼ " |
| ç«™è·è¿‡çª„ | Vision | `ankle_dist / shoulder_width < 0.9` | "ç«™è·åçª„" |
| ç«™è·è¿‡å®½ | Vision | `ankle_dist / shoulder_width > 1.3` | "ç«™è·åå®½" |
| è„ŠæŸ±å¤ªç›´ | Vision | `spine_angle < 25Â°` | "ä¸Šèº«è¾ƒç›´" |
| è„ŠæŸ±è¿‡å¼¯ | Vision | `spine_angle > 45Â°` | "ä¸Šèº«å‰å€¾è¾ƒå¤š" |
| è†ç›–é”æ­» | Vision | `knee_angle > 175Â°` | "è†ç›–è¾ƒç›´" |
| é‡å¿ƒåç§» | Vision | `hip_center.x` åç¦»ä¸­å¿ƒ | "é‡å¿ƒåå·¦/å³" |

!!! note "è¯„ä¼° vs å¼•å¯¼"
    è¯„ä¼°æ¨¡å¼åª**å‘ŠçŸ¥é—®é¢˜**ï¼Œä¸æŒ‡å¯¼å¦‚ä½•è°ƒæ•´ã€‚ç”¨æˆ·è‡ªä¸»å†³å®šæ˜¯å¦ä¿®æ­£ã€‚
    å¦‚éœ€å®æ—¶å¼•å¯¼è°ƒæ•´ï¼Œè¯·å‚è€ƒ [å¼•å¯¼æ¨¡å¼](guide-mode.md)ã€‚

### 2.3 å®ç°ä»£ç 

```python
class SetupChecker:
    """
    ç«™å§¿å®æ—¶æ£€æŸ¥å™¨

    åœ¨ç”¨æˆ·å‡†å¤‡æŒ¥æ†æ—¶æŒç»­è¿è¡Œï¼Œæ£€æµ‹å¹¶åé¦ˆå§¿æ€é—®é¢˜
    """

    def __init__(self, feedback_cooldown_ms=2000):
        self.feedback_cooldown = feedback_cooldown_ms
        self.last_feedback_time = {}

    def check_setup(self, landmarks, current_time):
        """
        æ£€æŸ¥ç«™å§¿å¹¶è¿”å›éœ€è¦åé¦ˆçš„é—®é¢˜

        Args:
            landmarks: MediaPipe 33 å…³é”®ç‚¹
            current_time: å½“å‰æ—¶é—´æˆ³ (ms)

        Returns:
            issues: list of (issue_name, feedback_text, priority)
        """
        issues = []

        # 1. æ£€æŸ¥å¤´éƒ¨ä½ç½®
        if self._head_too_high(landmarks):
            issues.append(('head_high', 'å¤´éƒ¨ä½ç½®åé«˜', 2))

        # 2. æ£€æŸ¥è‚©è†€
        if self._shoulders_raised(landmarks):
            issues.append(('shoulders', 'è‚©è†€æœ‰äº›ç´§å¼ ', 2))

        # 3. æ£€æŸ¥ç«™è·
        stance_ratio = self._get_stance_ratio(landmarks)
        if stance_ratio < 0.9:
            issues.append(('stance_narrow', 'ç«™è·åçª„', 1))
        elif stance_ratio > 1.3:
            issues.append(('stance_wide', 'ç«™è·åå®½', 1))

        # 4. æ£€æŸ¥è„ŠæŸ±è§’åº¦
        spine_angle = self._get_spine_angle(landmarks)
        if spine_angle < 25:
            issues.append(('spine_straight', 'ä¸Šèº«è¾ƒç›´', 1))
        elif spine_angle > 45:
            issues.append(('spine_bent', 'ä¸Šèº«å‰å€¾è¾ƒå¤š', 1))

        # 5. æ£€æŸ¥è†ç›–
        if self._knees_locked(landmarks):
            issues.append(('knees', 'è†ç›–è¾ƒç›´', 2))

        # è¿‡æ»¤å†·å´ä¸­çš„åé¦ˆ
        filtered_issues = []
        for issue_name, text, priority in issues:
            last_time = self.last_feedback_time.get(issue_name, 0)
            if current_time - last_time > self.feedback_cooldown:
                filtered_issues.append((issue_name, text, priority))
                self.last_feedback_time[issue_name] = current_time

        # æŒ‰ä¼˜å…ˆçº§æ’åºï¼Œåªè¿”å›æœ€é‡è¦çš„ 1-2 ä¸ª
        filtered_issues.sort(key=lambda x: x[2])
        return filtered_issues[:2]

    def _get_stance_ratio(self, landmarks):
        """è®¡ç®—ç«™è·æ¯”ä¾‹"""
        LEFT_ANKLE, RIGHT_ANKLE = 27, 28
        LEFT_SHOULDER, RIGHT_SHOULDER = 11, 12

        ankle_dist = np.linalg.norm(
            np.array([landmarks[LEFT_ANKLE].x, landmarks[LEFT_ANKLE].y]) -
            np.array([landmarks[RIGHT_ANKLE].x, landmarks[RIGHT_ANKLE].y])
        )
        shoulder_dist = np.linalg.norm(
            np.array([landmarks[LEFT_SHOULDER].x, landmarks[LEFT_SHOULDER].y]) -
            np.array([landmarks[RIGHT_SHOULDER].x, landmarks[RIGHT_SHOULDER].y])
        )

        return ankle_dist / shoulder_dist if shoulder_dist > 0 else 1.0

    def _get_spine_angle(self, landmarks):
        """è®¡ç®—è„ŠæŸ±å‰å€¾è§’åº¦"""
        # ç®€åŒ–: ä½¿ç”¨è‚©è†€ä¸­ç‚¹åˆ°é«‹éƒ¨ä¸­ç‚¹çš„è§’åº¦
        LEFT_SHOULDER, RIGHT_SHOULDER = 11, 12
        LEFT_HIP, RIGHT_HIP = 23, 24

        shoulder_center = np.array([
            (landmarks[LEFT_SHOULDER].x + landmarks[RIGHT_SHOULDER].x) / 2,
            (landmarks[LEFT_SHOULDER].y + landmarks[RIGHT_SHOULDER].y) / 2
        ])
        hip_center = np.array([
            (landmarks[LEFT_HIP].x + landmarks[RIGHT_HIP].x) / 2,
            (landmarks[LEFT_HIP].y + landmarks[RIGHT_HIP].y) / 2
        ])

        # è®¡ç®—ä¸å‚ç›´çº¿çš„å¤¹è§’
        vertical = np.array([0, -1])
        spine_vec = shoulder_center - hip_center
        spine_vec_norm = spine_vec / np.linalg.norm(spine_vec)

        angle = np.arccos(np.dot(spine_vec_norm, vertical))
        return np.degrees(angle)

    def _head_too_high(self, landmarks):
        """æ£€æŸ¥å¤´éƒ¨æ˜¯å¦è¿‡é«˜"""
        NOSE = 0
        LEFT_SHOULDER, RIGHT_SHOULDER = 11, 12

        nose_y = landmarks[NOSE].y
        shoulder_y = (landmarks[LEFT_SHOULDER].y + landmarks[RIGHT_SHOULDER].y) / 2

        # åœ¨å½’ä¸€åŒ–åæ ‡ä¸­ï¼Œy è¶Šå°è¡¨ç¤ºè¶Šé«˜
        return nose_y < shoulder_y * 0.7

    def _shoulders_raised(self, landmarks):
        """æ£€æŸ¥è‚©è†€æ˜¯å¦è€¸èµ·"""
        LEFT_EAR, RIGHT_EAR = 7, 8
        LEFT_SHOULDER, RIGHT_SHOULDER = 11, 12

        ear_y = (landmarks[LEFT_EAR].y + landmarks[RIGHT_EAR].y) / 2
        shoulder_y = (landmarks[LEFT_SHOULDER].y + landmarks[RIGHT_SHOULDER].y) / 2

        # è‚©è†€å’Œè€³æœµè·ç¦»å¤ªè¿‘è¡¨ç¤ºè€¸è‚©
        return (shoulder_y - ear_y) < 0.08  # å½’ä¸€åŒ–åæ ‡

    def _knees_locked(self, landmarks):
        """æ£€æŸ¥è†ç›–æ˜¯å¦é”æ­»"""
        # ç®€åŒ–: æ£€æŸ¥è†ç›–æ˜¯å¦å‡ ä¹å®Œå…¨ä¼¸ç›´
        LEFT_HIP, LEFT_KNEE, LEFT_ANKLE = 23, 25, 27

        hip = np.array([landmarks[LEFT_HIP].x, landmarks[LEFT_HIP].y])
        knee = np.array([landmarks[LEFT_KNEE].x, landmarks[LEFT_KNEE].y])
        ankle = np.array([landmarks[LEFT_ANKLE].x, landmarks[LEFT_ANKLE].y])

        # è®¡ç®—è†ç›–è§’åº¦
        vec1 = hip - knee
        vec2 = ankle - knee
        cos_angle = np.dot(vec1, vec2) / (np.linalg.norm(vec1) * np.linalg.norm(vec2))
        angle = np.degrees(np.arccos(np.clip(cos_angle, -1, 1)))

        return angle > 175
```

---

## 3. Step 2: æ…¢åŠ¨ä½œåˆ†æ

### 3.1 è®¾è®¡åŸåˆ™

è®©ç”¨æˆ·ä»¥ 1/4 æˆ– 1/2 é€Ÿåº¦ç»ƒä¹ ï¼Œç³»ç»Ÿå¯ä»¥åœ¨æ¯ä¸ªé˜¶æ®µç»™å‡ºå®æ—¶åé¦ˆã€‚

```text
æ­£å¸¸æŒ¥æ†:  1.2 ç§’ (å¤ªå¿«ï¼Œæ— æ³•å®æ—¶åé¦ˆ)
1/2 é€Ÿåº¦:  2.4 ç§’ (æ¯é˜¶æ®µçº¦ 300msï¼Œå¯ä»¥åé¦ˆ)
1/4 é€Ÿåº¦:  4.8 ç§’ (æ¯é˜¶æ®µçº¦ 600msï¼Œå……è¶³åé¦ˆæ—¶é—´)
```

### 3.2 é˜¶æ®µæ€§åé¦ˆè®¾è®¡

| é˜¶æ®µ | æ£€æµ‹ç‚¹ | åé¦ˆå†…å®¹ | è§¦å‘æ¡ä»¶ |
|-----|-------|---------|---------|
| Address â†’ Toe-Up | èµ·æ†å¼€å§‹ | "å¥½ï¼Œæ…¢æ…¢èµ·æ†" | æ£€æµ‹åˆ°è¿åŠ¨å¼€å§‹ |
| Toe-Up â†’ Mid-Backswing | æ‰‹è…•å¹³è¡Œ | "ç»§ç»­è½¬è‚©" | æ‰‹è…•è¾¾åˆ°è…°éƒ¨é«˜åº¦ |
| Mid-Backswing â†’ Top | åˆ°é¡¶ç‚¹ | "è½¬åˆ°ä½äº†" | è§’é€Ÿåº¦æ¥è¿‘é›¶ |
| Top â†’ Mid-Downswing | ä¸‹æ†å¯åŠ¨ | "ä»æ ¸å¿ƒå¯åŠ¨" | æ£€æµ‹åˆ°æ–¹å‘åè½¬ |
| Mid-Downswing â†’ Impact | å‡»çƒå‰ | "ä¿æŒæ‰‹è…•" | æ£€æµ‹åˆ°åŠ é€Ÿ |
| Impact â†’ Finish | å‡»çƒå | "ä¿æŒå¹³è¡¡" | æ£€æµ‹åˆ°å‡»çƒ |

### 3.3 å®ç°ä»£ç 

```python
class SlowMotionCoach:
    """
    æ…¢åŠ¨ä½œè®­ç»ƒæ•™ç»ƒ

    åœ¨ç”¨æˆ·æ…¢é€ŸæŒ¥æ†æ—¶ï¼Œæ¯ä¸ªé˜¶æ®µç»™å‡ºå¼•å¯¼åé¦ˆ
    """

    PHASE_PROMPTS = {
        'address_start': 'å‡†å¤‡å¥½äº†ï¼Œæ…¢æ…¢èµ·æ†',
        'toe_up': 'å¥½ï¼Œç»§ç»­',
        'mid_backswing': 'è½¬è‚©ï¼Œè½¬è‚©',
        'top': 'åˆ°é¡¶äº†ï¼Œå‡†å¤‡ä¸‹æ†',
        'transition': 'ä»æ ¸å¿ƒå¯åŠ¨',
        'mid_downswing': 'ä¿æŒæ‰‹è…•è§’åº¦',
        'impact': 'æ‰“åˆ°äº†ï¼',
        'finish': 'æ”¶æ†ï¼Œä¿æŒå¹³è¡¡',
    }

    def __init__(self, phase_detector, audio_player):
        self.phase_detector = phase_detector
        self.audio_player = audio_player
        self.current_phase = None
        self.phases_announced = set()

    def update(self, imu_data, vision_data, current_time):
        """
        æ¯å¸§æ›´æ–°ï¼Œæ£€æµ‹é˜¶æ®µå˜åŒ–å¹¶ç»™å‡ºåé¦ˆ
        """
        # æ£€æµ‹å½“å‰é˜¶æ®µ
        phases = self.phase_detector.detect_all_phases(imu_data, vision_data)

        new_phase = self._determine_current_phase(phases, current_time)

        if new_phase and new_phase != self.current_phase:
            if new_phase not in self.phases_announced:
                self._announce_phase(new_phase)
                self.phases_announced.add(new_phase)
            self.current_phase = new_phase

    def _announce_phase(self, phase):
        """æ’­æ”¾é˜¶æ®µæç¤ºéŸ³"""
        prompt = self.PHASE_PROMPTS.get(phase)
        if prompt:
            self.audio_player.play(prompt)

    def reset(self):
        """é‡ç½®çŠ¶æ€ï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡æŒ¥æ†"""
        self.current_phase = None
        self.phases_announced.clear()

    def _determine_current_phase(self, phases, current_time):
        """æ ¹æ®æ£€æµ‹åˆ°çš„é˜¶æ®µæ—¶é—´ç¡®å®šå½“å‰é˜¶æ®µ"""
        # ç®€åŒ–é€»è¾‘: æ ¹æ®æ—¶é—´é¡ºåºåˆ¤æ–­
        if phases.get('finish') and current_time > phases['finish']:
            return 'finish'
        if phases.get('impact') and current_time > phases['impact']:
            return 'impact'
        if phases.get('top') and current_time > phases['top']:
            if current_time < phases['top'] + 200:
                return 'transition'
            return 'mid_downswing'
        if phases.get('address', {}).get('end') and current_time > phases['address']['end']:
            return 'mid_backswing'

        return 'address_start'
```

### 3.4 æ…¢åŠ¨ä½œè®­ç»ƒçš„æ ¸å¿ƒä»·å€¼

#### 3.4.1 è¿˜åŸçœŸå®é«˜å°”å¤«æ•™å­¦åœºæ™¯

æ…¢åŠ¨ä½œè®­ç»ƒï¼ˆMode 2ï¼‰æ¨¡æ‹Ÿäº†ä¸“ä¸šæ•™ç»ƒæ•™å­¦çš„æ ¸å¿ƒç¯èŠ‚ï¼š

| çœŸå®æ•™å­¦åœºæ™¯ | Mode 2 å®ç° |
|------------|------------|
| æ•™ç»ƒè®©ä½ æ…¢æ…¢åšï¼Œä»–åœ¨æ—è¾¹çœ‹ | ç³»ç»Ÿå®æ—¶ç›‘æµ‹æ¯ä¸ªé˜¶æ®µ |
| æ•™ç»ƒåœ¨å…³é”®ç‚¹å–Š"åœï¼Œè¿™é‡Œè¦å‘åŠ›" | é˜¶æ®µæ€§è¯­éŸ³æç¤º |
| æ•™ç»ƒè¯´"å¯¹ï¼Œå°±æ˜¯è¿™ä¸ªæ„Ÿè§‰" | æ­£ç¡®æ¨¡å¼ç¡®è®¤åé¦ˆ |
| åå¤ç»ƒä¹ ç›´åˆ°å½¢æˆè‚Œè‚‰è®°å¿† | é‡å¤è®­ç»ƒ + ä¸€è‡´æ€§è¿½è¸ª |

#### 3.4.2 è§£å†³"çŸ¥é“ä½†åšä¸åˆ°"çš„é—®é¢˜

å…¨é€Ÿåˆ†æèƒ½å‘Šè¯‰ç”¨æˆ·"æ ¸å¿ƒå‘åŠ›å¤ªæ™š"ï¼Œä½†ç”¨æˆ·ä¸‹ä¸€æ†è¿˜æ˜¯ä¸€æ ·â€”â€”å› ä¸º 1.2 ç§’çš„æŒ¥æ†å¤ªå¿«ï¼Œæ¥ä¸åŠè°ƒæ•´ã€‚

æ…¢åŠ¨ä½œè®­ç»ƒæŠŠåŠ¨ä½œæ‹‰é•¿åˆ° 3-5 ç§’ï¼Œç”¨æˆ·å¯ä»¥åœ¨"ä¸‹æ†å¯åŠ¨"çš„é‚£ä¸ªç¬é—´ï¼š
- å¬åˆ°æç¤º"ä»æ ¸å¿ƒå‘åŠ›"
- ä½“ä¼šæ­£ç¡®çš„å‘åŠ›æ„Ÿè§‰
- é‡å¤ 50 æ¬¡å»ºç«‹è‚Œè‚‰è®°å¿†
- å…¨é€ŸæŒ¥æ†æ—¶è‡ªåŠ¨æ‰§è¡Œ

#### 3.4.3 é™ä½å­¦ä¹ é—¨æ§›

| åœºæ™¯ | æ²¡æœ‰ Mode 2 | æœ‰ Mode 2 |
|-----|------------|----------|
| åˆå­¦è€… | å…¨é€Ÿæ‰“ â†’ åå¤å‡ºé”™ â†’ æŒ«è´¥æ”¾å¼ƒ | æ…¢ç»ƒ â†’ é€æ­¥æŒæ¡ â†’ æœ‰æˆå°±æ„Ÿ |
| æŠ€æœ¯çº æ­£ | çŸ¥é“é—®é¢˜ä½†æ”¹ä¸äº† | åœ¨æ…¢åŠ¨ä½œä¸­ä½“ä¼šæ­£ç¡®æ„Ÿè§‰ |
| ä¼¤åæ¢å¤ | ä¸æ•¢å…¨é€Ÿæ‰“ | å®‰å…¨åœ°é‡å»ºåŠ¨ä½œæ¨¡å¼ |

#### 3.4.4 ä¸å…¨é€Ÿåˆ†æå»ºç«‹è®­ç»ƒé—­ç¯

æ…¢åŠ¨ä½œè®­ç»ƒï¼ˆMode 2ï¼‰å’Œå…¨é€Ÿåˆ†æï¼ˆMode 3ï¼‰å…±åŒæ„å»ºäº†**éªŒè¯ â†’ åé¦ˆ â†’ è®­ç»ƒ â†’ å®æˆ˜**çš„å®Œæ•´å­¦ä¹ é—­ç¯ï¼š

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              éªŒè¯ â†’ åé¦ˆ â†’ è®­ç»ƒ â†’ å®æˆ˜ é—­ç¯                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚    å®æˆ˜       â”‚                    â”‚     åé¦ˆ     â”‚      â”‚
â”‚   â”‚  Mode 3 å…¨é€Ÿ  â”‚ â”€â”€â”€ å‘ç°é—®é¢˜ â”€â”€â”€â”€â–¶  â”‚ "æ ¸å¿ƒå‘åŠ›æ™š"  â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚          â–²                                   â”‚              â”‚
â”‚          â”‚                                   â–¼              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚    éªŒè¯       â”‚                    â”‚    è®­ç»ƒ      â”‚      â”‚
â”‚   â”‚ "é—®é¢˜è§£å†³äº†"   â”‚ â—€â”€â”€â”€ å»ºç«‹è®°å¿† â”€â”€â”€â”€  â”‚ Mode 2 æ…¢ç»ƒ   â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å››ä¸ªç¯èŠ‚**ï¼š

| ç¯èŠ‚ | Mode | ä½œç”¨ | è¯´æ˜ |
|-----|------|------|------|
| **å®æˆ˜** | Mode 3 | å…¨é€ŸæŒ¥æ† | çœŸå®è¡¨ç°ï¼Œæš´éœ²é—®é¢˜ |
| **åé¦ˆ** | Mode 3 | è¯Šæ–­åˆ†æ | å‘Šè¯‰ç”¨æˆ·"å“ªé‡Œé”™äº†" |
| **è®­ç»ƒ** | Mode 2 | æ…¢åŠ¨ä½œçº æ­£ | åœ¨è¿‡ç¨‹ä¸­ä½“ä¼š"æ€ä¹ˆåšå¯¹" |
| **éªŒè¯** | Mode 3 | æ£€éªŒè¿ç§» | ç¡®è®¤è®­ç»ƒæ•ˆæœæ˜¯å¦ä¿æŒ |

**é—­ç¯è¿è½¬ç¤ºä¾‹**ï¼š

1. **å®æˆ˜**ï¼šç”¨æˆ·å…¨é€ŸæŒ¥æ†
2. **åé¦ˆ**ï¼šç³»ç»Ÿè¯Šæ–­"æ ¸å¿ƒå‘åŠ›å¤ªæ™š"
3. **è®­ç»ƒ**ï¼šåˆ‡æ¢æ…¢åŠ¨ä½œæ¨¡å¼ï¼Œåœ¨ä¸‹æ†å¯åŠ¨é˜¶æ®µå®æ—¶æç¤º"ä»æ ¸å¿ƒå‘åŠ›"ï¼Œé‡å¤ç»ƒä¹ å»ºç«‹è‚Œè‚‰è®°å¿†
4. **éªŒè¯**ï¼šå›åˆ°å…¨é€ŸæŒ¥æ†ï¼Œç¡®è®¤é—®é¢˜æ˜¯å¦è§£å†³
5. **å¾ªç¯**ï¼šå¦‚æœé—®é¢˜è§£å†³åˆ™è¿›å…¥ä¸‹ä¸€ä¸ªæ”¹è¿›ç‚¹ï¼Œå¦åˆ™ç»§ç»­è®­ç»ƒ

!!! tip "ä¸€å¥è¯æ€»ç»“"
    Mode 2 æ˜¯è®©ç”¨æˆ·**çœŸæ­£å­¦ä¼š**çš„å…³é”®â€”â€”ä¸åªæ˜¯çœ‹åˆ°é—®é¢˜ï¼Œè€Œæ˜¯åœ¨è¿‡ç¨‹ä¸­ä½“ä¼šæ­£ç¡®çš„æ„Ÿè§‰ï¼Œå¹¶é€šè¿‡ Mode 3 éªŒè¯å­¦ä¹ æ•ˆæœã€‚

---

## 4. Step 3: å…¨é€Ÿåˆ†æ

### 4.1 è®¾è®¡åŸåˆ™

æ­£å¸¸é€Ÿåº¦æŒ¥æ†æ—¶ï¼Œç³»ç»Ÿåªèƒ½åœ¨**æŒ¥æ†ç»“æŸå**æä¾›åé¦ˆã€‚ä½†åé¦ˆè¦è¶³å¤Ÿå¿« (<500ms)ï¼Œè®©ç”¨æˆ·åœ¨ä¸‹ä¸€æ¬¡æŒ¥æ†å‰èƒ½æ¶ˆåŒ–ã€‚

### 4.2 åé¦ˆä¼˜å…ˆçº§

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FEEDBACK PRIORITY (POST-SWING)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  P0 (ç«‹å³è¯´): ä¸¥é‡é—®é¢˜ï¼Œå½±å“æŒ¥æ†è´¨é‡                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ å‘åŠ›é¡ºåºé”™è¯¯ (EMG: æ‰‹è‡‚å…ˆäºæ ¸å¿ƒ) â†’ "ä»æ ¸å¿ƒå¯åŠ¨"                                â”‚
â”‚  â€¢ è¿åŠ¨é“¾æ–­è£‚ (EMG: æ ¸å¿ƒæ¿€æ´»ä¸è¶³) â†’ "æ”¶ç´§è…¹éƒ¨å‘åŠ›"                                â”‚
â”‚                                                                             â”‚
â”‚  P1 (å…¶æ¬¡): é‡è¦é—®é¢˜ï¼Œå½±å“è¡¨ç°                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ X-Factor ä¸è¶³ â†’ "è‚©è†€å†å¤šè½¬ä¸€ç‚¹"                                            â”‚
â”‚  â€¢ èŠ‚å¥è¿‡å¿« â†’ "ä¸Šæ†æ…¢ä¸€ç‚¹"                                                     â”‚
â”‚  â€¢ é€Ÿåº¦ä¸è¶³ â†’ "å†ç”¨åŠ›ä¸€äº›"                                                     â”‚
â”‚                                                                             â”‚
â”‚  P2 (æœ€å): ä¼˜åŒ–å»ºè®®ï¼Œé”¦ä¸Šæ·»èŠ±                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ æ”¶æ†å¹³è¡¡é—®é¢˜ â†’ "æ³¨æ„æ”¶æ†å¹³è¡¡"                                                â”‚
â”‚  â€¢ ç»†èŠ‚è°ƒæ•´ â†’ å¯ä»¥ä¸è¯´ï¼Œç•™å¾…è¯¦ç»†åˆ†æ                                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 å®ç°ä»£ç 

```python
class PostSwingFeedback:
    """
    æŒ¥æ†åå³æ—¶åé¦ˆç”Ÿæˆå™¨

    åœ¨æŒ¥æ†ç»“æŸå <500ms å†…ç”Ÿæˆå¹¶æ’­æ”¾åé¦ˆ
    """

    def __init__(self, audio_player):
        self.audio_player = audio_player

    def generate_feedback(self, swing_analysis):
        """
        ç”Ÿæˆä¼˜å…ˆçº§æ’åºçš„åé¦ˆ

        Args:
            swing_analysis: dict with vision, imu, emg features and scores

        Returns:
            feedback_list: list of (priority, text, audio_file)
        """
        feedbacks = []

        # P0: EMG ç‹¬ç‰¹æ´å¯Ÿ (æœ€é«˜ä¼˜å…ˆçº§)
        if swing_analysis.get('emg'):
            emg = swing_analysis['emg']

            if not emg.get('activation_sequence_correct', True):
                feedbacks.append((
                    0,
                    'å‘åŠ›é¡ºåºé”™äº†ï¼Œä»æ ¸å¿ƒå¯åŠ¨',
                    'core_first.mp3'
                ))

            if emg.get('core_activation', 100) < 50:
                feedbacks.append((
                    0,
                    'æ ¸å¿ƒå‘åŠ›ä¸å¤Ÿï¼Œæ”¶ç´§è…¹éƒ¨',
                    'engage_core.mp3'
                ))

        # P1: Vision + IMU åˆ†æ
        vision = swing_analysis.get('vision', {})
        imu = swing_analysis.get('imu', {})

        if vision.get('x_factor', 100) < 35:
            feedbacks.append((
                1,
                'è‚©è†€è½¬ä¸å¤Ÿï¼ŒXå› å­åªæœ‰{:.0f}åº¦'.format(vision['x_factor']),
                'more_rotation.mp3'
            ))

        if imu.get('tempo_ratio', 3) < 2.5:
            feedbacks.append((
                1,
                'èŠ‚å¥å¤ªå¿«ï¼Œä¸Šæ†æ…¢ä¸€ç‚¹',
                'slow_backswing.mp3'
            ))
        elif imu.get('tempo_ratio', 3) > 4.0:
            feedbacks.append((
                1,
                'èŠ‚å¥å¤ªæ…¢ï¼Œå¯ä»¥å†æµç•…ä¸€äº›',
                'smoother_tempo.mp3'
            ))

        if imu.get('peak_angular_velocity', 1000) < 800:
            feedbacks.append((
                1,
                'é€Ÿåº¦ä¸å¤Ÿï¼Œå†ç”¨åŠ›ä¸€äº›',
                'more_power.mp3'
            ))

        # P2: ä¼˜åŒ–å»ºè®®
        score = swing_analysis.get('score', 100)
        if score >= 80:
            feedbacks.append((
                2,
                'è¿™ä¸€æ†ä¸é”™ï¼Œ{:.0f}åˆ†'.format(score),
                'good_swing.mp3'
            ))

        # æ’åºå¹¶è¿”å›å‰ 2 ä¸ª
        feedbacks.sort(key=lambda x: x[0])
        return feedbacks[:2]

    def play_feedback(self, feedbacks):
        """æ’­æ”¾åé¦ˆ"""
        for priority, text, audio_file in feedbacks:
            self.audio_player.play(audio_file)
            # ç­‰å¾…æ’­æ”¾å®Œæˆå†è¯´ä¸‹ä¸€æ¡
            break  # åªè¯´æœ€é‡è¦çš„ä¸€æ¡
```

---

## 5. åé¦ˆé€šé“

åé¦ˆé€šé“æ˜¯æŒ‡ç³»ç»Ÿå‘ç”¨æˆ·ä¼ é€’ä¿¡æ¯çš„**å½¢å¼**ï¼Œä¸åˆ†ææ¨¡å¼ï¼ˆåœºæ™¯ 1/2/3ï¼‰æ˜¯æ­£äº¤çš„ä¸¤ä¸ªç»´åº¦ã€‚

| åé¦ˆé€šé“ | å»¶è¿Ÿ | é€‚ç”¨åœºæ™¯ | ä¼˜åŠ¿ | å±€é™ |
|---------|------|---------|------|------|
| **è¯­éŸ³åé¦ˆ** | 50-100ms | æ‰€æœ‰åœºæ™¯ | ä¿¡æ¯é‡å¤§ï¼Œæ— éœ€çœ‹å±å¹• | éœ€è¦å®‰é™ç¯å¢ƒ |
| **è§†è§‰åé¦ˆ** | <20ms | æ‰€æœ‰åœºæ™¯ | ç²¾ç¡®å±•ç¤ºä½ç½®/è§’åº¦ | ç”¨æˆ·éœ€çœ‹å±å¹• |
| **è§¦è§‰åé¦ˆ** | <50ms | æ…¢åŠ¨ä½œè®­ç»ƒ | å”¯ä¸€èƒ½å®æ—¶å¹²é¢„çš„æ–¹å¼ | ä¿¡æ¯é‡æœ‰é™ |

### 5.1 è¯­éŸ³åé¦ˆ

**é¢„å½•åˆ¶è¯­éŸ³æ–‡ä»¶**

| ç±»åˆ« | æ–‡ä»¶å | æ–‡æ¡ˆ | æ—¶é•¿ |
|-----|-------|------|------|
| **æ ¸å¿ƒé—®é¢˜ (P0)** | `core_first.mp3` | "ä»æ ¸å¿ƒå¯åŠ¨" | ~1s |
| | `engage_core.mp3` | "æ”¶ç´§è…¹éƒ¨å‘åŠ›" | ~1.2s |
| | `sequence_wrong.mp3` | "å‘åŠ›é¡ºåºé”™äº†" | ~1s |
| **æ—‹è½¬é—®é¢˜ (P1)** | `more_rotation.mp3` | "è‚©è†€å†å¤šè½¬ä¸€ç‚¹" | ~1.2s |
| | `hip_lead.mp3` | "é«‹éƒ¨å…ˆè½¬å¼€" | ~1s |
| **èŠ‚å¥é—®é¢˜ (P1)** | `slow_backswing.mp3` | "ä¸Šæ†æ…¢ä¸€ç‚¹" | ~1s |
| | `faster_downswing.mp3` | "ä¸‹æ†å†å¿«ä¸€ç‚¹" | ~1s |
| | `good_tempo.mp3` | "èŠ‚å¥ä¸é”™" | ~0.8s |
| **ç«™å§¿é—®é¢˜** | `shoulders_tense.mp3` | "è‚©è†€æœ‰äº›ç´§å¼ " | ~1s |
| | `stance_narrow.mp3` | "ç«™è·åçª„" | ~0.8s |
| | `knees_straight.mp3` | "è†ç›–è¾ƒç›´" | ~0.8s |
| **æ­£é¢åé¦ˆ** | `good_swing.mp3` | "è¿™ä¸€æ†ä¸é”™" | ~1s |
| | `great_power.mp3` | "åŠ›é‡å¾ˆå¥½" | ~0.8s |
| | `perfect.mp3` | "å®Œç¾ï¼" | ~0.6s |

**TTS åŠ¨æ€ç”Ÿæˆ**

å¯¹äºéœ€è¦åŒ…å«æ•°æ®çš„åé¦ˆï¼ˆå¦‚å…·ä½“åˆ†æ•°ã€è§’åº¦ï¼‰ï¼Œä½¿ç”¨ TTS åŠ¨æ€ç”Ÿæˆï¼š

```swift
import AVFoundation  // iOS åŸç”Ÿ TTS

class FeedbackSpeaker {
    private let synthesizer = AVSpeechSynthesizer()

    /// åŠ¨æ€ç”Ÿæˆè¯­éŸ³åé¦ˆ
    /// - Examples:
    ///   - generateFeedback("Xå› å­\(xFactor)åº¦ï¼Œä¸å¤Ÿ")
    ///   - generateFeedback("é€Ÿåº¦\(speed)ï¼Œå¾ˆä¸é”™")
    func generateFeedback(_ text: String, rate: Float = 0.5) {
        let utterance = AVSpeechUtterance(string: text)
        utterance.voice = AVSpeechSynthesisVoice(language: "zh-CN")
        utterance.rate = rate
        synthesizer.speak(utterance)
    }
}
```

### 5.2 è§¦è§‰åé¦ˆ

è§¦è§‰åé¦ˆ (<50ms å»¶è¿Ÿ) æ˜¯å”¯ä¸€èƒ½åœ¨æŒ¥æ†è¿‡ç¨‹ä¸­å®æ—¶å¹²é¢„çš„æ–¹å¼ã€‚

**ç¡¬ä»¶ä¾èµ–**

è§¦è§‰åé¦ˆéœ€è¦**æŒ¯åŠ¨è¾“å‡ºè®¾å¤‡**ï¼Œä¸æ˜¯è¾“å…¥ä¼ æ„Ÿå™¨ï¼š

| è®¾å¤‡ | è¯´æ˜ | ä¼˜åŠ£ |
|-----|------|------|
| **Apple Watch** | é€šè¿‡ WatchKit è§¦å‘æŒ¯åŠ¨ | âœ… è´´è¿‘èº«ä½“ï¼Œæ„ŸçŸ¥æ˜ç¡®ï¼›âŒ éœ€é¢å¤–å¼€å‘ watchOS App |
| **iPhone Taptic Engine** | é€šè¿‡ Core Haptics æ§åˆ¶ | âš ï¸ ç”¨æˆ·æ‰“çƒæ—¶ä¸æ¡æ‰‹æœºï¼Œå®ç”¨æ€§æœ‰é™ |
| **è‡ªå®šä¹‰å¯ç©¿æˆ´** | æ‰‹ç¯/è…°å¸¦ä¸Šçš„æŒ¯åŠ¨é©¬è¾¾ | âœ… ä½ç½®çµæ´»ï¼›âŒ éœ€è¦ç¡¬ä»¶å¼€å‘ |

!!! note "MVP ä¸åŒ…å«è§¦è§‰åé¦ˆ"
    è§¦è§‰åé¦ˆéœ€è¦é¢å¤–ç¡¬ä»¶æ”¯æŒï¼Œåˆ—å…¥ Post-MVP é˜¶æ®µã€‚

**æŒ¯åŠ¨æ¨¡å¼**

| æ¨¡å¼ | æŒ¯åŠ¨æ—¶é•¿ | å«ä¹‰ | è§¦å‘æ¡ä»¶ |
|-----|---------|-----|---------|
| çŸ­æŒ¯ (50ms) | 1æ¬¡ | è½»å¾®æç¤º | æ¥è¿‘é˜ˆå€¼è¾¹ç•Œ |
| çŸ­æŒ¯ (50ms) | 2æ¬¡ | éœ€è¦æ³¨æ„ | è¶…å‡ºé˜ˆå€¼ |
| é•¿æŒ¯ (200ms) | 1æ¬¡ | ä¸¥é‡é—®é¢˜ | ä¸¥é‡è¶…å‡ºé˜ˆå€¼ |
| è¿ç»­æŒ¯ | æŒç»­ | åœæ­¢åŠ¨ä½œ | å±é™©åŠ¨ä½œ |

**åº”ç”¨åœºæ™¯**

| åœºæ™¯ | è§¦å‘æ¡ä»¶ | æŒ¯åŠ¨æ¨¡å¼ |
|-----|---------|---------|
| ä¸Šæ†è¿‡å¿« | ä¸Šæ†æ—¶é—´ < 500ms | çŸ­æŒ¯ 2æ¬¡ |
| ä¸Šæ†é¡¶ç‚¹ä¸å¤Ÿ | X-Factor < 20Â° | çŸ­æŒ¯ 1æ¬¡ |
| ä¸‹æ†è¿‡æ—©é‡Šæ”¾ | æ‰‹è…•è§’åº¦è¿‡æ—©å˜åŒ– | çŸ­æŒ¯ 2æ¬¡ |
| ç–²åŠ³é¢„è­¦ | EMG æ¿€æ´»å¼ºåº¦ä¸‹é™ 30% | é•¿æŒ¯ 1æ¬¡ |

### 5.3 åˆ†ææ¨¡å¼ Ã— åé¦ˆé€šé“

| åˆ†ææ¨¡å¼ | è¯­éŸ³åé¦ˆ | è§†è§‰åé¦ˆ | è§¦è§‰åé¦ˆ |
|---------|---------|---------|---------|
| **Step 1: ç«™å§¿æ£€æŸ¥** | âœ… ä¸»è¦ | âœ… è¾…åŠ© | âŒ ä¸é€‚ç”¨ |
| **Step 2: æ…¢åŠ¨ä½œåˆ†æ** | âœ… ä¸»è¦ | âœ… è¾…åŠ© | âœ… å¯é€‰ |
| **Step 3: å…¨é€Ÿåˆ†æ** | âœ… è¾…åŠ© | âœ… ä¸»è¦ï¼ˆäº‹åå›æ”¾ï¼‰ | âŒ å¤ªå¿«æ— æ³•å¹²é¢„ |

---

## 6. å»¶è¿Ÿé¢„ç®—

**å»¶è¿Ÿé¢„ç®—(Latency Budget)**æ˜¯æŒ‡ï¼šä»ç”¨æˆ·åšåŠ¨ä½œåˆ°ç³»ç»Ÿç»™å‡ºåé¦ˆï¼Œæ•´ä¸ªè¿‡ç¨‹éœ€è¦å¤šé•¿æ—¶é—´ï¼Œæ¯ä¸ªç¯èŠ‚å„åˆ†é…å¤šå°‘æ—¶é—´ã€‚

å°±åƒåšé¡¹ç›®æœ‰æ—¶é—´é¢„ç®—ä¸€æ ·ï¼Œæ¯ä¸ªç¯èŠ‚åˆ†é…å›ºå®šæ—¶é—´ï¼Œä¸èƒ½è¶…æ”¯ã€‚

**ä¸¾ä¾‹**ï¼šç”¨æˆ·ç«™å¥½å‡†å¤‡æŒ¥æ†ï¼Œç³»ç»Ÿè¦è¯´"æ”¾æ¾è‚©è†€"ï¼š

```text
ç”¨æˆ·åšåŠ¨ä½œ â†’ æ‘„åƒå¤´æ‹åˆ° â†’ åˆ†æå§¿åŠ¿ â†’ åˆ¤æ–­é—®é¢˜ â†’ æ’­æ”¾è¯­éŸ³ â†’ ç”¨æˆ·å¬åˆ°
            â†“            â†“          â†“          â†“
           33ms        30ms        5ms      100ms

           æ€»å…± = 33 + 30 + 5 + 100 = çº¦ 170ms (0.17ç§’)
```

### 6.1 ç«¯åˆ°ç«¯å»¶è¿Ÿåˆ†è§£

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    END-TO-END LATENCY BREAKDOWN                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ä¼ æ„Ÿå™¨é‡‡é›†         ç‰¹å¾æå–          è§„åˆ™åˆ¤æ–­          åé¦ˆç”Ÿæˆ                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚                                                                             â”‚
â”‚  Vision: 33ms     MediaPipe: 30ms  è§„åˆ™å¼•æ“: <5ms   è¯­éŸ³TTS: 50-100ms         â”‚
â”‚  IMU: <10ms       ç‰¹å¾è®¡ç®—: <10ms                   è§†è§‰å åŠ : <20ms            â”‚
â”‚  EMG: <5ms        æ—¶é—´åŒæ­¥: <5ms                    è§¦è§‰æŒ¯åŠ¨: <10ms            â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                             â”‚
â”‚  å»¶è¿Ÿé¢„ç®—:    33 + 30 + 5 + 100 = ~170ms                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 å„åœºæ™¯å»¶è¿Ÿè¦æ±‚

| åœºæ™¯ | å»¶è¿Ÿè¦æ±‚ | æ•æ„Ÿç¯èŠ‚ | åŸå›  | ä¼˜åŒ–ç­–ç•¥ |
|-----|---------|---------|------|---------|
| Setup Check | <300ms | TTS ç”Ÿæˆ | ç”¨æˆ·é™æ­¢ç­‰å¾…ï¼Œè¯­éŸ³æ˜¯ä¸»è¦åé¦ˆæ–¹å¼ï¼ŒTTS å æ€»å»¶è¿Ÿ 60% | é¢„ç¼“å­˜å¸¸ç”¨è¯­éŸ³ |
| Slow Motion | <500ms | Vision å¸§ç‡ | éœ€è¦è¿½è¸ªè¿ç»­åŠ¨ä½œï¼Œ30fps æ¯å¸§ 33ms ä¼šç´¯ç§¯è¯¯å·® | æé«˜åˆ° 60fps |
| Full Speed | <500ms (æŒ¥æ†å) | åˆ†æå¤æ‚åº¦ | æŒ¥æ†åéœ€ç»¼åˆå¤šæŒ‡æ ‡åˆ¤æ–­ï¼Œè§„åˆ™è¶Šå¤šè€—æ—¶è¶Šé•¿ | è§„åˆ™å¼•æ“ä¼˜å…ˆ |

---

## 7. å®æ–½è·¯çº¿å›¾

> ğŸ“ **è¯¦ç»†è§„æ ¼**: å®Œæ•´çš„ MVP å¼€å‘é˜¶æ®µè§ [MVP å¼€å‘è®¡åˆ’](../architecture/mvp-plan.md)

| é˜¶æ®µ | å†…å®¹ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|------|------|--------|------|
| **MVP** | Step 3: å…¨é€Ÿåˆ†æ + æŒ¥æ†ååé¦ˆ | ğŸ”´ å¿…é¡» | MVP æ ¸å¿ƒåŠŸèƒ½ |
| **Post-MVP** | Step 1: ç«™å§¿æ£€æŸ¥ | ğŸŸ¡ é«˜ | éœ€è¦é™æ€å§¿æ€æ£€æµ‹ |
| **Post-MVP** | Step 2: æ…¢åŠ¨ä½œåˆ†æ | ğŸŸ¡ é«˜ | å®æ—¶å¤„ç†å¤æ‚åº¦é«˜ |
| **Post-MVP** | è§¦è§‰æŒ¯åŠ¨åé¦ˆ | ğŸŸ¡ ä¸­ | éœ€è¦ Apple Watch è”åŠ¨ |
| **Post-MVP** | LLM ä¸ªæ€§åŒ–åé¦ˆ | ğŸŸ¢ å¯é€‰ | æŒ‰ç”¨æˆ·ç‰¹å¾å®šåˆ¶ |

!!! info "ä¸ºä»€ä¹ˆ MVP åªåš Step 3?"
    1. **æ— å®æ—¶çº¦æŸ** â€” å¯ä»¥åå¤å›æ”¾åŒä¸€å½•åˆ¶ï¼Œé€å¸§è°ƒè¯•
    2. **å®Œæ•´æ•°æ®** â€” å½•åˆ¶å®Œæˆåæ•°æ®å®Œæ•´ï¼Œä¸ä¼šä¸¢å¸§
    3. **ä¼˜å…ˆéªŒè¯æ ¸å¿ƒä»·å€¼** â€” æ—¶é—´å¯¹é½æ˜¯å¦æ­£ç¡®æ¯”å®æ—¶æ€§æ›´é‡è¦

---

---

## 8. ä¸å…¶ä»–æ–‡æ¡£çš„å…³ç³»

```mermaid
graph TD
    A[three-step-assessment.md] --> B[system-design.md]
    A --> C[eight-swing-phases.md]
    A --> D[research/biomechanics-benchmarks.md]

    B --> E[è§„åˆ™å¼•æ“]
    C --> F[é˜¶æ®µæ£€æµ‹]
    D --> G[é˜ˆå€¼å‚è€ƒ]

    style A fill:#e1f5fe
```

| ç›¸å…³æ–‡æ¡£ | å†…å®¹ | æœ¬æ–‡æ¡£ä½¿ç”¨ |
|---------|------|-----------|
| [ç³»ç»Ÿæ¶æ„](../architecture/system-design.md) | MVP ç®¡é“æ¶æ„ | è§„åˆ™å¼•æ“é˜ˆå€¼ |
| [å…«ä¸ªæŒ¥æ†é˜¶æ®µ](eight-swing-phases.md) | é˜¶æ®µæ£€æµ‹ | é˜¶æ®µè§¦å‘ç‚¹ |
| [ç”Ÿç‰©åŠ›å­¦åŸºå‡†](../../prerequisites/foundations/biomechanics-benchmarks.md) | æŒ‡æ ‡é˜ˆå€¼ | é—®é¢˜åˆ¤æ–­æ ‡å‡† |
| [ä¼ æ„Ÿå™¨æ˜ å°„](../architecture/sensor-data-processing.md) | ä¼ æ„Ÿå™¨èƒ½åŠ› | æ£€æµ‹æ–¹æ³•é€‰æ‹© |

**æœ€åæ›´æ–°**: 2026-01-05
**ç»´æŠ¤è€…**: Movement Chain AI Team
