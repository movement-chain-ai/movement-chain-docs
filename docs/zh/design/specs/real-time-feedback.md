# å®æ—¶åé¦ˆè§„èŒƒ Real-Time Feedback Specification

> **æ–‡æ¡£ç›®çš„**: å®šä¹‰ä¸‰ç§åé¦ˆæ¨¡å¼çš„å»¶è¿Ÿè¦æ±‚ã€è§¦å‘æ¡ä»¶å’Œå®ç°ç­–ç•¥
>
> **æ ¸å¿ƒæ´å¯Ÿ**: "å®æ—¶"ä¸æ˜¯ä¸€ä¸ªæ¨¡å¼ï¼Œè€Œæ˜¯ä¸‰ç§ä¸åŒåœºæ™¯å„æœ‰ä¸åŒå»¶è¿Ÿè¦æ±‚
>
> **æœ€åæ›´æ–°**: 2025-12-17

---

## 1. ä¸‰ç§åé¦ˆæ¨¡å¼ Three Feedback Modes

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    THREE FEEDBACK MODES                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Mode 1: SETUP CHECK (ç«™å§¿æ£€æŸ¥)              å»¶è¿Ÿè¦æ±‚: <300ms               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ç”¨æˆ·é™æ­¢å‡†å¤‡ â†’ å®æ—¶æ£€æµ‹å§¿åŠ¿ â†’ è¯­éŸ³/è§†è§‰åé¦ˆ                                 â”‚
â”‚  "è‚©è†€æ”¾æ¾ä¸€ç‚¹" / "è„šå†å®½ä¸€ç‚¹"                                               â”‚
â”‚                                                                              â”‚
â”‚  â±ï¸ ç”¨æˆ·æœ‰ 2-5 ç§’ååº”æ—¶é—´ â†’ å®Œå…¨å¯è¡Œ                                        â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Mode 2: SLOW MOTION TRAINING (æ…¢åŠ¨ä½œè®­ç»ƒ)   å»¶è¿Ÿè¦æ±‚: <500ms               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ç”¨æˆ·æ…¢é€ŸæŒ¥æ† (1/4-1/2 é€Ÿåº¦) â†’ æ¯é˜¶æ®µæ£€æµ‹ â†’ é˜¶æ®µæ€§åé¦ˆ                       â”‚
â”‚  "å¥½ï¼Œç»§ç»­è½¬è‚©..." / "ç°åœ¨å¼€å§‹ä¸‹æ†..."                                       â”‚
â”‚                                                                              â”‚
â”‚  â±ï¸ æ…¢åŠ¨ä½œæŒ¥æ† 3-5 ç§’ â†’ æœ‰æ—¶é—´åœ¨æ¯é˜¶æ®µç»™åé¦ˆ                                â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Mode 3: FULL SPEED ANALYSIS (å…¨é€Ÿåˆ†æ)      å»¶è¿Ÿè¦æ±‚: <500ms (æŒ¥æ†å)      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  æ­£å¸¸é€Ÿåº¦æŒ¥æ† â†’ æŒ¥æ†åå³æ—¶åˆ†æ â†’ ç»¼åˆåé¦ˆ                                    â”‚
â”‚  "è¿™ä¸€æ†èŠ‚å¥ä¸é”™ï¼Œä½†æ ¸å¿ƒå‘åŠ›å¯ä»¥æ›´æ—©"                                         â”‚
â”‚                                                                              â”‚
â”‚  â±ï¸ æŒ¥æ†åªæœ‰ 1.2 ç§’ â†’ åªèƒ½äº‹ååé¦ˆ                                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

åœ¨è®¾è®¡åé¦ˆç³»ç»Ÿä¹‹å‰ï¼Œéœ€è¦ç†è§£ä¸€ä¸ªå…³é”®çš„è¿åŠ¨åˆ†ç±»ç»´åº¦ï¼š**åŠ¨ä½œè¿‡ç¨‹ä¸­èƒ½å¦è¢«å¹²é¢„**ã€‚

### 1.1 æ§åˆ¶æ€§è¿åŠ¨ vs éæ§åˆ¶æ€§è¿åŠ¨

#### 1.1.1 å®šä¹‰

| ç±»å‹ | å®šä¹‰ | æ ¸å¿ƒç‰¹å¾ |
|------|------|----------|
| **æ§åˆ¶æ€§è¿åŠ¨** | åŠ¨ä½œè¿‡ç¨‹ä¸­å¯éšæ—¶è°ƒæ•´æˆ–åœæ­¢ | æ…¢ã€ç¨³ã€ç¥ç»æ§åˆ¶ä¸»å¯¼ |
| **éæ§åˆ¶æ€§è¿åŠ¨** | åŠ¨ä½œå¯åŠ¨åæƒ¯æ€§ä¸»å¯¼ï¼Œéš¾ä»¥ä¸­é€”å¹²é¢„ | å¿«ã€çŒ›ã€å¼¹æ€§/åå°„ä¸»å¯¼ |

#### 1.1.2 å…¸å‹ä¾‹å­

| æ§åˆ¶æ€§è¿åŠ¨ | éæ§åˆ¶æ€§è¿åŠ¨ |
|-----------|-------------|
| æ…¢é€Ÿæ·±è¹²ä¸‹è¹² | è·³è·ƒèµ·è·³ |
| å•è…¿ç«™ç«‹å¹³è¡¡ | å†²åˆºè·‘ |
| ç‘œä¼½/æ™®æ‹‰æ | æŠ•æ· |
| åº·å¤è®­ç»ƒ | é«˜å°”å¤«å…¨æŒ¥æ† |
| æ…¢åŠ¨ä½œè®­ç»ƒ | ç½‘çƒå‘çƒ |

#### 1.1.3 åé¦ˆå¹²é¢„æ–¹å¼

| ç»´åº¦ | æ§åˆ¶æ€§è¿åŠ¨ | éæ§åˆ¶æ€§è¿åŠ¨ |
|------|-----------|-------------|
| **åé¦ˆæ—¶æœº** | âœ… å¯å®æ—¶æç¤ºï¼ˆè¾¹åšè¾¹çº æ­£ï¼‰ | âŒ åªèƒ½äº‹åå›æ”¾åˆ†æ |
| **é‡‡æ ·ç‡è¦æ±‚** | ä¸­ç­‰ (100-200 Hz) | é«˜ (500+ Hz) |
| **è¿åŠ¨é“¾åˆ†æé‡ç‚¹** | è‚Œè‚‰æ¿€æ´»é¡ºåºã€ç¨³å®šæ€§ | åŠ›ä¼ å¯¼æ•ˆç‡ã€å³°å€¼æ—¶åº |
| **ç”¨æˆ·å¹²é¢„æ–¹å¼** | è¯­éŸ³/éœ‡åŠ¨å®æ—¶æé†’ | è§†é¢‘å åŠ ã€æ•°æ®å¯¹æ¯” |

#### 1.1.4 è®­ç»ƒé€»è¾‘

```text
é«˜æ°´å¹³è¡¨ç° = å…ˆæŒæ¡æ§åˆ¶ â†’ å†é‡Šæ”¾çˆ†å‘

è®­ç»ƒé¡ºåºï¼š
1. æ§åˆ¶æ€§ç»ƒä¹  â†’ å»ºç«‹æ­£ç¡®è¿åŠ¨é“¾æ¨¡å¼
2. é€æ­¥åŠ é€Ÿ â†’ æµ‹è¯•æ¨¡å¼æ˜¯å¦ä¿æŒ
3. éæ§åˆ¶æ€§çˆ†å‘ â†’ æ£€éªŒæœ€ç»ˆè¡¨ç°
```

### 1.2 é«˜å°”å¤«åˆ†æï¼šå…¨é€Ÿ vs æ…¢åŠ¨ä½œè®­ç»ƒçš„ç»“åˆ

#### ä¸¤ç§åœºæ™¯å¯¹æ¯”

| åœºæ™¯ | è¿åŠ¨ç±»å‹ | åˆ†æèƒ½åšä»€ä¹ˆ | å±€é™æ€§ |
|------|---------|-------------|--------|
| **å…¨é€ŸæŒ¥æ†** | éæ§åˆ¶æ€§ | äº‹åè¯Šæ–­é—®é¢˜ï¼ˆå“ªé‡Œé”™äº†ï¼‰ | ç”¨æˆ·æ— æ³•"è¾¹åšè¾¹æ”¹" |
| **æ…¢åŠ¨ä½œè®­ç»ƒ** | æ§åˆ¶æ€§ | å®æ—¶çº æ­£ + å»ºç«‹æ­£ç¡®æ¨¡å¼ | ä¸èƒ½ç›´æ¥è¿ç§»åˆ°æ¯”èµ›è¡¨ç° |

#### å…¨é€Ÿåˆ†æçš„"è¯Šæ–­-ä¿®å¤"å›°å¢ƒ

```text
å…¨é€ŸæŒ¥æ†åˆ†æ â†’ å‘ç°é—®é¢˜ â†’ å‘Šè¯‰ç”¨æˆ·"æ ¸å¿ƒå‘åŠ›å¤ªæ™š"
                              â†“
                    ç”¨æˆ·ä¸‹ä¸€æ†è¿˜æ˜¯ä¸€æ ·ï¼ˆå› ä¸ºå¤ªå¿«æ¥ä¸åŠè°ƒæ•´ï¼‰
                              â†“
                    åå¤çœ‹åˆ°åŒæ ·çš„é”™è¯¯ â†’ ç”¨æˆ·æŒ«è´¥
```

#### æ…¢åŠ¨ä½œè®­ç»ƒè§£å†³è¿™ä¸ªé—®é¢˜

```text
æ…¢åŠ¨ä½œè®­ç»ƒ â†’ åœ¨"ä¸‹æ†å¯åŠ¨"é˜¶æ®µå®æ—¶æç¤º"ä»æ ¸å¿ƒå‘åŠ›"
                              â†“
              ç”¨æˆ·å¯ä»¥åœ¨é‚£ä¸ªç¬é—´ä½“ä¼šæ­£ç¡®æ„Ÿè§‰
                              â†“
              é‡å¤ 50 æ¬¡ â†’ å»ºç«‹è‚Œè‚‰è®°å¿†
                              â†“
              å…¨é€ŸæŒ¥æ†æ—¶è‡ªåŠ¨æ‰§è¡Œæ­£ç¡®æ¨¡å¼
```

#### äº§å“ç­–ç•¥ï¼šæŒ‰ç”¨æˆ·é˜¶æ®µæ¨èæ¨¡å¼æ¯”ä¾‹

| ç”¨æˆ·é˜¶æ®µ | æ¨èæ¨¡å¼ | åŸå›  |
|---------|---------|------|
| **åˆå­¦è€…** | 80% æ…¢åŠ¨ä½œè®­ç»ƒ + 20% å…¨é€Ÿ | å…ˆå»ºç«‹æ­£ç¡®æ¨¡å¼ |
| **ä¸­çº§** | 50% æ…¢åŠ¨ä½œè®­ç»ƒ + 50% å…¨é€Ÿ | å·©å›º + æ£€éªŒè¿ç§» |
| **é«˜çº§** | 20% æ…¢åŠ¨ä½œè®­ç»ƒ + 80% å…¨é€Ÿ | å¾®è°ƒ + è¡¨ç°ä¼˜åŒ– |

#### ç»“è®ºï¼šä¸¤è€…å¿…é¡»ç»“åˆ

| æ–¹æ¡ˆ | æ•ˆæœ |
|------|------|
| âŒ åªåšå…¨é€Ÿåˆ†æ | èƒ½è¯Šæ–­é—®é¢˜ï¼Œä½†ç”¨æˆ·éš¾ä»¥æ”¹æ­£ |
| âŒ åªåšæ…¢åŠ¨ä½œè®­ç»ƒ | èƒ½å»ºç«‹æ¨¡å¼ï¼Œä½†ä¸çŸ¥é“å…¨é€Ÿæ—¶æ˜¯å¦ä¿æŒ |
| âœ… **ä¸¤è€…ç»“åˆ** | æ…¢åŠ¨ä½œè®­ç»ƒå»ºç«‹æ¨¡å¼ â†’ å…¨é€Ÿåˆ†æéªŒè¯è¿ç§» |

!!! tip "æ ¸å¿ƒæ´å¯Ÿ"
    Mode 2ï¼ˆæ…¢åŠ¨ä½œè®­ç»ƒï¼‰ä¸æ˜¯"é™çº§ç‰ˆ"çš„åˆ†æï¼Œè€Œæ˜¯**çœŸæ­£æ”¹å˜ç”¨æˆ·åŠ¨ä½œçš„å…³é”®ç¯èŠ‚**ã€‚

    å…¨é€Ÿåˆ†æå‘Šè¯‰ä½ "å“ªé‡Œé”™äº†"ï¼Œæ…¢åŠ¨ä½œè®­ç»ƒæ•™ä½ "æ€ä¹ˆåšå¯¹"ã€‚

### 1.3 æ…¢åŠ¨ä½œè®­ç»ƒ = æ¨¡æ‹Ÿæ•™ç»ƒæ•™å­¦

æ…¢åŠ¨ä½œè®­ç»ƒï¼ˆMode 2ï¼‰çš„å®æ—¶åé¦ˆæœ¬è´¨ä¸Šæ˜¯**æ¨¡æ‹ŸçœŸäººæ•™ç»ƒçš„ç°åœºæ•™å­¦**ã€‚

#### çœŸäººæ•™ç»ƒ vs Movement Chain

| æ•™ç»ƒè¡Œä¸º | Movement Chain å®ç° | å¯¹åº”æ¨¡å¼ |
|---------|-------------------|---------|
| "ç«™å¥½ï¼Œè‚©è†€æ”¾æ¾" | Setup Check è¯­éŸ³æç¤º | Mode 1 |
| "æ…¢æ…¢æ¥ï¼Œæˆ‘çœ‹ç€ä½ åš" | æ…¢æŒ¥å¼•å¯¼ + é˜¶æ®µæç¤º | Mode 2 |
| "åœï¼è¿™é‡Œæ ¸å¿ƒè¦å…ˆå‘åŠ›" | æ£€æµ‹åˆ°é”™è¯¯ â†’ å®æ—¶è¯­éŸ³çº æ­£ | Mode 2 |
| "å¯¹ï¼Œå°±æ˜¯è¿™ä¸ªæ„Ÿè§‰ï¼Œå†æ¥ä¸€æ¬¡" | æ­£ç¡®æ¨¡å¼ç¡®è®¤ + é¼“åŠ± | Mode 2 |
| "å¥½ï¼Œæ­£å¸¸é€Ÿåº¦æ‰“ä¸€ä¸ªçœ‹çœ‹" | åˆ‡æ¢åˆ°å…¨é€Ÿåˆ†æ | Mode 3 |
| "åˆšæ‰é‚£æ†èŠ‚å¥å¿«äº†" | æŒ¥æ†åå³æ—¶åé¦ˆ | Mode 3 |

#### æ•™ç»ƒæ•™å­¦çš„æ ¸å¿ƒå¾ªç¯

```text
1. ç¤ºèŒƒ â†’ "çœ‹æˆ‘æ€ä¹ˆåš"
2. åˆ†è§£ â†’ "æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥"
3. å¼•å¯¼ â†’ "æ…¢æ…¢åšï¼Œæˆ‘åœ¨æ—è¾¹çœ‹"      â† Mode 2 è¦†ç›–
4. çº æ­£ â†’ "åœï¼Œè¿™é‡Œä¸å¯¹ï¼Œåº”è¯¥..."    â† Mode 2 è¦†ç›–
5. ç¡®è®¤ â†’ "å¯¹äº†ï¼Œè®°ä½è¿™ä¸ªæ„Ÿè§‰"       â† Mode 2 è¦†ç›–
6. åŠ é€Ÿ â†’ "å¥½ï¼Œå¿«ä¸€ç‚¹è¯•è¯•"          â† Mode 2 è¦†ç›–
7. æ£€éªŒ â†’ "æ­£å¸¸é€Ÿåº¦æ‰“ä¸€ä¸ª"          â† Mode 3
8. åé¦ˆ â†’ "ä¸é”™/è¿˜éœ€è¦è°ƒæ•´..."       â† Mode 3
```

Mode 2 è¦†ç›–äº†æ•™ç»ƒæ•™å­¦ä¸­**æœ€æ ¸å¿ƒçš„æ­¥éª¤ 2-6**ã€‚

#### åˆ†æå·¥å…· vs AI æ•™ç»ƒ

| ç»´åº¦ | åªæœ‰å…¨é€Ÿåˆ†æï¼ˆåˆ†æå·¥å…·ï¼‰ | æœ‰æ…¢åŠ¨ä½œè®­ç»ƒï¼ˆAI æ•™ç»ƒï¼‰ |
|------|----------------------|---------------------|
| **è§’è‰²** | åƒ"è€ƒå®˜"ï¼šåªå‘Šè¯‰ä½ å¯¹é”™ | åƒ"æ•™ç»ƒ"ï¼šæ•™ä½ æ€ä¹ˆåšå¯¹ |
| **ç”¨æˆ·ä½“éªŒ** | çŸ¥é“é—®é¢˜ä½†æ”¹ä¸äº† | åœ¨è¿‡ç¨‹ä¸­ä½“ä¼šæ­£ç¡®æ„Ÿè§‰ |
| **å­¦ä¹ æ•ˆæœ** | è¢«åŠ¨æ¥å—è¯„åˆ¤ | ä¸»åŠ¨å­¦ä¹ å»ºç«‹æ¨¡å¼ |
| **æƒ…æ„Ÿ** | å®¹æ˜“æŒ«è´¥ | æœ‰æˆå°±æ„Ÿ |

!!! warning "äº§å“å®šä½"
    **Movement Chain ä¸åªæ˜¯"åˆ†æå·¥å…·"ï¼Œè€Œæ˜¯"AI æ•™ç»ƒ"**

    - åˆ†æå·¥å…· = å‘Šè¯‰ä½ å“ªé‡Œé”™äº†
    - AI æ•™ç»ƒ = æ•™ä½ æ€ä¹ˆåšå¯¹

    Mode 2ï¼ˆæ…¢åŠ¨ä½œè®­ç»ƒï¼‰æ˜¯æŠŠäº§å“ä»"åˆ†æå·¥å…·"å‡çº§ä¸º"AI æ•™ç»ƒ"çš„å…³é”®åŠŸèƒ½ã€‚

---

## 2. å»¶è¿Ÿé¢„ç®— Latency Budget

**å»¶è¿Ÿé¢„ç®—**æ˜¯æŒ‡ï¼šä»ç”¨æˆ·åšåŠ¨ä½œåˆ°ç³»ç»Ÿç»™å‡ºåé¦ˆï¼Œæ•´ä¸ªè¿‡ç¨‹éœ€è¦å¤šé•¿æ—¶é—´ï¼Œæ¯ä¸ªç¯èŠ‚å„åˆ†é…å¤šå°‘æ—¶é—´ã€‚

å°±åƒåšé¡¹ç›®æœ‰æ—¶é—´é¢„ç®—ä¸€æ ·ï¼Œæ¯ä¸ªç¯èŠ‚åˆ†é…å›ºå®šæ—¶é—´ï¼Œä¸èƒ½è¶…æ”¯ã€‚

**ä¸¾ä¾‹**ï¼šç”¨æˆ·ç«™å¥½å‡†å¤‡æŒ¥æ†ï¼Œç³»ç»Ÿè¦è¯´"æ”¾æ¾è‚©è†€"ï¼š

```text
ç”¨æˆ·åšåŠ¨ä½œ â†’ æ‘„åƒå¤´æ‹åˆ° â†’ åˆ†æå§¿åŠ¿ â†’ åˆ¤æ–­é—®é¢˜ â†’ æ’­æ”¾è¯­éŸ³ â†’ ç”¨æˆ·å¬åˆ°
            â†“            â†“          â†“          â†“
           33ms        30ms        5ms      100ms

           æ€»å…± = 33 + 30 + 5 + 100 = çº¦ 170ms (0.17ç§’)
```

### 2.1 ç«¯åˆ°ç«¯å»¶è¿Ÿåˆ†è§£

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    END-TO-END LATENCY BREAKDOWN                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  ä¼ æ„Ÿå™¨é‡‡é›†        ç‰¹å¾æå–         è§„åˆ™åˆ¤æ–­         åé¦ˆç”Ÿæˆ                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚                                                                              â”‚
â”‚  Vision: 33ms     MediaPipe: 30ms  è§„åˆ™å¼•æ“: <5ms   è¯­éŸ³TTS: 50-100ms       â”‚
â”‚  IMU: <10ms       ç‰¹å¾è®¡ç®—: <10ms                   è§†è§‰å åŠ : <20ms         â”‚
â”‚  EMG: <5ms        æ—¶é—´åŒæ­¥: <5ms                    è§¦è§‰æŒ¯åŠ¨: <10ms         â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                              â”‚
â”‚  Mode 1 (Setup):    33 + 30 + 5 + 100 = ~170ms    âœ… < 300ms               â”‚
â”‚  Mode 2 (Slow):     33 + 30 + 5 + 100 = ~170ms    âœ… < 500ms               â”‚
â”‚  Mode 3 (Full):     33 + 30 + 5 + 100 = ~170ms    âœ… < 500ms               â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å„æ¨¡å¼å»¶è¿Ÿè¦æ±‚

| æ¨¡å¼ | å»¶è¿Ÿè¦æ±‚ | å…³é”®ç“¶é¢ˆ | ä¼˜åŒ–ç­–ç•¥ |
|-----|---------|---------|---------|
| Setup Check | <300ms | TTS ç”Ÿæˆ | é¢„ç¼“å­˜å¸¸ç”¨è¯­éŸ³ |
| Slow Motion | <500ms | Vision å¸§ç‡ | æé«˜åˆ° 60fps |
| Full Speed | <500ms (æŒ¥æ†å) | åˆ†æå¤æ‚åº¦ | è§„åˆ™å¼•æ“ä¼˜å…ˆ |

---

## 3. Mode 1: Setup Check (ç«™å§¿æ£€æŸ¥)

### 3.1 è®¾è®¡åŸåˆ™

ç”¨æˆ·åœ¨æŒ¥æ†å‰æœ‰ 2-5 ç§’çš„å‡†å¤‡æ—¶é—´ï¼Œè¿™æ˜¯**æœ€ä½³åé¦ˆçª—å£**ï¼š

- ç”¨æˆ·é™æ­¢ï¼Œå§¿æ€ç¨³å®š
- æœ‰æ—¶é—´å¬å–å¹¶è°ƒæ•´
- æ¯æ¬¡æŒ¥æ†å‰éƒ½å¯ä»¥æ£€æŸ¥
- è¿™æ˜¯æ•™ç»ƒæœ€å¸¸åšçš„äº‹æƒ…

### 3.2 æ£€æµ‹é¡¹ç›®

| æ£€æµ‹é¡¹ | ä¼ æ„Ÿå™¨ | é˜ˆå€¼ | åé¦ˆè¯­éŸ³ |
|-------|--------|-----|---------|
| å¤´éƒ¨ä½ç½®è¿‡é«˜ | Vision | `nose.y < shoulder.y * 0.7` | "ä¸‹å·´æ”¶ä¸€ç‚¹" |
| è‚©è†€è€¸èµ· | Vision | `(shoulder.y - ear.y) < threshold` | "æ”¾æ¾è‚©è†€" |
| ç«™è·è¿‡çª„ | Vision | `ankle_dist / shoulder_width < 0.9` | "è„šå†å®½ä¸€ç‚¹" |
| ç«™è·è¿‡å®½ | Vision | `ankle_dist / shoulder_width > 1.3` | "è„šæ”¶çª„ä¸€ç‚¹" |
| è„ŠæŸ±å¤ªç›´ | Vision | `spine_angle < 25Â°` | "ä¸Šèº«å‰å€¾ä¸€äº›" |
| è„ŠæŸ±è¿‡å¼¯ | Vision | `spine_angle > 45Â°` | "èƒŒæŒºç›´ä¸€ç‚¹" |
| è†ç›–é”æ­» | Vision | `knee_angle > 175Â°` | "è†ç›–å¼¯ä¸€ä¸‹" |
| é‡å¿ƒåç§» | Vision | `hip_center.x` åç¦»ä¸­å¿ƒ | "é‡å¿ƒæ”¾ä¸­é—´" |

### 3.3 å®ç°ä»£ç 

```python
class SetupChecker:
    """
    ç«™å§¿å®æ—¶æ£€æŸ¥å™¨

    åœ¨ç”¨æˆ·å‡†å¤‡æŒ¥æ†æ—¶æŒç»­è¿è¡Œï¼Œæ£€æµ‹å¹¶åé¦ˆå§¿æ€é—®é¢˜
    """

    def __init__(self, feedback_cooldown_ms=2000):
        self.feedback_cooldown = feedback_cooldown_ms
        self.last_feedback_time = {}

    def check_setup(self, landmarks, current_time):
        """
        æ£€æŸ¥ç«™å§¿å¹¶è¿”å›éœ€è¦åé¦ˆçš„é—®é¢˜

        Args:
            landmarks: MediaPipe 33 å…³é”®ç‚¹
            current_time: å½“å‰æ—¶é—´æˆ³ (ms)

        Returns:
            issues: list of (issue_name, feedback_text, priority)
        """
        issues = []

        # 1. æ£€æŸ¥å¤´éƒ¨ä½ç½®
        if self._head_too_high(landmarks):
            issues.append(('head_high', 'ä¸‹å·´æ”¶ä¸€ç‚¹', 2))

        # 2. æ£€æŸ¥è‚©è†€
        if self._shoulders_raised(landmarks):
            issues.append(('shoulders', 'æ”¾æ¾è‚©è†€', 2))

        # 3. æ£€æŸ¥ç«™è·
        stance_ratio = self._get_stance_ratio(landmarks)
        if stance_ratio < 0.9:
            issues.append(('stance_narrow', 'è„šå†å®½ä¸€ç‚¹', 1))
        elif stance_ratio > 1.3:
            issues.append(('stance_wide', 'è„šæ”¶çª„ä¸€ç‚¹', 1))

        # 4. æ£€æŸ¥è„ŠæŸ±è§’åº¦
        spine_angle = self._get_spine_angle(landmarks)
        if spine_angle < 25:
            issues.append(('spine_straight', 'ä¸Šèº«å‰å€¾ä¸€äº›', 1))
        elif spine_angle > 45:
            issues.append(('spine_bent', 'èƒŒæŒºç›´ä¸€ç‚¹', 1))

        # 5. æ£€æŸ¥è†ç›–
        if self._knees_locked(landmarks):
            issues.append(('knees', 'è†ç›–å¼¯ä¸€ä¸‹', 2))

        # è¿‡æ»¤å†·å´ä¸­çš„åé¦ˆ
        filtered_issues = []
        for issue_name, text, priority in issues:
            last_time = self.last_feedback_time.get(issue_name, 0)
            if current_time - last_time > self.feedback_cooldown:
                filtered_issues.append((issue_name, text, priority))
                self.last_feedback_time[issue_name] = current_time

        # æŒ‰ä¼˜å…ˆçº§æ’åºï¼Œåªè¿”å›æœ€é‡è¦çš„ 1-2 ä¸ª
        filtered_issues.sort(key=lambda x: x[2])
        return filtered_issues[:2]

    def _get_stance_ratio(self, landmarks):
        """è®¡ç®—ç«™è·æ¯”ä¾‹"""
        LEFT_ANKLE, RIGHT_ANKLE = 27, 28
        LEFT_SHOULDER, RIGHT_SHOULDER = 11, 12

        ankle_dist = np.linalg.norm(
            np.array([landmarks[LEFT_ANKLE].x, landmarks[LEFT_ANKLE].y]) -
            np.array([landmarks[RIGHT_ANKLE].x, landmarks[RIGHT_ANKLE].y])
        )
        shoulder_dist = np.linalg.norm(
            np.array([landmarks[LEFT_SHOULDER].x, landmarks[LEFT_SHOULDER].y]) -
            np.array([landmarks[RIGHT_SHOULDER].x, landmarks[RIGHT_SHOULDER].y])
        )

        return ankle_dist / shoulder_dist if shoulder_dist > 0 else 1.0

    def _get_spine_angle(self, landmarks):
        """è®¡ç®—è„ŠæŸ±å‰å€¾è§’åº¦"""
        # ç®€åŒ–: ä½¿ç”¨è‚©è†€ä¸­ç‚¹åˆ°é«‹éƒ¨ä¸­ç‚¹çš„è§’åº¦
        LEFT_SHOULDER, RIGHT_SHOULDER = 11, 12
        LEFT_HIP, RIGHT_HIP = 23, 24

        shoulder_center = np.array([
            (landmarks[LEFT_SHOULDER].x + landmarks[RIGHT_SHOULDER].x) / 2,
            (landmarks[LEFT_SHOULDER].y + landmarks[RIGHT_SHOULDER].y) / 2
        ])
        hip_center = np.array([
            (landmarks[LEFT_HIP].x + landmarks[RIGHT_HIP].x) / 2,
            (landmarks[LEFT_HIP].y + landmarks[RIGHT_HIP].y) / 2
        ])

        # è®¡ç®—ä¸å‚ç›´çº¿çš„å¤¹è§’
        vertical = np.array([0, -1])
        spine_vec = shoulder_center - hip_center
        spine_vec_norm = spine_vec / np.linalg.norm(spine_vec)

        angle = np.arccos(np.dot(spine_vec_norm, vertical))
        return np.degrees(angle)

    def _head_too_high(self, landmarks):
        """æ£€æŸ¥å¤´éƒ¨æ˜¯å¦è¿‡é«˜"""
        NOSE = 0
        LEFT_SHOULDER, RIGHT_SHOULDER = 11, 12

        nose_y = landmarks[NOSE].y
        shoulder_y = (landmarks[LEFT_SHOULDER].y + landmarks[RIGHT_SHOULDER].y) / 2

        # åœ¨å½’ä¸€åŒ–åæ ‡ä¸­ï¼Œy è¶Šå°è¡¨ç¤ºè¶Šé«˜
        return nose_y < shoulder_y * 0.7

    def _shoulders_raised(self, landmarks):
        """æ£€æŸ¥è‚©è†€æ˜¯å¦è€¸èµ·"""
        LEFT_EAR, RIGHT_EAR = 7, 8
        LEFT_SHOULDER, RIGHT_SHOULDER = 11, 12

        ear_y = (landmarks[LEFT_EAR].y + landmarks[RIGHT_EAR].y) / 2
        shoulder_y = (landmarks[LEFT_SHOULDER].y + landmarks[RIGHT_SHOULDER].y) / 2

        # è‚©è†€å’Œè€³æœµè·ç¦»å¤ªè¿‘è¡¨ç¤ºè€¸è‚©
        return (shoulder_y - ear_y) < 0.08  # å½’ä¸€åŒ–åæ ‡

    def _knees_locked(self, landmarks):
        """æ£€æŸ¥è†ç›–æ˜¯å¦é”æ­»"""
        # ç®€åŒ–: æ£€æŸ¥è†ç›–æ˜¯å¦å‡ ä¹å®Œå…¨ä¼¸ç›´
        LEFT_HIP, LEFT_KNEE, LEFT_ANKLE = 23, 25, 27

        hip = np.array([landmarks[LEFT_HIP].x, landmarks[LEFT_HIP].y])
        knee = np.array([landmarks[LEFT_KNEE].x, landmarks[LEFT_KNEE].y])
        ankle = np.array([landmarks[LEFT_ANKLE].x, landmarks[LEFT_ANKLE].y])

        # è®¡ç®—è†ç›–è§’åº¦
        vec1 = hip - knee
        vec2 = ankle - knee
        cos_angle = np.dot(vec1, vec2) / (np.linalg.norm(vec1) * np.linalg.norm(vec2))
        angle = np.degrees(np.arccos(np.clip(cos_angle, -1, 1)))

        return angle > 175
```

---

## 4. Mode 2: Slow Motion Training (æ…¢åŠ¨ä½œè®­ç»ƒ)

### 4.1 è®¾è®¡åŸåˆ™

è¿™æ˜¯**ä½ çš„ç‹¬ç‰¹åˆ›æ–°**ï¼šè®©ç”¨æˆ·ä»¥ 1/4 æˆ– 1/2 é€Ÿåº¦ç»ƒä¹ ï¼Œç³»ç»Ÿå¯ä»¥åœ¨æ¯ä¸ªé˜¶æ®µç»™å‡ºå®æ—¶åé¦ˆã€‚

```text
æ­£å¸¸æŒ¥æ†:  1.2 ç§’ (å¤ªå¿«ï¼Œæ— æ³•å®æ—¶åé¦ˆ)
1/2 é€Ÿåº¦:  2.4 ç§’ (æ¯é˜¶æ®µçº¦ 300msï¼Œå¯ä»¥åé¦ˆ)
1/4 é€Ÿåº¦:  4.8 ç§’ (æ¯é˜¶æ®µçº¦ 600msï¼Œå……è¶³åé¦ˆæ—¶é—´)
```

### 4.2 é˜¶æ®µæ€§åé¦ˆè®¾è®¡

| é˜¶æ®µ | æ£€æµ‹ç‚¹ | åé¦ˆå†…å®¹ | è§¦å‘æ¡ä»¶ |
|-----|-------|---------|---------|
| Address â†’ Toe-Up | èµ·æ†å¼€å§‹ | "å¥½ï¼Œæ…¢æ…¢èµ·æ†" | æ£€æµ‹åˆ°è¿åŠ¨å¼€å§‹ |
| Toe-Up â†’ Mid-Backswing | æ‰‹è…•å¹³è¡Œ | "ç»§ç»­è½¬è‚©" | æ‰‹è…•è¾¾åˆ°è…°éƒ¨é«˜åº¦ |
| Mid-Backswing â†’ Top | åˆ°é¡¶ç‚¹ | "è½¬åˆ°ä½äº†" | è§’é€Ÿåº¦æ¥è¿‘é›¶ |
| Top â†’ Mid-Downswing | ä¸‹æ†å¯åŠ¨ | "ä»æ ¸å¿ƒå¯åŠ¨" | æ£€æµ‹åˆ°æ–¹å‘åè½¬ |
| Mid-Downswing â†’ Impact | å‡»çƒå‰ | "ä¿æŒæ‰‹è…•" | æ£€æµ‹åˆ°åŠ é€Ÿ |
| Impact â†’ Finish | å‡»çƒå | "ä¿æŒå¹³è¡¡" | æ£€æµ‹åˆ°å‡»çƒ |

### 4.3 å®ç°ä»£ç 

```python
class SlowMotionCoach:
    """
    æ…¢åŠ¨ä½œè®­ç»ƒæ•™ç»ƒ

    åœ¨ç”¨æˆ·æ…¢é€ŸæŒ¥æ†æ—¶ï¼Œæ¯ä¸ªé˜¶æ®µç»™å‡ºå¼•å¯¼åé¦ˆ
    """

    PHASE_PROMPTS = {
        'address_start': 'å‡†å¤‡å¥½äº†ï¼Œæ…¢æ…¢èµ·æ†',
        'toe_up': 'å¥½ï¼Œç»§ç»­',
        'mid_backswing': 'è½¬è‚©ï¼Œè½¬è‚©',
        'top': 'åˆ°é¡¶äº†ï¼Œå‡†å¤‡ä¸‹æ†',
        'transition': 'ä»æ ¸å¿ƒå¯åŠ¨',
        'mid_downswing': 'ä¿æŒæ‰‹è…•è§’åº¦',
        'impact': 'æ‰“åˆ°äº†ï¼',
        'finish': 'æ”¶æ†ï¼Œä¿æŒå¹³è¡¡',
    }

    def __init__(self, phase_detector, audio_player):
        self.phase_detector = phase_detector
        self.audio_player = audio_player
        self.current_phase = None
        self.phases_announced = set()

    def update(self, imu_data, vision_data, current_time):
        """
        æ¯å¸§æ›´æ–°ï¼Œæ£€æµ‹é˜¶æ®µå˜åŒ–å¹¶ç»™å‡ºåé¦ˆ
        """
        # æ£€æµ‹å½“å‰é˜¶æ®µ
        phases = self.phase_detector.detect_all_phases(imu_data, vision_data)

        new_phase = self._determine_current_phase(phases, current_time)

        if new_phase and new_phase != self.current_phase:
            if new_phase not in self.phases_announced:
                self._announce_phase(new_phase)
                self.phases_announced.add(new_phase)
            self.current_phase = new_phase

    def _announce_phase(self, phase):
        """æ’­æ”¾é˜¶æ®µæç¤ºéŸ³"""
        prompt = self.PHASE_PROMPTS.get(phase)
        if prompt:
            self.audio_player.play(prompt)

    def reset(self):
        """é‡ç½®çŠ¶æ€ï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡æŒ¥æ†"""
        self.current_phase = None
        self.phases_announced.clear()

    def _determine_current_phase(self, phases, current_time):
        """æ ¹æ®æ£€æµ‹åˆ°çš„é˜¶æ®µæ—¶é—´ç¡®å®šå½“å‰é˜¶æ®µ"""
        # ç®€åŒ–é€»è¾‘: æ ¹æ®æ—¶é—´é¡ºåºåˆ¤æ–­
        if phases.get('finish') and current_time > phases['finish']:
            return 'finish'
        if phases.get('impact') and current_time > phases['impact']:
            return 'impact'
        if phases.get('top') and current_time > phases['top']:
            if current_time < phases['top'] + 200:
                return 'transition'
            return 'mid_downswing'
        if phases.get('address', {}).get('end') and current_time > phases['address']['end']:
            return 'mid_backswing'

        return 'address_start'
```

### 4.4 æ…¢åŠ¨ä½œæ¨¡å¼çš„ä»·å€¼

| ä¼˜åŠ¿ | æè¿° |
|-----|------|
| **è‚Œè‚‰è®°å¿†** | æ…¢é€Ÿç»ƒä¹ å¸®åŠ©å»ºç«‹æ­£ç¡®çš„è¿åŠ¨æ¨¡å¼ |
| **å®æ—¶çº æ­£** | æ¯ä¸ªé˜¶æ®µéƒ½å¯ä»¥å¾—åˆ°åé¦ˆå¹¶è°ƒæ•´ |
| **æ— éœ€ç­‰å¾…** | ä¸ç”¨æ‰“å®Œå†çœ‹åˆ†æï¼Œè¾¹åšè¾¹å­¦ |
| **é€‚åˆåˆå­¦è€…** | é™ä½å­¦ä¹ æ›²çº¿ï¼Œå‡å°‘æŒ«è´¥æ„Ÿ |

---

## 5. Mode 3: Full Speed Analysis (å…¨é€Ÿåˆ†æ)

### 5.1 è®¾è®¡åŸåˆ™

æ­£å¸¸é€Ÿåº¦æŒ¥æ†æ—¶ï¼Œç³»ç»Ÿåªèƒ½åœ¨**æŒ¥æ†ç»“æŸå**æä¾›åé¦ˆã€‚ä½†åé¦ˆè¦è¶³å¤Ÿå¿« (<500ms)ï¼Œè®©ç”¨æˆ·åœ¨ä¸‹ä¸€æ¬¡æŒ¥æ†å‰èƒ½æ¶ˆåŒ–ã€‚

### 5.2 åé¦ˆä¼˜å…ˆçº§

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FEEDBACK PRIORITY (POST-SWING)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  P0 (ç«‹å³è¯´): ä¸¥é‡é—®é¢˜ï¼Œå½±å“æŒ¥æ†è´¨é‡                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ å‘åŠ›é¡ºåºé”™è¯¯ (EMG: æ‰‹è‡‚å…ˆäºæ ¸å¿ƒ) â†’ "ä»æ ¸å¿ƒå¯åŠ¨"                           â”‚
â”‚  â€¢ è¿åŠ¨é“¾æ–­è£‚ (EMG: æ ¸å¿ƒæ¿€æ´»ä¸è¶³) â†’ "æ”¶ç´§è…¹éƒ¨å‘åŠ›"                            â”‚
â”‚                                                                              â”‚
â”‚  P1 (å…¶æ¬¡): é‡è¦é—®é¢˜ï¼Œå½±å“è¡¨ç°                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ X-Factor ä¸è¶³ â†’ "è‚©è†€å†å¤šè½¬ä¸€ç‚¹"                                          â”‚
â”‚  â€¢ èŠ‚å¥è¿‡å¿« â†’ "ä¸Šæ†æ…¢ä¸€ç‚¹"                                                   â”‚
â”‚  â€¢ é€Ÿåº¦ä¸è¶³ â†’ "å†ç”¨åŠ›ä¸€äº›"                                                   â”‚
â”‚                                                                              â”‚
â”‚  P2 (æœ€å): ä¼˜åŒ–å»ºè®®ï¼Œé”¦ä¸Šæ·»èŠ±                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ æ”¶æ†å¹³è¡¡é—®é¢˜ â†’ "æ³¨æ„æ”¶æ†å¹³è¡¡"                                              â”‚
â”‚  â€¢ ç»†èŠ‚è°ƒæ•´ â†’ å¯ä»¥ä¸è¯´ï¼Œç•™å¾…è¯¦ç»†åˆ†æ                                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 å®ç°ä»£ç 

```python
class PostSwingFeedback:
    """
    æŒ¥æ†åå³æ—¶åé¦ˆç”Ÿæˆå™¨

    åœ¨æŒ¥æ†ç»“æŸå <500ms å†…ç”Ÿæˆå¹¶æ’­æ”¾åé¦ˆ
    """

    def __init__(self, audio_player):
        self.audio_player = audio_player

    def generate_feedback(self, swing_analysis):
        """
        ç”Ÿæˆä¼˜å…ˆçº§æ’åºçš„åé¦ˆ

        Args:
            swing_analysis: dict with vision, imu, emg features and scores

        Returns:
            feedback_list: list of (priority, text, audio_file)
        """
        feedbacks = []

        # P0: EMG ç‹¬ç‰¹æ´å¯Ÿ (æœ€é«˜ä¼˜å…ˆçº§)
        if swing_analysis.get('emg'):
            emg = swing_analysis['emg']

            if not emg.get('activation_sequence_correct', True):
                feedbacks.append((
                    0,
                    'å‘åŠ›é¡ºåºé”™äº†ï¼Œä»æ ¸å¿ƒå¯åŠ¨',
                    'core_first.mp3'
                ))

            if emg.get('core_activation', 100) < 50:
                feedbacks.append((
                    0,
                    'æ ¸å¿ƒå‘åŠ›ä¸å¤Ÿï¼Œæ”¶ç´§è…¹éƒ¨',
                    'engage_core.mp3'
                ))

        # P1: Vision + IMU åˆ†æ
        vision = swing_analysis.get('vision', {})
        imu = swing_analysis.get('imu', {})

        if vision.get('x_factor', 100) < 35:
            feedbacks.append((
                1,
                'è‚©è†€è½¬ä¸å¤Ÿï¼ŒXå› å­åªæœ‰{:.0f}åº¦'.format(vision['x_factor']),
                'more_rotation.mp3'
            ))

        if imu.get('tempo_ratio', 3) < 2.5:
            feedbacks.append((
                1,
                'èŠ‚å¥å¤ªå¿«ï¼Œä¸Šæ†æ…¢ä¸€ç‚¹',
                'slow_backswing.mp3'
            ))
        elif imu.get('tempo_ratio', 3) > 4.0:
            feedbacks.append((
                1,
                'èŠ‚å¥å¤ªæ…¢ï¼Œå¯ä»¥å†æµç•…ä¸€äº›',
                'smoother_tempo.mp3'
            ))

        if imu.get('peak_angular_velocity', 1000) < 800:
            feedbacks.append((
                1,
                'é€Ÿåº¦ä¸å¤Ÿï¼Œå†ç”¨åŠ›ä¸€äº›',
                'more_power.mp3'
            ))

        # P2: ä¼˜åŒ–å»ºè®®
        score = swing_analysis.get('score', 100)
        if score >= 80:
            feedbacks.append((
                2,
                'è¿™ä¸€æ†ä¸é”™ï¼Œ{:.0f}åˆ†'.format(score),
                'good_swing.mp3'
            ))

        # æ’åºå¹¶è¿”å›å‰ 2 ä¸ª
        feedbacks.sort(key=lambda x: x[0])
        return feedbacks[:2]

    def play_feedback(self, feedbacks):
        """æ’­æ”¾åé¦ˆ"""
        for priority, text, audio_file in feedbacks:
            self.audio_player.play(audio_file)
            # ç­‰å¾…æ’­æ”¾å®Œæˆå†è¯´ä¸‹ä¸€æ¡
            break  # åªè¯´æœ€é‡è¦çš„ä¸€æ¡
```

---

## 6. è¯­éŸ³åé¦ˆåº“ Audio Feedback Library

### 6.1 é¢„å½•åˆ¶è¯­éŸ³æ–‡ä»¶

| ç±»åˆ« | æ–‡ä»¶å | æ–‡æ¡ˆ | æ—¶é•¿ |
|-----|-------|------|------|
| **æ ¸å¿ƒé—®é¢˜ (P0)** | `core_first.mp3` | "ä»æ ¸å¿ƒå¯åŠ¨" | ~1s |
| | `engage_core.mp3` | "æ”¶ç´§è…¹éƒ¨å‘åŠ›" | ~1.2s |
| | `sequence_wrong.mp3` | "å‘åŠ›é¡ºåºé”™äº†" | ~1s |
| **æ—‹è½¬é—®é¢˜ (P1)** | `more_rotation.mp3` | "è‚©è†€å†å¤šè½¬ä¸€ç‚¹" | ~1.2s |
| | `hip_lead.mp3` | "é«‹éƒ¨å…ˆè½¬å¼€" | ~1s |
| **èŠ‚å¥é—®é¢˜ (P1)** | `slow_backswing.mp3` | "ä¸Šæ†æ…¢ä¸€ç‚¹" | ~1s |
| | `faster_downswing.mp3` | "ä¸‹æ†å†å¿«ä¸€ç‚¹" | ~1s |
| | `good_tempo.mp3` | "èŠ‚å¥ä¸é”™" | ~0.8s |
| **ç«™å§¿é—®é¢˜** | `relax_shoulders.mp3` | "æ”¾æ¾è‚©è†€" | ~0.8s |
| | `wider_stance.mp3` | "è„šå†å®½ä¸€ç‚¹" | ~1s |
| | `bend_knees.mp3` | "è†ç›–å¼¯ä¸€ä¸‹" | ~1s |
| **æ­£é¢åé¦ˆ** | `good_swing.mp3` | "è¿™ä¸€æ†ä¸é”™" | ~1s |
| | `great_power.mp3` | "åŠ›é‡å¾ˆå¥½" | ~0.8s |
| | `perfect.mp3` | "å®Œç¾ï¼" | ~0.6s |

### 6.2 TTS åŠ¨æ€ç”Ÿæˆ

å¯¹äºéœ€è¦åŒ…å«æ•°æ®çš„åé¦ˆï¼ˆå¦‚å…·ä½“åˆ†æ•°ã€è§’åº¦ï¼‰ï¼Œä½¿ç”¨ TTS åŠ¨æ€ç”Ÿæˆï¼š

```swift
import AVFoundation  // iOS åŸç”Ÿ TTS

class FeedbackSpeaker {
    private let synthesizer = AVSpeechSynthesizer()

    /// åŠ¨æ€ç”Ÿæˆè¯­éŸ³åé¦ˆ
    /// - Examples:
    ///   - generateFeedback("Xå› å­\(xFactor)åº¦ï¼Œä¸å¤Ÿ")
    ///   - generateFeedback("é€Ÿåº¦\(speed)ï¼Œå¾ˆä¸é”™")
    func generateFeedback(_ text: String, rate: Float = 0.5) {
        let utterance = AVSpeechUtterance(string: text)
        utterance.voice = AVSpeechSynthesisVoice(language: "zh-CN")
        utterance.rate = rate
        synthesizer.speak(utterance)
    }
}
```

---

## 7. è§¦è§‰åé¦ˆ (Phase 2)

### 7.1 è®¾è®¡åŸåˆ™

è§¦è§‰åé¦ˆ (<50ms å»¶è¿Ÿ) æ˜¯å”¯ä¸€èƒ½åœ¨æŒ¥æ†è¿‡ç¨‹ä¸­å®æ—¶å¹²é¢„çš„æ–¹å¼ã€‚

### 7.2 æŒ¯åŠ¨æ¨¡å¼

| æ¨¡å¼ | æŒ¯åŠ¨æ—¶é•¿ | å«ä¹‰ | è§¦å‘æ¡ä»¶ |
|-----|---------|-----|---------|
| çŸ­æŒ¯ (50ms) | 1æ¬¡ | è½»å¾®æç¤º | æ¥è¿‘é˜ˆå€¼è¾¹ç•Œ |
| çŸ­æŒ¯ (50ms) | 2æ¬¡ | éœ€è¦æ³¨æ„ | è¶…å‡ºé˜ˆå€¼ |
| é•¿æŒ¯ (200ms) | 1æ¬¡ | ä¸¥é‡é—®é¢˜ | ä¸¥é‡è¶…å‡ºé˜ˆå€¼ |
| è¿ç»­æŒ¯ | æŒç»­ | åœæ­¢åŠ¨ä½œ | å±é™©åŠ¨ä½œ |

### 7.3 åº”ç”¨åœºæ™¯

| åœºæ™¯ | è§¦å‘æ¡ä»¶ | æŒ¯åŠ¨æ¨¡å¼ |
|-----|---------|---------|
| ä¸Šæ†è¿‡å¿« | ä¸Šæ†æ—¶é—´ < 500ms | çŸ­æŒ¯ 2æ¬¡ |
| ä¸Šæ†é¡¶ç‚¹ä¸å¤Ÿ | X-Factor < 20Â° | çŸ­æŒ¯ 1æ¬¡ |
| ä¸‹æ†è¿‡æ—©é‡Šæ”¾ | æ‰‹è…•è§’åº¦è¿‡æ—©å˜åŒ– | çŸ­æŒ¯ 2æ¬¡ |
| ç–²åŠ³é¢„è­¦ | EMG æ¿€æ´»å¼ºåº¦ä¸‹é™ 30% | é•¿æŒ¯ 1æ¬¡ |

---

## 8. ä¸å…¶ä»–æ–‡æ¡£çš„å…³ç³»

```mermaid
graph TD
    A[real-time-feedback.md] --> B[system-design.md]
    A --> C[swing-phases.md]
    A --> D[research/biomechanics-benchmarks.md]

    B --> E[è§„åˆ™å¼•æ“]
    C --> F[é˜¶æ®µæ£€æµ‹]
    D --> G[é˜ˆå€¼å‚è€ƒ]

    style A fill:#e1f5fe
```

| ç›¸å…³æ–‡æ¡£ | å†…å®¹ | æœ¬æ–‡æ¡£ä½¿ç”¨ |
|---------|------|-----------|
| [ç³»ç»Ÿè®¾è®¡](../architecture/system-design.md) | MVP ç®¡é“æ¶æ„ | è§„åˆ™å¼•æ“é˜ˆå€¼ |
| [æŒ¥æ† 8 é˜¶æ®µ](swing-phases.md) | é˜¶æ®µæ£€æµ‹ | é˜¶æ®µè§¦å‘ç‚¹ |
| [ç”Ÿç‰©åŠ›å­¦åŸºå‡†](../../prerequisites/foundations/biomechanics-benchmarks.md) | æŒ‡æ ‡é˜ˆå€¼ | é—®é¢˜åˆ¤æ–­æ ‡å‡† |
| [ä¼ æ„Ÿå™¨æ˜ å°„](../architecture/sensor-data-processing.md) | ä¼ æ„Ÿå™¨èƒ½åŠ› | æ£€æµ‹æ–¹æ³•é€‰æ‹© |

---

## 9. å®æ–½è·¯çº¿å›¾

| Phase | å†…å®¹ | ä¼˜å…ˆçº§ |
|-------|------|--------|
| Phase 1 (MVP) | Mode 3: å…¨é€Ÿåˆ†æ + æŒ¥æ†ååé¦ˆ | ğŸ”´ å¿…é¡» |
| Phase 1.5 | Mode 1: ç«™å§¿æ£€æŸ¥ | ğŸ”´ å¿…é¡» |
| Phase 2 | Mode 2: æ…¢åŠ¨ä½œè®­ç»ƒ | ğŸŸ¡ é«˜ |
| Phase 2+ | è§¦è§‰æŒ¯åŠ¨åé¦ˆ | ğŸŸ¡ é«˜ |
| Phase 3 | LLM ä¸ªæ€§åŒ–åé¦ˆ | ğŸŸ¢ å¯é€‰ |

---

**æœ€åæ›´æ–°**: 2026-01-04
**ç»´æŠ¤è€…**: Movement Chain AI Team
