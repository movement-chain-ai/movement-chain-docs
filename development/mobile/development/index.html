
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Architecture documentation for multimodal AI movement training system">
      
      
        <meta name="author" content="Movement Chain AI Team">
      
      
        <link rel="canonical" href="https://movement-chain-ai.github.io/movement-chain-docs/development/mobile/development/">
      
      
        <link rel="prev" href="../../">
      
      
        <link rel="next" href="../../ml-training/datasets/">
      
      
        
          <link rel="alternate" href="/movement-chain-docs/" hreflang="zh">
        
          <link rel="alternate" href="/movement-chain-docs/en/" hreflang="en">
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Mobile App Development Guide 移动应用开发指南 - Movement Chain AI Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mobile-app-development-guide" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="Movement Chain AI Documentation" class="md-header__button md-logo" aria-label="Movement Chain AI Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Movement Chain AI Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Mobile App Development Guide 移动应用开发指南
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="cyan"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="选择当前语言">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/movement-chain-docs/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/movement-chain-docs/en/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/movement-chain-ai/movement-chain-docs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    movement-chain-ai/movement-chain-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../prerequisites/" class="md-tabs__link">
          
  
  
  前置知识

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../business-plan/" class="md-tabs__link">
          
  
  
  商业计划

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../design/" class="md-tabs__link">
          
  
  
  技术设计

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../components/" class="md-tabs__link">
          
  
  
  硬件组件

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  开发指南

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../reference/" class="md-tabs__link">
          
  
  
  参考资料与术语

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Movement Chain AI Documentation" class="md-nav__button md-logo" aria-label="Movement Chain AI Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Movement Chain AI Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/movement-chain-ai/movement-chain-docs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    movement-chain-ai/movement-chain-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    首页
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    前置知识
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    前置知识
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    高尔夫生物力学基础
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    高尔夫生物力学基础
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../prerequisites/foundations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../prerequisites/foundations/biomechanics-101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    入门教程
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../prerequisites/foundations/biomechanics-glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    术语表
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../prerequisites/foundations/biomechanics-benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    基准值
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../prerequisites/ml-basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ML 基础
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    商业计划
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    商业计划
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    市场洞察
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    市场洞察
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/market-insights/market-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    市场分析
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/market-insights/pain-points/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    市场痛点
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/market-insights/user-personas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    用户画像
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_4" >
        
          
          <label class="md-nav__link" for="__nav_3_2_4" id="__nav_3_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    竞品分析
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    竞品分析
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/market-insights/competitors/imu-based/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IMU 方案竞品分析
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/market-insights/competitors/vision-based/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    视觉方案竞品分析
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/market-insights/competitors/multi-sensor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    多传感器方案竞品分析
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/market-insights/competitors/smart-clothing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    智能服装竞品分析
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    商业模式
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    商业模式
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/business-model/business-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    商业模式画布（待补充）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/business-model/pricing-strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    定价策略（待补充）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/business-model/unit-economics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    单位经济学
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    进入市场
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    进入市场
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/go-to-market/entry-strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    进入策略
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/go-to-market/channel-strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    渠道策略（待补充）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/go-to-market/market-timing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    市场时机（待补充）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    产品战略
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    产品战略
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/product-strategy/strategic-vision/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    战略愿景
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/product-strategy/product-strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    核心决策
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    合规与风险
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    合规与风险
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/compliance-risk/risk-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    风险管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/compliance-risk/regulatory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    法规与合规（待补充）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/compliance-risk/ip-strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    知识产权（待补充）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../business-plan/exit-strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    退出策略（待补充）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    技术设计
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    技术设计
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    架构设计
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    架构设计
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture/system-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    系统架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture/modular-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    模块化设计
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture/mvp-plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MVP 开发计划
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_5" >
        
          
          <label class="md-nav__link" for="__nav_4_2_5" id="__nav_4_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    数据处理
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    数据处理
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture/data-processing/data-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数据管道
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture/data-processing/signal-processing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    信号处理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture/data-processing/metrics-calculation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    指标计算
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/architecture/data-processing/data-collection-plan-a/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数据采集计划
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    产品设计
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    产品设计
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/three-product-versions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    三种产品版本
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/eight-swing-phases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    八个挥杆阶段
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_4" >
        
          
          <label class="md-nav__link" for="__nav_4_3_4" id="__nav_4_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    四种使用模式
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    四种使用模式
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/modes/assessment-mode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    评估模式
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/modes/drill-mode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    练习模式
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/modes/guide-mode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    引导模式
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/modes/game-mode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    实战模式
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/four-comparison-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    四种对比基准
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/three-feedback-channels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    三个反馈通道
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/user-profile-thresholds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    用户信息和阈值调整
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_8" >
        
          
          <label class="md-nav__link" for="__nav_4_3_8" id="__nav_4_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UI 设计
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    UI 设计
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/ui/screens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    屏幕列表
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/ui/user-flows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    用户流程
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/ui/design-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    设计系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/specs/ui/data-visualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    数据可视化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    技术决策
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    技术决策
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/decisions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/decisions/0001-multi-repo-structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-0001 多仓库结构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/decisions/0002-lsm6dsv16x-imu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-0002 IMU 传感器
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/decisions/0005-esp32-s3-microcontroller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-0005 ESP32-S3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/decisions/0007-swift-ios-native/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-0007 Swift iOS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/decisions/0008-desktop-to-mobile-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-0008 Desktop→Mobile
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/decisions/sdk-selection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SDK/库选型
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/decisions/visualization-tools-evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    可视化工具
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/decisions/architecture-decisions-2025-12-23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2025-12 关键决策
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    产品调研
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    产品调研
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/market-research/competitor-metrics-comparison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OnForm & Sportsbox AI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../design/market-research/3d-golf-decoded/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3D Golf Decoded
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    硬件组件
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    硬件组件
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    IMU 惯性测量
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    IMU 惯性测量
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/imu/hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IMU 惯性测量单元
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/imu/suppliers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IMU 供应商大全
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    EMG 肌电传感
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    EMG 肌电传感
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/emg/hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EMG 肌电传感器
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/emg/suppliers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EMG 供应商大全
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    视觉/摄像头
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    视觉/摄像头
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/vision/hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    视觉/摄像头传感器
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/vision/software/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pose Estimation 姿态估计与计算机视觉指南
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    MCU 微控制器
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    MCU 微控制器
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/mcu/hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCU 微控制器
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/mcu/suppliers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCU 供应商大全
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    柔性传感器
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    柔性传感器
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/flexible-sensors/hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    柔性/E-Skin 传感器
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/flexible-sensors/suppliers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    柔性传感器供应商大全
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    压力传感器
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    压力传感器
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/pressure-sensors/hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    压力传感器
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/pressure-sensors/suppliers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    压力传感器供应商大全
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    供应链与 ODM/OEM
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    供应链与 ODM/OEM
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/supply-chain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/supply-chain/china-sensors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    国内传感器供应商清单 (China Domestic Sensor Suppliers)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/supply-chain/china-wearables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    中国智能服装与可穿戴设备供应商大全
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/supply-chain/mvp-suppliers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    中国供应商快速 MVP 开发指南 - 高尔夫挥杆分析可穿戴设备
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/supply-chain/smart-clothing-market/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    中国智能运动服装与可穿戴设备市场调研报告
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../components/supply-chain/e-skin-odm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    E-Skin ODM/OEM 厂商研究
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    开发指南
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    开发指南
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" checked>
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    移动应用
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    移动应用
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Mobile App Development Guide 移动应用开发指南
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Mobile App Development Guide 移动应用开发指南
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-framework-selection-rationale" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Framework Selection &amp; Rationale 框架选择与理由
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Framework Selection &amp; Rationale 框架选择与理由">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-why-flutter-our-choice-flutter" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Why Flutter (Our Choice) 为什么选择Flutter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-react-native-comparison-react-native" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 React Native Comparison React Native对比
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-native-iosandroid-trade-offs-iosandroid" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3 Native iOS/Android Trade-offs 原生iOS/Android权衡
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-decision-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.4 Decision Matrix 决策矩阵
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-pose-estimation-on-mobile" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Pose Estimation on Mobile 移动端姿态估计
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Pose Estimation on Mobile 移动端姿态估计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-model-selection-mediapipe-vs-rtmpose" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Model Selection: MediaPipe vs RTMPose 模型选择：MediaPipe对比RTMPose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-mediapipe-flutter-integration-mediapipe-flutter" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 MediaPipe Flutter Integration MediaPipe Flutter集成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-on-device-ml-inference-ml" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 On-Device ML Inference 设备端ML推理
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-performance-optimization-30-fps-target-30fps" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Performance Optimization (30+ FPS Target) 性能优化（目标30+FPS）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-battery-optimization-15-drainhour-15" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.5 Battery Optimization (&lt;15% Drain/Hour) 电池优化（每小时消耗&lt;15%）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-thermal-management-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.6 Thermal Management Strategies 温控管理策略
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-mobile-specific-uiux" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Mobile-Specific UI/UX 移动端专用界面设计
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Mobile-Specific UI/UX 移动端专用界面设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-screen-size-constraints-and-responsive-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Screen Size Constraints and Responsive Design 屏幕尺寸限制与响应式设计
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-touch-friendly-controls-5656px-fab-minimum-5656px-fab" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Touch-Friendly Controls (56×56px FAB Minimum) 触控友好控制（最小56×56px FAB）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-performance-targets" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Performance Targets 性能目标
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-gestures-and-interactions" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4 Gestures and Interactions 手势与交互
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-real-time-overlay-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.5 Real-Time Overlay Design 实时覆盖层设计
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-ble-sensor-communication-ble" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. BLE Sensor Communication BLE传感器通信
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. BLE Sensor Communication BLE传感器通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-esp32-s3-connection-architecture-esp32-s3" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 ESP32-S3 Connection Architecture ESP32-S3连接架构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-flutter-ble-integration-flutter-ble" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Flutter BLE Integration Flutter BLE集成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-data-streaming-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Data Streaming Optimization 数据流优化
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-latency-requirements-100ms-end-to-end-100ms" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4 Latency Requirements (&lt;100ms End-to-End) 延迟要求（端到端&lt;100ms）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-connection-management-reconnection-battery" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.5 Connection Management (Reconnection, Battery) 连接管理（重连、电池）
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-commercial-mobile-apps-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Commercial Mobile Apps Analysis 商业移动应用分析
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Commercial Mobile Apps Analysis 商业移动应用分析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-peloton-app-architecture-insights-peloton" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Peloton App Architecture Insights Peloton应用架构洞察
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-apple-fitness-integration-approach-apple-fitness" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Apple Fitness+ Integration Approach Apple Fitness+集成方法
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-nike-training-club-ux-patterns-nike-training-club" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Nike Training Club UX Patterns Nike Training Club用户体验模式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-common-patterns-across-apps" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.4 Common Patterns Across Apps 跨应用通用模式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-mobile-sdks-libraries-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Mobile SDKs &amp; Libraries 移动端SDK与库
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Mobile SDKs &amp; Libraries 移动端SDK与库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-quickpose-iosreact-native" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 QuickPose (iOS/React Native)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-kinestex-multi-framework" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 KinesteX (Multi-Framework)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-sency-cross-platform" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 Sency (Cross-Platform)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64-mediapipe-official-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.4 MediaPipe Official Plugins 官方插件
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#65-comparison-and-recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.5 Comparison and Recommendations 比较与建议
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-implementation-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Implementation Examples 实现示例
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Implementation Examples 实现示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-flutter-mediapipe-setup-flutter-mediapipe" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Flutter + MediaPipe Setup Flutter + MediaPipe设置
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-ble-sensor-integration-code-ble" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 BLE Sensor Integration Code BLE传感器集成代码
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-real-time-visualization-rendering" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Real-Time Visualization Rendering 实时可视化渲染
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-state-management-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.4 State Management Patterns 状态管理模式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-decisions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related Decisions 相关决策
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-performance-benchmarking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix: Performance Benchmarking 附录：性能基准测试
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix: Performance Benchmarking 附录：性能基准测试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#device-targets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Device Targets 设备目标
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#profiling-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Profiling Checklist 性能分析检查清单
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ML 训练
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    ML 训练
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ml-training/datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Datasets &amp; Benchmarking Guide 数据集与基准测试指南
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ml-training/visual-feedback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Visual Feedback Design 视觉反馈设计指南
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AI 辅助开发
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI 辅助开发
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-assistant/agent-sdk-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent SDK 指南
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    参考资料与术语
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    参考资料与术语
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概览
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/golf-glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    高尔夫术语表
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/physics-glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    物理学术语表
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/engineering-glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    工程术语表
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/software-glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    软件架构术语表
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/ml-glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    机器学习术语表
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/business-glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    商业术语表
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/academic-datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    运动训练系统的学术研究与数据集 (Academic Research &amp; Datasets for Movement Training Systems)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/golf-research/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    高尔夫生物力学研究 (Golf Biomechanics Research)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/open-source-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    开源工具与代码库 (Open Source Tools &amp; Repositories)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/semg-research-2024-2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    sEMG 研究报告 (2024-2025)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-framework-selection-rationale" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Framework Selection &amp; Rationale 框架选择与理由
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Framework Selection &amp; Rationale 框架选择与理由">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-why-flutter-our-choice-flutter" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Why Flutter (Our Choice) 为什么选择Flutter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-react-native-comparison-react-native" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 React Native Comparison React Native对比
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-native-iosandroid-trade-offs-iosandroid" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3 Native iOS/Android Trade-offs 原生iOS/Android权衡
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-decision-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.4 Decision Matrix 决策矩阵
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-pose-estimation-on-mobile" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Pose Estimation on Mobile 移动端姿态估计
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Pose Estimation on Mobile 移动端姿态估计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-model-selection-mediapipe-vs-rtmpose" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Model Selection: MediaPipe vs RTMPose 模型选择：MediaPipe对比RTMPose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-mediapipe-flutter-integration-mediapipe-flutter" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 MediaPipe Flutter Integration MediaPipe Flutter集成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-on-device-ml-inference-ml" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 On-Device ML Inference 设备端ML推理
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-performance-optimization-30-fps-target-30fps" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Performance Optimization (30+ FPS Target) 性能优化（目标30+FPS）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-battery-optimization-15-drainhour-15" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.5 Battery Optimization (&lt;15% Drain/Hour) 电池优化（每小时消耗&lt;15%）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-thermal-management-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.6 Thermal Management Strategies 温控管理策略
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-mobile-specific-uiux" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Mobile-Specific UI/UX 移动端专用界面设计
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Mobile-Specific UI/UX 移动端专用界面设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-screen-size-constraints-and-responsive-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Screen Size Constraints and Responsive Design 屏幕尺寸限制与响应式设计
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-touch-friendly-controls-5656px-fab-minimum-5656px-fab" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Touch-Friendly Controls (56×56px FAB Minimum) 触控友好控制（最小56×56px FAB）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-performance-targets" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Performance Targets 性能目标
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-gestures-and-interactions" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4 Gestures and Interactions 手势与交互
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-real-time-overlay-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.5 Real-Time Overlay Design 实时覆盖层设计
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-ble-sensor-communication-ble" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. BLE Sensor Communication BLE传感器通信
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. BLE Sensor Communication BLE传感器通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-esp32-s3-connection-architecture-esp32-s3" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 ESP32-S3 Connection Architecture ESP32-S3连接架构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-flutter-ble-integration-flutter-ble" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Flutter BLE Integration Flutter BLE集成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-data-streaming-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Data Streaming Optimization 数据流优化
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-latency-requirements-100ms-end-to-end-100ms" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4 Latency Requirements (&lt;100ms End-to-End) 延迟要求（端到端&lt;100ms）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-connection-management-reconnection-battery" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.5 Connection Management (Reconnection, Battery) 连接管理（重连、电池）
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-commercial-mobile-apps-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Commercial Mobile Apps Analysis 商业移动应用分析
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Commercial Mobile Apps Analysis 商业移动应用分析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-peloton-app-architecture-insights-peloton" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Peloton App Architecture Insights Peloton应用架构洞察
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-apple-fitness-integration-approach-apple-fitness" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Apple Fitness+ Integration Approach Apple Fitness+集成方法
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-nike-training-club-ux-patterns-nike-training-club" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Nike Training Club UX Patterns Nike Training Club用户体验模式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-common-patterns-across-apps" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.4 Common Patterns Across Apps 跨应用通用模式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-mobile-sdks-libraries-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Mobile SDKs &amp; Libraries 移动端SDK与库
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Mobile SDKs &amp; Libraries 移动端SDK与库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-quickpose-iosreact-native" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 QuickPose (iOS/React Native)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-kinestex-multi-framework" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 KinesteX (Multi-Framework)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-sency-cross-platform" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 Sency (Cross-Platform)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64-mediapipe-official-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.4 MediaPipe Official Plugins 官方插件
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#65-comparison-and-recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.5 Comparison and Recommendations 比较与建议
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-implementation-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Implementation Examples 实现示例
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Implementation Examples 实现示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-flutter-mediapipe-setup-flutter-mediapipe" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Flutter + MediaPipe Setup Flutter + MediaPipe设置
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-ble-sensor-integration-code-ble" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 BLE Sensor Integration Code BLE传感器集成代码
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-real-time-visualization-rendering" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Real-Time Visualization Rendering 实时可视化渲染
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-state-management-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.4 State Management Patterns 状态管理模式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-decisions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related Decisions 相关决策
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-performance-benchmarking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix: Performance Benchmarking 附录：性能基准测试
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix: Performance Benchmarking 附录：性能基准测试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#device-targets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Device Targets 设备目标
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#profiling-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Profiling Checklist 性能分析检查清单
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="mobile-app-development-guide">Mobile App Development Guide 移动应用开发指南<a class="headerlink" href="#mobile-app-development-guide" title="Permanent link">&para;</a></h1>
<blockquote>
<p><strong>Comprehensive guide for building the Movement Chain AI mobile application</strong>
<strong>构建 Movement Chain AI 移动应用的综合指南</strong></p>
<p><strong>Last Updated 最后更新:</strong> 2025-12-01
<strong>Target Platforms 目标平台:</strong> iOS, Android (Flutter-based)</p>
</blockquote>
<hr />
<h2 id="1-framework-selection-rationale">1. Framework Selection &amp; Rationale 框架选择与理由<a class="headerlink" href="#1-framework-selection-rationale" title="Permanent link">&para;</a></h2>
<h3 id="11-why-flutter-our-choice-flutter">1.1 Why Flutter (Our Choice) 为什么选择Flutter<a class="headerlink" href="#11-why-flutter-our-choice-flutter" title="Permanent link">&para;</a></h3>
<p><strong>Decision 决策</strong>: Flutter 3.x with Dart has been selected as the primary mobile development framework for Movement Chain AI.</p>
<p>Flutter 3.x 与 Dart 已被选为 Movement Chain AI 的主要移动开发框架。</p>
<p><strong>Performance Benchmarks 性能基准</strong> (Real-time camera + ML + BLE workload 实时相机+机器学习+BLE工作负载):</p>
<table>
<thead>
<tr>
<th>Framework 框架</th>
<th>Frame Rate 帧率</th>
<th>Memory (Avg) 平均内存</th>
<th>Frame Drops 丢帧率</th>
<th>ML Inference Overhead ML推理开销</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Flutter</strong> ✅</td>
<td>60-120 FPS</td>
<td>450MB</td>
<td>~30% fewer than RN</td>
<td>+15-20ms vs Native</td>
</tr>
<tr>
<td>React Native</td>
<td>60 FPS capable</td>
<td>520MB</td>
<td>Occasional spikes</td>
<td>+25-30ms vs Native</td>
</tr>
<tr>
<td>Native (Swift/Kotlin)</td>
<td>120 FPS</td>
<td>380MB</td>
<td>Minimal</td>
<td>Baseline (fastest)</td>
</tr>
</tbody>
</table>
<p><strong>Key Advantages 核心优势</strong>:</p>
<ul>
<li><strong>70% fewer frame drops 减少70%丢帧</strong> vs React Native during ML workloads 机器学习负载期间</li>
<li><strong>Compiled performance 编译性能</strong>: Dart compiles to native ARM code (no JavaScript bridge) Dart编译为原生ARM代码（无JavaScript桥接）</li>
<li><strong>40% cost savings 节省40%成本</strong> vs dual native development 相比双原生开发 ($80K Flutter vs $140K Native over 12 months 12个月内)</li>
<li><strong>Single codebase 单一代码库</strong>: 90-95% code sharing between iOS and Android iOS与Android之间共享90-95%代码</li>
<li><strong>Hot reload 热重载</strong>: Faster iteration cycles for rapid development 更快的迭代周期实现快速开发</li>
</ul>
<h3 id="12-react-native-comparison-react-native">1.2 React Native Comparison React Native对比<a class="headerlink" href="#12-react-native-comparison-react-native" title="Permanent link">&para;</a></h3>
<p><strong>React Native Strengths React Native优势</strong>:</p>
<ul>
<li>Massive ecosystem (npm 2M+ packages) 庞大生态系统（npm超200万包）</li>
<li>Largest developer talent pool 最大的开发者人才库</li>
<li>JavaScript/TypeScript (easier hiring) JavaScript/TypeScript（更易招聘）</li>
<li>Mature tooling (Metro, Flipper) 成熟工具（Metro、Flipper）</li>
</ul>
<p><strong>React Native Weaknesses for Movement Chain AI React Native对于Movement Chain AI的劣势</strong>:</p>
<ul>
<li>60 FPS baseline but inconsistent under ML workloads 60 FPS基准但在ML负载下不稳定</li>
<li>15% higher memory usage (520MB vs 450MB) 内存使用高15%（520MB对比450MB）</li>
<li>Frame drop rate 70% higher during pose estimation 姿态估计期间丢帧率高70% (8.2% vs 3.8%)</li>
<li>GC pauses: 8-15ms (impacts real-time consistency) GC暂停：8-15毫秒（影响实时一致性）</li>
</ul>
<p><strong>Verdict 结论</strong>: Frame drops during pose estimation are critical for UX. Flutter's performance edge justifies the Dart learning curve.</p>
<p>姿态估计期间的丢帧对用户体验至关重要。Flutter的性能优势证明学习Dart是值得的。</p>
<h3 id="13-native-iosandroid-trade-offs-iosandroid">1.3 Native iOS/Android Trade-offs 原生iOS/Android权衡<a class="headerlink" href="#13-native-iosandroid-trade-offs-iosandroid" title="Permanent link">&para;</a></h3>
<p><strong>Native Development Strengths 原生开发优势</strong>:</p>
<ul>
<li>Best performance 最佳性能 (108 FPS iOS, 102 FPS Android)</li>
<li>Lowest latency 最低延迟 (9.3ms iOS, 9.8ms Android)</li>
<li>1.8 Mbps BLE throughput (highest) BLE吞吐量1.8 Mbps（最高）</li>
<li>Direct hardware access 直接硬件访问 (Metal, CameraX)</li>
</ul>
<p><strong>Native Development Weaknesses 原生开发劣势</strong>:</p>
<ul>
<li><strong>2x development cost 2倍开发成本</strong> ($1.2M-1.5M vs $450K-600K Flutter)</li>
<li>0% code sharing (separate Swift + Kotlin codebases) 0%代码共享（独立的Swift+Kotlin代码库）</li>
<li>Slower iteration (no hot reload) 迭代较慢（无热重载）</li>
<li>2x maintenance overhead (duplicate bug fixes, features) 2倍维护开销（重复修复bug和功能）</li>
</ul>
<p><strong>When to Use Native 何时使用原生</strong>:</p>
<ul>
<li>Premium apps justifying 2x cost 证明2倍成本合理的高端应用 (medical devices 医疗设备, professional sports 专业体育)</li>
<li>Maximum performance is critical 最大性能至关重要 (120+ FPS target 目标120+FPS)</li>
<li>Platform-specific features heavily used 大量使用平台特定功能</li>
</ul>
<h3 id="14-decision-matrix">1.4 Decision Matrix 决策矩阵<a class="headerlink" href="#14-decision-matrix" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Application Type 应用类型</th>
<th>Recommended Framework 推荐框架</th>
<th>Justification 理由</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Movement Chain AI Production</strong></td>
<td><strong>Flutter</strong> ✅</td>
<td>98 FPS, 1.35 Mbps BLE, 90% code sharing, best balance 最佳平衡</td>
</tr>
<tr>
<td><strong>Maximum Performance 最大性能</strong></td>
<td>Native (Swift+Kotlin)</td>
<td>108 FPS, but 2x dev cost 但2倍开发成本</td>
</tr>
<tr>
<td><strong>React/JS Team</strong></td>
<td>React Native</td>
<td>88 FPS acceptable, leverage existing skills 利用现有技能</td>
</tr>
<tr>
<td><strong>iOS-Only Premium 仅iOS高端</strong></td>
<td>Native (Swift)</td>
<td>108 FPS, Core ML integration Core ML集成</td>
</tr>
<tr>
<td><strong>Budget Prototype 预算原型</strong></td>
<td>Flutter ✅</td>
<td>Fast development, single codebase 快速开发，单一代码库</td>
</tr>
<tr>
<td><strong>Startup MVP</strong></td>
<td>Flutter ✅</td>
<td>Fastest time-to-market 最快上市时间</td>
</tr>
</tbody>
</table>
<p><strong>Our Choice 我们的选择: Flutter</strong> - Best cost-to-performance ratio for Movement Chain AI requirements 对于Movement Chain AI需求的最佳性价比。</p>
<hr />
<h2 id="2-pose-estimation-on-mobile">2. Pose Estimation on Mobile 移动端姿态估计<a class="headerlink" href="#2-pose-estimation-on-mobile" title="Permanent link">&para;</a></h2>
<h3 id="21-model-selection-mediapipe-vs-rtmpose">2.1 Model Selection: MediaPipe vs RTMPose 模型选择：MediaPipe对比RTMPose<a class="headerlink" href="#21-model-selection-mediapipe-vs-rtmpose" title="Permanent link">&para;</a></h3>
<p><strong>For MVP (Current) MVP阶段（当前）</strong>: <strong>MediaPipe Pose</strong> ✅</p>
<ul>
<li>Fastest time to market 最快上市时间</li>
<li>Cross-platform (iOS/Android) 跨平台</li>
<li>3D pose for biomechanics 用于生物力学的3D姿态</li>
<li>Extensive tutorials/examples 大量教程/示例</li>
<li>33 keypoints with visibility scores 33个带可见性评分的关键点</li>
</ul>
<p><strong>For Optimization (Month 3-6) 优化阶段（第3-6个月）</strong>: <strong>RTMPose-m</strong> ⏫</p>
<ul>
<li>2-3x faster inference 推理速度快2-3倍 (90+ FPS vs 30-40 FPS)</li>
<li>Higher accuracy 更高精度 (75.8% AP vs ~72% AP)</li>
<li>Lower compute costs 更低计算成本</li>
<li>Better battery life 更好的电池续航</li>
</ul>
<h3 id="22-mediapipe-flutter-integration-mediapipe-flutter">2.2 MediaPipe Flutter Integration MediaPipe Flutter集成<a class="headerlink" href="#22-mediapipe-flutter-integration-mediapipe-flutter" title="Permanent link">&para;</a></h3>
<p><strong>Installation 安装</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># pubspec.yaml</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">dependencies</span><span class="p">:</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="nt">google_mlkit_pose_detection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^0.10.0</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span><span class="nt">camera</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^0.10.5+2</span>
</span></code></pre></div>
<p><strong>Basic Implementation 基本实现</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:google_mlkit_pose_detection/google_mlkit_pose_detection.dart&#39;</span><span class="p">;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:camera/camera.dart&#39;</span><span class="p">;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="kd">class</span><span class="w"> </span><span class="nc">PoseEstimator</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">PoseDetector</span><span class="w"> </span><span class="n">poseDetector</span><span class="p">;</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">initialize</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PoseDetectorOptions</span><span class="p">(</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">      </span><span class="nl">model:</span><span class="w"> </span><span class="n">PoseDetectionModel</span><span class="p">.</span><span class="n">accurate</span><span class="p">,</span><span class="w">  </span><span class="c1">// accurate, base, or heavy</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">      </span><span class="nl">mode:</span><span class="w"> </span><span class="n">PoseDetectionMode</span><span class="p">.</span><span class="n">stream</span><span class="p">,</span><span class="w">      </span><span class="c1">// stream for real-time 实时流式处理</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="n">poseDetector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PoseDetector</span><span class="p">(</span><span class="nl">options:</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Pose</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">processFrame</span><span class="p">(</span><span class="n">CameraImage</span><span class="w"> </span><span class="n">cameraImage</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">inputImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InputImage</span><span class="p">.</span><span class="n">fromBytes</span><span class="p">(</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">      </span><span class="nl">bytes:</span><span class="w"> </span><span class="n">cameraImage</span><span class="p">.</span><span class="n">planes</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">bytes</span><span class="p">,</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">      </span><span class="nl">metadata:</span><span class="w"> </span><span class="n">InputImageMetadata</span><span class="p">(</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">        </span><span class="nl">size:</span><span class="w"> </span><span class="n">Size</span><span class="p">(</span><span class="n">cameraImage</span><span class="p">.</span><span class="n">width</span><span class="p">.</span><span class="n">toDouble</span><span class="p">(),</span><span class="w"> </span><span class="n">cameraImage</span><span class="p">.</span><span class="n">height</span><span class="p">.</span><span class="n">toDouble</span><span class="p">()),</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">        </span><span class="nl">rotation:</span><span class="w"> </span><span class="n">InputImageRotation</span><span class="p">.</span><span class="n">rotation0deg</span><span class="p">,</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">        </span><span class="nl">format:</span><span class="w"> </span><span class="n">InputImageFormat</span><span class="p">.</span><span class="n">nv21</span><span class="p">,</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">        </span><span class="nl">bytesPerRow:</span><span class="w"> </span><span class="n">cameraImage</span><span class="p">.</span><span class="n">planes</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">bytesPerRow</span><span class="p">,</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">      </span><span class="p">),</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">poses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">poseDetector</span><span class="p">.</span><span class="n">processImage</span><span class="p">(</span><span class="n">inputImage</span><span class="p">);</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">poses</span><span class="p">;</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">dispose</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">    </span><span class="n">poseDetector</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="23-on-device-ml-inference-ml">2.3 On-Device ML Inference 设备端ML推理<a class="headerlink" href="#23-on-device-ml-inference-ml" title="Permanent link">&para;</a></h3>
<p><strong>ONNX Runtime Mobile Integration ONNX Runtime移动集成</strong> (Phase 2+, MVP1 uses MediaPipe built-in TFLite):</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># pubspec.yaml</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nt">dependencies</span><span class="p">:</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="nt">onnxruntime_v2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^1.16.3</span><span class="w">  </span><span class="c1"># ONNX Runtime Mobile binding</span>
</span></code></pre></div>
<p><strong>RTMPose Model Deployment RTMPose模型部署</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:onnxruntime_v2/onnxruntime_v2.dart&#39;</span><span class="p">;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="kd">class</span><span class="w"> </span><span class="nc">RTMPoseInference</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">OrtSession</span><span class="w"> </span><span class="n">session</span><span class="p">;</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">loadModel</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="c1">// Load RTMPose-m INT8 quantized model (~5MB)</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="c1">// 加载RTMPose-m INT8量化模型（约5MB）</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="n">session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OrtSession</span><span class="p">.</span><span class="n">fromAsset</span><span class="p">(</span><span class="s1">&#39;assets/rtmpose_m_int8.onnx&#39;</span><span class="p">);</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Keypoint</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">infer</span><span class="p">(</span><span class="n">Uint8List</span><span class="w"> </span><span class="n">imageBytes</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">    </span><span class="c1">// Preprocess: Resize to 256x192, normalize</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">    </span><span class="c1">// 预处理：调整大小为256x192，归一化</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">preprocessImage</span><span class="p">(</span><span class="n">imageBytes</span><span class="p">);</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">    </span><span class="c1">// Run inference (30-50ms on mid-range devices)</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">    </span><span class="c1">// 运行推理（中端设备上30-50毫秒）</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">inputTensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OrtValueTensor</span><span class="p">.</span><span class="n">createTensorWithDataList</span><span class="p">(</span>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="w">      </span><span class="n">input</span><span class="p">,</span>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="w">      </span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">192</span><span class="p">,</span><span class="w"> </span><span class="m">256</span><span class="p">],</span><span class="w">  </span><span class="c1">// [batch, channels, height, width]</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">outputs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="n">run</span><span class="p">([</span><span class="n">inputTensor</span><span class="p">]);</span>
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="w">    </span><span class="c1">// Postprocess: Extract 17 COCO keypoints</span>
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a><span class="w">    </span><span class="c1">// 后处理：提取17个COCO关键点</span>
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">postprocessKeypoints</span><span class="p">(</span><span class="n">outputs</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="24-performance-optimization-30-fps-target-30fps">2.4 Performance Optimization (30+ FPS Target) 性能优化（目标30+FPS）<a class="headerlink" href="#24-performance-optimization-30-fps-target-30fps" title="Permanent link">&para;</a></h3>
<p><strong>Target 目标</strong>: Sustained 60 FPS on iPhone 11 / Pixel 5 (mid-range baseline 中端基准)</p>
<p><strong>Optimization Strategies 优化策略</strong>:</p>
<ol>
<li><strong>Use Isolates for ML Inference 使用Isolate进行ML推理</strong> (prevent UI jank 防止UI卡顿):</li>
</ol>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1">// Run inference on background isolate</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c1">// 在后台isolate上运行推理</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="kd">final</span><span class="w"> </span><span class="n">keypoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">compute</span><span class="p">(</span><span class="n">_runInference</span><span class="p">,</span><span class="w"> </span><span class="n">cameraFrame</span><span class="p">);</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="kd">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Keypoint</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_runInference</span><span class="p">(</span><span class="n">CameraImage</span><span class="w"> </span><span class="n">image</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">  </span><span class="c1">// Heavy ML computation runs on separate CPU core</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">  </span><span class="c1">// 重型ML计算在独立CPU核心上运行</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">performInference</span><span class="p">(</span><span class="n">image</span><span class="p">);</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li><strong>Image Preprocessing on GPU 在GPU上进行图像预处理</strong>:</li>
</ol>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">// Convert camera frames to ML input format on GPU where possible</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="c1">// 在可能的情况下在GPU上将相机帧转换为ML输入格式</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;dart:ui&#39;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">ui</span><span class="p">;</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="n">Future</span><span class="o">&lt;</span><span class="n">Uint8List</span><span class="o">&gt;</span><span class="w"> </span><span class="n">preprocessOnGPU</span><span class="p">(</span><span class="n">CameraImage</span><span class="w"> </span><span class="n">image</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">imageBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">convertYUV420ToRGB</span><span class="p">(</span><span class="n">image</span><span class="p">);</span><span class="w">  </span><span class="c1">// GPU-accelerated GPU加速</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">imageBuffer</span><span class="p">;</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li><strong>Memory Management 内存管理</strong> (reuse buffers 重用缓冲区):</li>
</ol>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">FrameProcessor</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">Uint8List</span><span class="w"> </span><span class="n">_frameBuffer</span><span class="p">;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">initialize</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">bufferSize</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="c1">// Pre-allocate buffer to avoid GC pauses</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="c1">// 预分配缓冲区避免GC暂停</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">    </span><span class="n">_frameBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Uint8List</span><span class="p">(</span><span class="n">bufferSize</span><span class="p">);</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">processFrame</span><span class="p">(</span><span class="n">CameraImage</span><span class="w"> </span><span class="n">image</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="c1">// Reuse _frameBuffer instead of allocating new memory</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">    </span><span class="c1">// 重用_frameBuffer而不是分配新内存</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">    </span><span class="n">copyImageToBuffer</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">_frameBuffer</span><span class="p">);</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li><strong>Widget Rebuilds Optimization 组件重建优化</strong>:</li>
</ol>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1">// Use RepaintBoundary to isolate animated layers</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="c1">// 使用RepaintBoundary隔离动画层</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="n">RepaintBoundary</span><span class="p">(</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">  </span><span class="nl">child:</span><span class="w"> </span><span class="n">CustomPaint</span><span class="p">(</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="nl">painter:</span><span class="w"> </span><span class="n">SkeletonOverlayPainter</span><span class="p">(</span><span class="n">keypoints</span><span class="p">),</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="nl">child:</span><span class="w"> </span><span class="n">OverlayArrows</span><span class="p">(</span><span class="n">errors</span><span class="p">),</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">  </span><span class="p">),</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="p">);</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="c1">// Use const constructors</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="c1">// 使用const构造函数</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="k">const</span><span class="w"> </span><span class="n">PoseVisualization</span><span class="p">(</span><span class="nl">keypoints:</span><span class="w"> </span><span class="n">keypoints</span><span class="p">);</span>
</span></code></pre></div>
<h3 id="25-battery-optimization-15-drainhour-15">2.5 Battery Optimization (&lt;15% Drain/Hour) 电池优化（每小时消耗&lt;15%）<a class="headerlink" href="#25-battery-optimization-15-drainhour-15" title="Permanent link">&para;</a></h3>
<p><strong>Target 目标</strong>: &lt;15% battery drain per hour during active use 活跃使用期间每小时电池消耗&lt;15%</p>
<p><strong>Optimization Techniques 优化技术</strong>:</p>
<ol>
<li><strong>Frame Rate Adaptation 帧率自适应</strong>:</li>
</ol>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">BatteryAwareFrameRate</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">getTargetFPS</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">batteryLevel</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">batteryLevel</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="m">60</span><span class="p">;</span><span class="w">   </span><span class="c1">// Battery &gt; 50% 电池&gt;50%</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">batteryLevel</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0.2</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="m">45</span><span class="p">;</span><span class="w">   </span><span class="c1">// Battery 20-50% 电池20-50%</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">30</span><span class="p">;</span><span class="w">                            </span><span class="c1">// Battery &lt; 20% 电池&lt;20%</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li><strong>Thermal Throttling 温控节流</strong>:</li>
</ol>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:battery_plus/battery_plus.dart&#39;</span><span class="p">;</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="kd">class</span><span class="w"> </span><span class="nc">ThermalManager</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">handleThermalState</span><span class="p">(</span><span class="n">ThermalState</span><span class="w"> </span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="n">ThermalState</span><span class="p">.</span><span class="nl">nominal:</span><span class="w">     </span><span class="c1">// &lt; 40°C</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">        </span><span class="n">enableFullRendering</span><span class="p">();</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="n">ThermalState</span><span class="p">.</span><span class="nl">fair:</span><span class="w">        </span><span class="c1">// 40-45°C</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">        </span><span class="n">reduceShadowEffects</span><span class="p">();</span><span class="w">       </span><span class="c1">// 减少阴影效果</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">        </span><span class="n">simplifyOverlays</span><span class="p">();</span><span class="w">          </span><span class="c1">// 简化覆盖层</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="n">ThermalState</span><span class="p">.</span><span class="nl">serious:</span><span class="w">     </span><span class="c1">// &gt; 45°C</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">        </span><span class="n">showWarning</span><span class="p">();</span><span class="w">               </span><span class="c1">// 显示警告</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">        </span><span class="n">reduceToMinimalRendering</span><span class="p">();</span><span class="w">  </span><span class="c1">// 降至最小渲染</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">        </span><span class="n">targetFPS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="p">;</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li><strong>Camera Duty Cycle 相机工作周期</strong>:</li>
</ol>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1">// Only process every Nth frame during low battery</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="c1">// 低电量时仅处理每第N帧</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="kt">int</span><span class="w"> </span><span class="n">frameSkipCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="kd">final</span><span class="w"> </span><span class="n">skipInterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">batteryLevel</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0.2</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="kt">void</span><span class="w"> </span><span class="n">onCameraFrame</span><span class="p">(</span><span class="n">CameraImage</span><span class="w"> </span><span class="n">image</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">  </span><span class="n">frameSkipCount</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">frameSkipCount</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">skipInterval</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">  </span><span class="n">processFrame</span><span class="p">(</span><span class="n">image</span><span class="p">);</span><span class="w">  </span><span class="c1">// Process every 1st or 2nd frame 处理每第1或第2帧</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="26-thermal-management-strategies">2.6 Thermal Management Strategies 温控管理策略<a class="headerlink" href="#26-thermal-management-strategies" title="Permanent link">&para;</a></h3>
<p><strong>Monitoring Device Temperature 监控设备温度</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:thermal/thermal.dart&#39;</span><span class="p">;</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="kd">class</span><span class="w"> </span><span class="nc">ThermalMonitor</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">ThermalState</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">thermalStateStream</span><span class="w"> </span><span class="o">=&gt;</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">    </span><span class="n">Thermal</span><span class="p">().</span><span class="n">onThermalStateChanged</span><span class="p">;</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">startMonitoring</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">    </span><span class="n">thermalStateStream</span><span class="p">.</span><span class="n">listen</span><span class="p">((</span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ThermalState</span><span class="p">.</span><span class="n">serious</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">        </span><span class="c1">// Reduce computational load 降低计算负载</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">        </span><span class="n">targetFPS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="p">;</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">        </span><span class="n">disableAdvancedFeatures</span><span class="p">();</span><span class="w">   </span><span class="c1">// 禁用高级功能</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">        </span><span class="n">showCoolingWarning</span><span class="p">();</span><span class="w">        </span><span class="c1">// 显示降温警告</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Progressive Feature Degradation 渐进式功能降级</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Temperature &lt; 40°C 温度&lt;40°C: Full rendering (60 FPS, all overlays) 全渲染（60 FPS，所有覆盖层）
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>Temperature 40-45°C 温度40-45°C: Reduced effects (45 FPS, simplified overlays) 降低效果（45 FPS，简化覆盖层）
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>Temperature &gt; 45°C 温度&gt;45°C: Minimal mode (30 FPS, skeleton only) 最小模式（30 FPS，仅骨架）
</span></code></pre></div>
<hr />
<h2 id="3-mobile-specific-uiux">3. Mobile-Specific UI/UX 移动端专用界面设计<a class="headerlink" href="#3-mobile-specific-uiux" title="Permanent link">&para;</a></h2>
<h3 id="31-screen-size-constraints-and-responsive-design">3.1 Screen Size Constraints and Responsive Design 屏幕尺寸限制与响应式设计<a class="headerlink" href="#31-screen-size-constraints-and-responsive-design" title="Permanent link">&para;</a></h3>
<p><strong>Responsive Scaling Rules 响应式缩放规则</strong>:</p>
<table>
<thead>
<tr>
<th>Screen Size 屏幕尺寸</th>
<th>Skeleton Stroke 骨架线宽</th>
<th>Arrow Thickness 箭头粗细</th>
<th>Min Touch Target 最小触控目标</th>
<th>Font Size 字体大小</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Small (&lt;5.5")</strong></td>
<td>3px</td>
<td>5px</td>
<td>44×44px (Apple)</td>
<td>14pt</td>
</tr>
<tr>
<td><strong>Medium (5.5-6.5")</strong></td>
<td>4px</td>
<td>6px</td>
<td>44×44px</td>
<td>16pt</td>
</tr>
<tr>
<td><strong>Large (&gt;6.5")</strong></td>
<td>5px</td>
<td>8px</td>
<td>48×48px</td>
<td>18pt</td>
</tr>
</tbody>
</table>
<p><strong>Dynamic Viewport Adaptation 动态视口适配</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kt">double</span><span class="w"> </span><span class="n">getScaleFactor</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">screenDiagonal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MediaQuery</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">size</span><span class="p">.</span><span class="n">shortestSide</span><span class="p">;</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">baseDiagonal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">390.0</span><span class="p">;</span><span class="w">  </span><span class="c1">// Base design: iPhone 14 width 基准设计：iPhone 14宽度</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">min</span><span class="p">(</span><span class="n">screenDiagonal</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">baseDiagonal</span><span class="p">,</span><span class="w"> </span><span class="m">1.3</span><span class="p">);</span><span class="w">  </span><span class="c1">// Cap at 1.3x 上限1.3倍</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="p">}</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="n">Widget</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getScaleFactor</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">arrowThickness</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">6.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">scale</span><span class="p">;</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">skeletonStroke</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">scale</span><span class="p">;</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">CustomPaint</span><span class="p">(</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">    </span><span class="nl">painter:</span><span class="w"> </span><span class="n">SkeletonPainter</span><span class="p">(</span><span class="nl">strokeWidth:</span><span class="w"> </span><span class="n">skeletonStroke</span><span class="p">),</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Safe Zones 安全区域</strong> (avoid UI overlap 避免UI重叠):</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">SafeZoneLayout</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">StatelessWidget</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">  </span><span class="n">Widget</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Stack</span><span class="p">(</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">      </span><span class="nl">children:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">        </span><span class="n">CameraPreview</span><span class="p">(),</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">        </span><span class="c1">// Top safe zone: 15% reserved for status bar + controls</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">        </span><span class="c1">// 顶部安全区：为状态栏+控制预留15%</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">        </span><span class="n">Positioned</span><span class="p">(</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">          </span><span class="nl">top:</span><span class="w"> </span><span class="n">MediaQuery</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">0.15</span><span class="p">,</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">          </span><span class="nl">child:</span><span class="w"> </span><span class="n">MetricsBar</span><span class="p">(),</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">        </span><span class="p">),</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="w">        </span><span class="c1">// Bottom safe zone: 20% reserved for controls</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="w">        </span><span class="c1">// 底部安全区：为控制预留20%</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="w">        </span><span class="n">Positioned</span><span class="p">(</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="w">          </span><span class="nl">bottom:</span><span class="w"> </span><span class="n">MediaQuery</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">0.20</span><span class="p">,</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="w">          </span><span class="nl">child:</span><span class="w"> </span><span class="n">ControlPanel</span><span class="p">(),</span>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="w">        </span><span class="p">),</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="w">      </span><span class="p">],</span>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="32-touch-friendly-controls-5656px-fab-minimum-5656px-fab">3.2 Touch-Friendly Controls (56×56px FAB Minimum) 触控友好控制（最小56×56px FAB）<a class="headerlink" href="#32-touch-friendly-controls-5656px-fab-minimum-5656px-fab" title="Permanent link">&para;</a></h3>
<p><strong>Material FAB Standard Material FAB标准</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">ControlPanel</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">StatelessWidget</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">  </span><span class="n">Widget</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Row</span><span class="p">(</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">      </span><span class="nl">mainAxisAlignment:</span><span class="w"> </span><span class="n">MainAxisAlignment</span><span class="p">.</span><span class="n">spaceEvenly</span><span class="p">,</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">      </span><span class="nl">children:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">        </span><span class="c1">// Minimum 56×56px touch target 最小56×56px触控目标</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">        </span><span class="n">FloatingActionButton</span><span class="p">(</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">          </span><span class="nl">onPressed:</span><span class="w"> </span><span class="n">toggleOverlay</span><span class="p">,</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">          </span><span class="nl">tooltip:</span><span class="w"> </span><span class="s1">&#39;Toggle Overlay 切换覆盖层&#39;</span><span class="p">,</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">          </span><span class="nl">child:</span><span class="w"> </span><span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="p">.</span><span class="n">visibility</span><span class="p">),</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">        </span><span class="p">),</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="w">        </span><span class="n">FloatingActionButton</span><span class="p">(</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="w">          </span><span class="nl">onPressed:</span><span class="w"> </span><span class="n">toggleArrows</span><span class="p">,</span>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a><span class="w">          </span><span class="nl">tooltip:</span><span class="w"> </span><span class="s1">&#39;Toggle Arrows 切换箭头&#39;</span><span class="p">,</span>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="w">          </span><span class="nl">child:</span><span class="w"> </span><span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="p">.</span><span class="n">near_me</span><span class="p">),</span>
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="w">        </span><span class="p">),</span>
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>
</span><span id="__span-15-20"><a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a><span class="w">        </span><span class="n">FloatingActionButton</span><span class="p">(</span>
</span><span id="__span-15-21"><a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a><span class="w">          </span><span class="nl">onPressed:</span><span class="w"> </span><span class="n">showSettings</span><span class="p">,</span>
</span><span id="__span-15-22"><a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a><span class="w">          </span><span class="nl">tooltip:</span><span class="w"> </span><span class="s1">&#39;Settings 设置&#39;</span><span class="p">,</span>
</span><span id="__span-15-23"><a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a><span class="w">          </span><span class="nl">child:</span><span class="w"> </span><span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="p">.</span><span class="n">settings</span><span class="p">),</span>
</span><span id="__span-15-24"><a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a><span class="w">        </span><span class="p">),</span>
</span><span id="__span-15-25"><a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a><span class="w">      </span><span class="p">],</span>
</span><span id="__span-15-26"><a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-15-27"><a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-15-28"><a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Haptic Feedback on Tap 触控时的haptic反馈</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flutter/services.dart&#39;</span><span class="p">;</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="kt">void</span><span class="w"> </span><span class="n">onButtonTap</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">  </span><span class="n">HapticFeedback</span><span class="p">.</span><span class="n">mediumImpact</span><span class="p">();</span><span class="w">  </span><span class="c1">// Tactile click feedback 触觉点击反馈</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">  </span><span class="n">toggleFeature</span><span class="p">();</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="33-performance-targets">3.3 Performance Targets 性能目标<a class="headerlink" href="#33-performance-targets" title="Permanent link">&para;</a></h3>
<p><strong>Critical Targets 关键目标</strong> (ADR-0007):</p>
<ul>
<li><strong>60 FPS sustained 持续60 FPS</strong> on mid-range devices 中端设备 (iPhone 11, Pixel 5)</li>
<li><strong>&lt;500MB peak RAM usage 峰值RAM使用&lt;500MB</strong> during ML + BLE + rendering ML+BLE+渲染期间</li>
<li><strong>&lt;15% battery drain/hour 每小时电池消耗&lt;15%</strong> (screen-on time 亮屏时间)</li>
<li><strong>&lt;100ms end-to-end latency 端到端延迟&lt;100ms</strong> (camera → pose → BLE → display 相机→姿态→BLE→显示)</li>
</ul>
<p><strong>Flutter DevTools Profiling Flutter DevTools性能分析</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1">// Enable performance overlay in debug mode</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="c1">// 在调试模式下启用性能覆盖层</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="n">MaterialApp</span><span class="p">(</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">  </span><span class="nl">showPerformanceOverlay:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">  </span><span class="c1">// Show FPS graph 显示FPS图表</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">  </span><span class="nl">debugShowCheckedModeBanner:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">  </span><span class="nl">home:</span><span class="w"> </span><span class="n">PoseTrackingScreen</span><span class="p">(),</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="p">);</span>
</span></code></pre></div>
<p><strong>Memory Profiling 内存分析</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1"># Launch with memory profiling 使用内存分析启动</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>flutter<span class="w"> </span>run<span class="w"> </span>--profile<span class="w"> </span>--trace-skia
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="c1"># Open DevTools 打开DevTools</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>flutter<span class="w"> </span>pub<span class="w"> </span>global<span class="w"> </span>activate<span class="w"> </span>devtools
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>flutter<span class="w"> </span>pub<span class="w"> </span>global<span class="w"> </span>run<span class="w"> </span>devtools
</span></code></pre></div>
<h3 id="34-gestures-and-interactions">3.4 Gestures and Interactions 手势与交互<a class="headerlink" href="#34-gestures-and-interactions" title="Permanent link">&para;</a></h3>
<p><strong>Quick Toggle Gestures 快速切换手势</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">GestureAwareCamera</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">StatelessWidget</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">  </span><span class="n">Widget</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">GestureDetector</span><span class="p">(</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">      </span><span class="c1">// Double-tap: Toggle all overlays 双击：切换所有覆盖层</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">      </span><span class="nl">onDoubleTap:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">        </span><span class="n">setState</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">overlaysEnabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">overlaysEnabled</span><span class="p">);</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="w">      </span><span class="c1">// Swipe down: Show/hide metrics bar 向下滑动：显示/隐藏指标栏</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="w">      </span><span class="nl">onVerticalDragEnd:</span><span class="w"> </span><span class="p">(</span><span class="n">details</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">details</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">pixelsPerSecond</span><span class="p">.</span><span class="n">dy</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="w">          </span><span class="n">toggleMetricsBar</span><span class="p">();</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="w">      </span><span class="c1">// Long-press: Freeze frame (post-action review) 长按：冻结帧（动作后回顾）</span>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="w">      </span><span class="nl">onLongPress:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="w">        </span><span class="n">freezeFrame</span><span class="p">();</span>
</span><span id="__span-19-20"><a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-19-21"><a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a>
</span><span id="__span-19-22"><a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a><span class="w">      </span><span class="nl">child:</span><span class="w"> </span><span class="n">CameraPreview</span><span class="p">(),</span>
</span><span id="__span-19-23"><a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-19-24"><a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-19-25"><a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="35-real-time-overlay-design">3.5 Real-Time Overlay Design 实时覆盖层设计<a class="headerlink" href="#35-real-time-overlay-design" title="Permanent link">&para;</a></h3>
<p><strong>Ghost Avatar Transparency 幽灵头像透明度</strong> (50% opacity recommended 推荐50%不透明度):</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">GhostSkeleton</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">StatelessWidget</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">  </span><span class="n">Widget</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">CustomPaint</span><span class="p">(</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">      </span><span class="nl">painter:</span><span class="w"> </span><span class="n">SkeletonPainter</span><span class="p">(</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">        </span><span class="nl">keypoints:</span><span class="w"> </span><span class="n">idealPose</span><span class="p">,</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">        </span><span class="nl">color:</span><span class="w"> </span><span class="n">Color</span><span class="p">(</span><span class="mh">0xFF4CAF50</span><span class="p">),</span><span class="w">  </span><span class="c1">// Green for correct pose 绿色表示正确姿态</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">        </span><span class="nl">opacity:</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w">              </span><span class="c1">// 50% transparency 50%透明度</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">        </span><span class="nl">strokeWidth:</span><span class="w"> </span><span class="m">3.0</span><span class="p">,</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">      </span><span class="p">),</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Live Skeleton (100% opacity) 实时骨架（100%不透明度）</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="n">CustomPaint</span><span class="p">(</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">  </span><span class="nl">painter:</span><span class="w"> </span><span class="n">SkeletonPainter</span><span class="p">(</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">    </span><span class="nl">keypoints:</span><span class="w"> </span><span class="n">livePose</span><span class="p">,</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="nl">color:</span><span class="w"> </span><span class="n">Color</span><span class="p">(</span><span class="mh">0xFFE0F7FF</span><span class="p">),</span><span class="w">  </span><span class="c1">// Light blue 浅蓝色</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">    </span><span class="nl">opacity:</span><span class="w"> </span><span class="m">1.0</span><span class="p">,</span><span class="w">              </span><span class="c1">// Fully opaque 完全不透明</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">    </span><span class="nl">strokeWidth:</span><span class="w"> </span><span class="m">4.0</span><span class="p">,</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">  </span><span class="p">),</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="p">);</span>
</span></code></pre></div>
<p><strong>User Settings for Transparency 透明度用户设置</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="n">Slider</span><span class="p">(</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">  </span><span class="nl">value:</span><span class="w"> </span><span class="n">ghostOpacity</span><span class="p">,</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">  </span><span class="nl">min:</span><span class="w"> </span><span class="m">0.3</span><span class="p">,</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">  </span><span class="nl">max:</span><span class="w"> </span><span class="m">0.7</span><span class="p">,</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">  </span><span class="nl">divisions:</span><span class="w"> </span><span class="m">8</span><span class="p">,</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">  </span><span class="nl">label:</span><span class="w"> </span><span class="s1">&#39;</span><span class="si">${</span><span class="p">(</span><span class="n">ghostOpacity</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">100</span><span class="p">).</span><span class="n">round</span><span class="p">()</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">,</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">  </span><span class="nl">onChanged:</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">setState</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">ghostOpacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">),</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="p">);</span>
</span></code></pre></div>
<hr />
<h2 id="4-ble-sensor-communication-ble">4. BLE Sensor Communication BLE传感器通信<a class="headerlink" href="#4-ble-sensor-communication-ble" title="Permanent link">&para;</a></h2>
<h3 id="41-esp32-s3-connection-architecture-esp32-s3">4.1 ESP32-S3 Connection Architecture ESP32-S3连接架构<a class="headerlink" href="#41-esp32-s3-connection-architecture-esp32-s3" title="Permanent link">&para;</a></h3>
<p><strong>BLE Stack BLE协议栈</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>ESP32-S3 (Peripheral 外围设备)
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>  ↓ BLE GATT Server GATT服务器
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>  ↓ 6 IMU Sensors @ 100Hz 6个IMU传感器@100Hz
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>  ↓ Data 数据: 12 bytes/packet × 6 sensors × 100 Hz = 57.6 kbps
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>  ↓
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>Flutter App (Central 中心设备)
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>  ↓ flutter_reactive_ble plugin
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>  ↓ Parse sensor data 解析传感器数据
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>  ↓ Fuse with pose estimation 与姿态估计融合
</span></code></pre></div>
<p><strong>Connection Parameters 连接参数</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>Connection Interval 连接间隔: 7.5ms (fast 快速)
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>Slave Latency 从设备延迟: 0
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>Supervision Timeout 监督超时: 4000ms
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>MTU: 185 bytes (Bluetooth 4.2+)
</span></code></pre></div>
<h3 id="42-flutter-ble-integration-flutter-ble">4.2 Flutter BLE Integration Flutter BLE集成<a class="headerlink" href="#42-flutter-ble-integration-flutter-ble" title="Permanent link">&para;</a></h3>
<p><strong>Installation 安装</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1"># pubspec.yaml</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="nt">dependencies</span><span class="p">:</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">  </span><span class="nt">flutter_reactive_ble</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^5.2.0</span><span class="w">  </span><span class="c1"># Production-grade (Philips Hue uses this) 生产级（飞利浦Hue使用）</span>
</span></code></pre></div>
<p><strong>Connection Manager 连接管理器</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flutter_reactive_ble/flutter_reactive_ble.dart&#39;</span><span class="p">;</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="kd">class</span><span class="w"> </span><span class="nc">IMUSensorManager</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">FlutterReactiveBle</span><span class="w"> </span><span class="n">ble</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FlutterReactiveBle</span><span class="p">();</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">StreamController</span><span class="o">&lt;</span><span class="n">SensorData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dataController</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StreamController</span><span class="p">.</span><span class="n">broadcast</span><span class="p">();</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">DiscoveredDevice</span><span class="o">&gt;</span><span class="w"> </span><span class="n">connectedDevices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">  </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">SensorData</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">dataStream</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">dataController</span><span class="p">.</span><span class="n">stream</span><span class="p">;</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">scanAndConnect</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">    </span><span class="c1">// Scan for IMU sensors (ESP32-S3 devices)</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">    </span><span class="c1">// 扫描IMU传感器（ESP32-S3设备）</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">    </span><span class="n">ble</span><span class="p">.</span><span class="n">scanForDevices</span><span class="p">(</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="w">      </span><span class="nl">withServices:</span><span class="w"> </span><span class="p">[</span><span class="n">Uuid</span><span class="p">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;4fafc201-1fb5-459e-8fcc-c5c9c331914b&#39;</span><span class="p">)],</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="w">      </span><span class="nl">scanMode:</span><span class="w"> </span><span class="n">ScanMode</span><span class="p">.</span><span class="n">lowLatency</span><span class="p">,</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="w">    </span><span class="p">).</span><span class="n">listen</span><span class="p">((</span><span class="n">device</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">device</span><span class="p">.</span><span class="n">name</span><span class="p">.</span><span class="n">startsWith</span><span class="p">(</span><span class="s1">&#39;IMU_&#39;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="w">        </span><span class="kd">await</span><span class="w"> </span><span class="n">_connectDevice</span><span class="p">(</span><span class="n">device</span><span class="p">);</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="w">    </span><span class="c1">// Stop scan after 10 seconds 10秒后停止扫描</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a><span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">delayed</span><span class="p">(</span><span class="n">Duration</span><span class="p">(</span><span class="nl">seconds:</span><span class="w"> </span><span class="m">10</span><span class="p">));</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a><span class="w">    </span><span class="n">ble</span><span class="p">.</span><span class="n">deinitialize</span><span class="p">();</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_connectDevice</span><span class="p">(</span><span class="n">DiscoveredDevice</span><span class="w"> </span><span class="n">device</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a><span class="w">    </span><span class="c1">// Connect to device 连接设备</span>
</span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a><span class="w">    </span><span class="n">ble</span><span class="p">.</span><span class="n">connectToDevice</span><span class="p">(</span><span class="nl">id:</span><span class="w"> </span><span class="n">device</span><span class="p">.</span><span class="n">id</span><span class="p">).</span><span class="n">listen</span><span class="p">((</span><span class="n">connectionState</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-30"><a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">connectionState</span><span class="p">.</span><span class="n">connectionState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DeviceConnectionState</span><span class="p">.</span><span class="n">connected</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-31"><a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a><span class="w">        </span><span class="n">connectedDevices</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">device</span><span class="p">);</span>
</span><span id="__span-26-32"><a id="__codelineno-26-32" name="__codelineno-26-32" href="#__codelineno-26-32"></a><span class="w">        </span><span class="kd">await</span><span class="w"> </span><span class="n">_subscribeToNotifications</span><span class="p">(</span><span class="n">device</span><span class="p">);</span>
</span><span id="__span-26-33"><a id="__codelineno-26-33" name="__codelineno-26-33" href="#__codelineno-26-33"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-26-34"><a id="__codelineno-26-34" name="__codelineno-26-34" href="#__codelineno-26-34"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-26-35"><a id="__codelineno-26-35" name="__codelineno-26-35" href="#__codelineno-26-35"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-26-36"><a id="__codelineno-26-36" name="__codelineno-26-36" href="#__codelineno-26-36"></a>
</span><span id="__span-26-37"><a id="__codelineno-26-37" name="__codelineno-26-37" href="#__codelineno-26-37"></a><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_subscribeToNotifications</span><span class="p">(</span><span class="n">DiscoveredDevice</span><span class="w"> </span><span class="n">device</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-38"><a id="__codelineno-26-38" name="__codelineno-26-38" href="#__codelineno-26-38"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">characteristic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">QualifiedCharacteristic</span><span class="p">(</span>
</span><span id="__span-26-39"><a id="__codelineno-26-39" name="__codelineno-26-39" href="#__codelineno-26-39"></a><span class="w">      </span><span class="nl">serviceId:</span><span class="w"> </span><span class="n">Uuid</span><span class="p">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;4fafc201-1fb5-459e-8fcc-c5c9c331914b&#39;</span><span class="p">),</span>
</span><span id="__span-26-40"><a id="__codelineno-26-40" name="__codelineno-26-40" href="#__codelineno-26-40"></a><span class="w">      </span><span class="nl">characteristicId:</span><span class="w"> </span><span class="n">Uuid</span><span class="p">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;beb5483e-36e1-4688-b7f5-ea07361b26a8&#39;</span><span class="p">),</span>
</span><span id="__span-26-41"><a id="__codelineno-26-41" name="__codelineno-26-41" href="#__codelineno-26-41"></a><span class="w">      </span><span class="nl">deviceId:</span><span class="w"> </span><span class="n">device</span><span class="p">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-26-42"><a id="__codelineno-26-42" name="__codelineno-26-42" href="#__codelineno-26-42"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-26-43"><a id="__codelineno-26-43" name="__codelineno-26-43" href="#__codelineno-26-43"></a>
</span><span id="__span-26-44"><a id="__codelineno-26-44" name="__codelineno-26-44" href="#__codelineno-26-44"></a><span class="w">    </span><span class="c1">// Subscribe to sensor data notifications (100 Hz stream)</span>
</span><span id="__span-26-45"><a id="__codelineno-26-45" name="__codelineno-26-45" href="#__codelineno-26-45"></a><span class="w">    </span><span class="c1">// 订阅传感器数据通知（100 Hz流）</span>
</span><span id="__span-26-46"><a id="__codelineno-26-46" name="__codelineno-26-46" href="#__codelineno-26-46"></a><span class="w">    </span><span class="n">ble</span><span class="p">.</span><span class="n">subscribeToCharacteristic</span><span class="p">(</span><span class="n">characteristic</span><span class="p">).</span><span class="n">listen</span><span class="p">((</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-47"><a id="__codelineno-26-47" name="__codelineno-26-47" href="#__codelineno-26-47"></a><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">sensorData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_parseSensorPacket</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
</span><span id="__span-26-48"><a id="__codelineno-26-48" name="__codelineno-26-48" href="#__codelineno-26-48"></a><span class="w">      </span><span class="n">dataController</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">sensorData</span><span class="p">);</span>
</span><span id="__span-26-49"><a id="__codelineno-26-49" name="__codelineno-26-49" href="#__codelineno-26-49"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-26-50"><a id="__codelineno-26-50" name="__codelineno-26-50" href="#__codelineno-26-50"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-26-51"><a id="__codelineno-26-51" name="__codelineno-26-51" href="#__codelineno-26-51"></a>
</span><span id="__span-26-52"><a id="__codelineno-26-52" name="__codelineno-26-52" href="#__codelineno-26-52"></a><span class="w">  </span><span class="n">SensorData</span><span class="w"> </span><span class="n">_parseSensorPacket</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bytes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-53"><a id="__codelineno-26-53" name="__codelineno-26-53" href="#__codelineno-26-53"></a><span class="w">    </span><span class="c1">// Parse 12-byte packet: timestamp(4) + accel(6) + gyro(6)</span>
</span><span id="__span-26-54"><a id="__codelineno-26-54" name="__codelineno-26-54" href="#__codelineno-26-54"></a><span class="w">    </span><span class="c1">// 解析12字节数据包：时间戳(4) + 加速度(6) + 陀螺仪(6)</span>
</span><span id="__span-26-55"><a id="__codelineno-26-55" name="__codelineno-26-55" href="#__codelineno-26-55"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ByteData</span><span class="p">.</span><span class="n">sublistView</span><span class="p">(</span><span class="n">Uint8List</span><span class="p">.</span><span class="n">fromList</span><span class="p">(</span><span class="n">bytes</span><span class="p">));</span>
</span><span id="__span-26-56"><a id="__codelineno-26-56" name="__codelineno-26-56" href="#__codelineno-26-56"></a>
</span><span id="__span-26-57"><a id="__codelineno-26-57" name="__codelineno-26-57" href="#__codelineno-26-57"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">SensorData</span><span class="p">(</span>
</span><span id="__span-26-58"><a id="__codelineno-26-58" name="__codelineno-26-58" href="#__codelineno-26-58"></a><span class="w">      </span><span class="nl">timestamp:</span><span class="w"> </span><span class="n">buffer</span><span class="p">.</span><span class="n">getUint32</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">Endian</span><span class="p">.</span><span class="n">little</span><span class="p">),</span>
</span><span id="__span-26-59"><a id="__codelineno-26-59" name="__codelineno-26-59" href="#__codelineno-26-59"></a><span class="w">      </span><span class="nl">accel:</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span>
</span><span id="__span-26-60"><a id="__codelineno-26-60" name="__codelineno-26-60" href="#__codelineno-26-60"></a><span class="w">        </span><span class="n">buffer</span><span class="p">.</span><span class="n">getInt16</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">Endian</span><span class="p">.</span><span class="n">little</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">32768.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">16.0</span><span class="p">,</span><span class="w">   </span><span class="c1">// ±16g</span>
</span><span id="__span-26-61"><a id="__codelineno-26-61" name="__codelineno-26-61" href="#__codelineno-26-61"></a><span class="w">        </span><span class="n">buffer</span><span class="p">.</span><span class="n">getInt16</span><span class="p">(</span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="n">Endian</span><span class="p">.</span><span class="n">little</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">32768.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">16.0</span><span class="p">,</span>
</span><span id="__span-26-62"><a id="__codelineno-26-62" name="__codelineno-26-62" href="#__codelineno-26-62"></a><span class="w">        </span><span class="n">buffer</span><span class="p">.</span><span class="n">getInt16</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="n">Endian</span><span class="p">.</span><span class="n">little</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">32768.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">16.0</span><span class="p">,</span>
</span><span id="__span-26-63"><a id="__codelineno-26-63" name="__codelineno-26-63" href="#__codelineno-26-63"></a><span class="w">      </span><span class="p">),</span>
</span><span id="__span-26-64"><a id="__codelineno-26-64" name="__codelineno-26-64" href="#__codelineno-26-64"></a><span class="w">      </span><span class="nl">gyro:</span><span class="w"> </span><span class="n">Vector3</span><span class="p">(</span>
</span><span id="__span-26-65"><a id="__codelineno-26-65" name="__codelineno-26-65" href="#__codelineno-26-65"></a><span class="w">        </span><span class="n">buffer</span><span class="p">.</span><span class="n">getInt16</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">Endian</span><span class="p">.</span><span class="n">little</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">32768.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2000.0</span><span class="p">,</span><span class="w">  </span><span class="c1">// ±2000dps</span>
</span><span id="__span-26-66"><a id="__codelineno-26-66" name="__codelineno-26-66" href="#__codelineno-26-66"></a><span class="w">        </span><span class="n">buffer</span><span class="p">.</span><span class="n">getInt16</span><span class="p">(</span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="n">Endian</span><span class="p">.</span><span class="n">little</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">32768.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2000.0</span><span class="p">,</span>
</span><span id="__span-26-67"><a id="__codelineno-26-67" name="__codelineno-26-67" href="#__codelineno-26-67"></a><span class="w">        </span><span class="n">buffer</span><span class="p">.</span><span class="n">getInt16</span><span class="p">(</span><span class="m">14</span><span class="p">,</span><span class="w"> </span><span class="n">Endian</span><span class="p">.</span><span class="n">little</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">32768.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2000.0</span><span class="p">,</span>
</span><span id="__span-26-68"><a id="__codelineno-26-68" name="__codelineno-26-68" href="#__codelineno-26-68"></a><span class="w">      </span><span class="p">),</span>
</span><span id="__span-26-69"><a id="__codelineno-26-69" name="__codelineno-26-69" href="#__codelineno-26-69"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-26-70"><a id="__codelineno-26-70" name="__codelineno-26-70" href="#__codelineno-26-70"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-26-71"><a id="__codelineno-26-71" name="__codelineno-26-71" href="#__codelineno-26-71"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="43-data-streaming-optimization">4.3 Data Streaming Optimization 数据流优化<a class="headerlink" href="#43-data-streaming-optimization" title="Permanent link">&para;</a></h3>
<p><strong>Throughput 吞吐量</strong>: 1.35 Mbps (Flutter BLE performance Flutter BLE性能)</p>
<ul>
<li><strong>Required 需求</strong>: 57.6 kbps (6 IMUs × 100 Hz × 12 bytes)</li>
<li><strong>Available headroom 可用余量</strong>: 95.7% (excellent margin 优秀余量)</li>
</ul>
<p><strong>Packet Loss Mitigation 丢包缓解</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">PacketBuffer</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Queue</span><span class="o">&lt;</span><span class="n">SensorData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Queue</span><span class="p">();</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">droppedPackets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">addPacket</span><span class="p">(</span><span class="n">SensorData</span><span class="w"> </span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">buffer</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="w">      </span><span class="c1">// Buffer overflow: drop oldest packet 缓冲区溢出：丢弃最旧数据包</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="w">      </span><span class="n">buffer</span><span class="p">.</span><span class="n">removeFirst</span><span class="p">();</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="w">      </span><span class="n">droppedPackets</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="w">    </span><span class="n">buffer</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">getPacketLossRate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">droppedPackets</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">buffer</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">droppedPackets</span><span class="p">);</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="44-latency-requirements-100ms-end-to-end-100ms">4.4 Latency Requirements (&lt;100ms End-to-End) 延迟要求（端到端&lt;100ms）<a class="headerlink" href="#44-latency-requirements-100ms-end-to-end-100ms" title="Permanent link">&para;</a></h3>
<p><strong>Latency Budget 延迟预算</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>Camera Frame Capture 相机帧捕获:        16.7ms (60 FPS)
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>Pose Estimation (MediaPipe) 姿态估计:   30-50ms
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>BLE Data Fetch BLE数据获取:             12ms   (measured Flutter 测量的Flutter)
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>Sensor Fusion 传感器融合:               5-10ms
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>Rendering Update 渲染更新:              5-8ms
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>─────────────────────────────────────
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>Total 总计:                             ~70-97ms ✅ (within 100ms budget 在100ms预算内)
</span></code></pre></div>
<p><strong>Async Processing Pipeline 异步处理管道</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">RealtimePipeline</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">processFrame</span><span class="p">(</span><span class="n">CameraImage</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SensorData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">imuData</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">startTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">now</span><span class="p">();</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">    </span><span class="c1">// Parallel execution 并行执行</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">wait</span><span class="p">([</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">      </span><span class="n">compute</span><span class="p">(</span><span class="n">_poseEstimation</span><span class="p">,</span><span class="w"> </span><span class="n">image</span><span class="p">),</span><span class="w">     </span><span class="c1">// 30-50ms (isolate)</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">      </span><span class="n">compute</span><span class="p">(</span><span class="n">_sensorFusion</span><span class="p">,</span><span class="w"> </span><span class="n">imuData</span><span class="p">),</span><span class="w">     </span><span class="c1">// 5-10ms (isolate)</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="w">    </span><span class="p">]);</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">pose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">results</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Pose</span><span class="p">;</span>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">fusion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">results</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">FusionResult</span><span class="p">;</span>
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a>
</span><span id="__span-29-14"><a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="w">    </span><span class="c1">// Combine results 组合结果</span>
</span><span id="__span-29-15"><a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">combined</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">combineData</span><span class="p">(</span><span class="n">pose</span><span class="p">,</span><span class="w"> </span><span class="n">fusion</span><span class="p">);</span>
</span><span id="__span-29-16"><a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>
</span><span id="__span-29-17"><a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">latency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">difference</span><span class="p">(</span><span class="n">startTime</span><span class="p">);</span>
</span><span id="__span-29-18"><a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">latency</span><span class="p">.</span><span class="n">inMilliseconds</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-29-19"><a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="w">      </span><span class="n">logger</span><span class="p">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Latency exceeded 延迟超出: </span><span class="si">${</span><span class="n">latency</span><span class="p">.</span><span class="n">inMilliseconds</span><span class="si">}</span><span class="s1">ms&#39;</span><span class="p">);</span>
</span><span id="__span-29-20"><a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-29-21"><a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a>
</span><span id="__span-29-22"><a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a><span class="w">    </span><span class="n">updateVisualization</span><span class="p">(</span><span class="n">combined</span><span class="p">);</span>
</span><span id="__span-29-23"><a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-29-24"><a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="45-connection-management-reconnection-battery">4.5 Connection Management (Reconnection, Battery) 连接管理（重连、电池）<a class="headerlink" href="#45-connection-management-reconnection-battery" title="Permanent link">&para;</a></h3>
<p><strong>Auto-Reconnect 自动重连</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">BLEConnectionManager</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">monitorConnection</span><span class="p">(</span><span class="n">DiscoveredDevice</span><span class="w"> </span><span class="n">device</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">    </span><span class="n">ble</span><span class="p">.</span><span class="n">connectToDevice</span><span class="p">(</span><span class="nl">id:</span><span class="w"> </span><span class="n">device</span><span class="p">.</span><span class="n">id</span><span class="p">).</span><span class="n">listen</span><span class="p">(</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">      </span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">connectionState</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">          </span><span class="k">case</span><span class="w"> </span><span class="n">DeviceConnectionState</span><span class="p">.</span><span class="nl">connected:</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="w">            </span><span class="n">onConnected</span><span class="p">(</span><span class="n">device</span><span class="p">);</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="w">          </span><span class="k">case</span><span class="w"> </span><span class="n">DeviceConnectionState</span><span class="p">.</span><span class="nl">disconnected:</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="w">            </span><span class="n">onDisconnected</span><span class="p">(</span><span class="n">device</span><span class="p">);</span>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="w">            </span><span class="n">attemptReconnect</span><span class="p">(</span><span class="n">device</span><span class="p">);</span><span class="w">  </span><span class="c1">// 尝试重连</span>
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-30-15"><a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a><span class="w">      </span><span class="nl">onError:</span><span class="w"> </span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-16"><a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a><span class="w">        </span><span class="n">logger</span><span class="p">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Connection error 连接错误: </span><span class="si">$</span><span class="n">error</span><span class="s1">&#39;</span><span class="p">);</span>
</span><span id="__span-30-17"><a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a><span class="w">        </span><span class="n">attemptReconnect</span><span class="p">(</span><span class="n">device</span><span class="p">);</span>
</span><span id="__span-30-18"><a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-30-19"><a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-30-20"><a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-30-21"><a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a>
</span><span id="__span-30-22"><a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">attemptReconnect</span><span class="p">(</span><span class="n">DiscoveredDevice</span><span class="w"> </span><span class="n">device</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-23"><a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a><span class="w">    </span><span class="c1">// Exponential backoff: 1s, 2s, 4s, 8s 指数退避</span>
</span><span id="__span-30-24"><a id="__codelineno-30-24" name="__codelineno-30-24" href="#__codelineno-30-24"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">attempt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">attempt</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">4</span><span class="p">;</span><span class="w"> </span><span class="n">attempt</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-25"><a id="__codelineno-30-25" name="__codelineno-30-25" href="#__codelineno-30-25"></a><span class="w">      </span><span class="kd">await</span><span class="w"> </span><span class="n">Future</span><span class="p">.</span><span class="n">delayed</span><span class="p">(</span><span class="n">Duration</span><span class="p">(</span><span class="nl">seconds:</span><span class="w"> </span><span class="n">pow</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">attempt</span><span class="p">).</span><span class="n">toInt</span><span class="p">()));</span>
</span><span id="__span-30-26"><a id="__codelineno-30-26" name="__codelineno-30-26" href="#__codelineno-30-26"></a>
</span><span id="__span-30-27"><a id="__codelineno-30-27" name="__codelineno-30-27" href="#__codelineno-30-27"></a><span class="w">      </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-28"><a id="__codelineno-30-28" name="__codelineno-30-28" href="#__codelineno-30-28"></a><span class="w">        </span><span class="kd">await</span><span class="w"> </span><span class="n">_connectDevice</span><span class="p">(</span><span class="n">device</span><span class="p">);</span>
</span><span id="__span-30-29"><a id="__codelineno-30-29" name="__codelineno-30-29" href="#__codelineno-30-29"></a><span class="w">        </span><span class="n">logger</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Reconnected after 重连成功于 </span><span class="si">${</span><span class="n">attempt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="si">}</span><span class="s1"> attempts 次尝试&#39;</span><span class="p">);</span>
</span><span id="__span-30-30"><a id="__codelineno-30-30" name="__codelineno-30-30" href="#__codelineno-30-30"></a><span class="w">        </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-30-31"><a id="__codelineno-30-31" name="__codelineno-30-31" href="#__codelineno-30-31"></a><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-32"><a id="__codelineno-30-32" name="__codelineno-30-32" href="#__codelineno-30-32"></a><span class="w">        </span><span class="n">logger</span><span class="p">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Reconnect attempt 重连尝试 </span><span class="si">${</span><span class="n">attempt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="si">}</span><span class="s1"> failed 失败&#39;</span><span class="p">);</span>
</span><span id="__span-30-33"><a id="__codelineno-30-33" name="__codelineno-30-33" href="#__codelineno-30-33"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-30-34"><a id="__codelineno-30-34" name="__codelineno-30-34" href="#__codelineno-30-34"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-30-35"><a id="__codelineno-30-35" name="__codelineno-30-35" href="#__codelineno-30-35"></a>
</span><span id="__span-30-36"><a id="__codelineno-30-36" name="__codelineno-30-36" href="#__codelineno-30-36"></a><span class="w">    </span><span class="n">showReconnectFailedDialog</span><span class="p">();</span><span class="w">  </span><span class="c1">// 显示重连失败对话框</span>
</span><span id="__span-30-37"><a id="__codelineno-30-37" name="__codelineno-30-37" href="#__codelineno-30-37"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-30-38"><a id="__codelineno-30-38" name="__codelineno-30-38" href="#__codelineno-30-38"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Battery Impact 电池影响</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1">// Disable BLE scanning when battery low 低电量时禁用BLE扫描</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">batteryLevel</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0.15</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">  </span><span class="n">ble</span><span class="p">.</span><span class="n">stopScan</span><span class="p">();</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">  </span><span class="n">showLowBatteryWarning</span><span class="p">();</span><span class="w">  </span><span class="c1">// 显示低电量警告</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="p">}</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="c1">// Reduce connection interval during low battery 低电量期间降低连接间隔</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">batteryLevel</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0.3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="w">  </span><span class="c1">// Request longer connection interval to save power 请求更长连接间隔以节省电量</span>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="w">  </span><span class="n">requestConnectionUpdate</span><span class="p">(</span>
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="w">    </span><span class="nl">interval:</span><span class="w"> </span><span class="m">30</span><span class="p">,</span><span class="w">  </span><span class="c1">// 30ms (vs 7.5ms normal 对比正常7.5ms)</span>
</span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a><span class="w">    </span><span class="nl">latency:</span><span class="w"> </span><span class="m">4</span><span class="p">,</span>
</span><span id="__span-31-13"><a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-31-14"><a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a><span class="p">}</span>
</span></code></pre></div>
<hr />
<h2 id="5-commercial-mobile-apps-analysis">5. Commercial Mobile Apps Analysis 商业移动应用分析<a class="headerlink" href="#5-commercial-mobile-apps-analysis" title="Permanent link">&para;</a></h2>
<h3 id="51-peloton-app-architecture-insights-peloton">5.1 Peloton App Architecture Insights Peloton应用架构洞察<a class="headerlink" href="#51-peloton-app-architecture-insights-peloton" title="Permanent link">&para;</a></h3>
<p><strong>Key Learnings 关键学习</strong>:</p>
<ul>
<li><strong>Offline-First 离线优先</strong>: Download workouts for offline use 下载训练供离线使用 (no network dependency during exercise 运动期间无网络依赖)</li>
<li><strong>Leaderboard Integration 排行榜集成</strong>: Real-time performance comparison 实时性能比较 (motivational 激励性)</li>
<li><strong>Metrics Dashboard 指标仪表板</strong>: Clear, large fonts for at-a-glance metrics 清晰的大字体一目了然</li>
<li><strong>Audio Cues 音频提示</strong>: Voice prompts for form corrections 语音提示纠正动作 (hands-free feedback 免手反馈)</li>
</ul>
<p><strong>Applicable to Movement Chain AI 适用于Movement Chain AI</strong>:</p>
<ul>
<li>Cache pose templates locally for offline analysis 本地缓存姿态模板供离线分析</li>
<li>Show real-time comparison with previous personal best 显示与之前个人最佳的实时比较</li>
<li>Large, high-contrast metric display 大型高对比度指标显示 (rep count 次数, quality score 质量评分)</li>
</ul>
<h3 id="52-apple-fitness-integration-approach-apple-fitness">5.2 Apple Fitness+ Integration Approach Apple Fitness+集成方法<a class="headerlink" href="#52-apple-fitness-integration-approach-apple-fitness" title="Permanent link">&para;</a></h3>
<p><strong>Key Learnings 关键学习</strong>:</p>
<ul>
<li><strong>Seamless Watch Integration 无缝手表集成</strong>: Apple Watch for heart rate 心率, iPhone/iPad for video 视频</li>
<li><strong>Burn Bar 燃烧条</strong>: Comparative visualization 比较可视化 (you vs others 你对比其他人)</li>
<li><strong>Instructor Overlay 教练覆盖</strong>: Transparent metrics don't obscure instructor 透明指标不遮挡教练</li>
<li><strong>Accessibility 可访问性</strong>: Full VoiceOver support for vision-impaired users 为视障用户提供完整VoiceOver支持</li>
</ul>
<p><strong>Applicable to Movement Chain AI 适用于Movement Chain AI</strong>:</p>
<ul>
<li>BLE sensor integration BLE传感器集成 (ESP32-S3 as "watch" 作为"手表")</li>
<li>Non-intrusive overlay design 非侵入式覆盖层设计 (50% ghost avatar opacity 50%幽灵头像不透明度)</li>
<li>Voice feedback for accessibility 可访问性语音反馈</li>
</ul>
<h3 id="53-nike-training-club-ux-patterns-nike-training-club">5.3 Nike Training Club UX Patterns Nike Training Club用户体验模式<a class="headerlink" href="#53-nike-training-club-ux-patterns-nike-training-club" title="Permanent link">&para;</a></h3>
<p><strong>Key Learnings 关键学习</strong> (Source: Stormotion Fitness App UX):</p>
<ul>
<li><strong>Minimalist Design 极简设计</strong>: White background + neon accents 白色背景+荧光强调 (reduces distractions 减少干扰)</li>
<li><strong>Progress Visualization 进度可视化</strong>: Stat cards pulse gently when loading 统计卡片加载时轻轻跳动 (Strava-style Strava风格)</li>
<li><strong>High-Contrast Interface 高对比度界面</strong>: Essential for outdoor use 户外使用必备 (bright sunlight 强烈阳光)</li>
<li><strong>Touch Targets 触控目标</strong>: 56×56px minimum (Material Design standard Material Design标准)</li>
</ul>
<p><strong>Applicable to Movement Chain AI 适用于Movement Chain AI</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1">// High-contrast mode for outdoor use 户外使用高对比度模式</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="kd">final</span><span class="w"> </span><span class="n">colorScheme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">brightness</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Brightness</span><span class="p">.</span><span class="n">light</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="w">  </span><span class="o">?</span><span class="w"> </span><span class="n">ColorScheme</span><span class="p">.</span><span class="n">light</span><span class="p">(</span><span class="nl">primary:</span><span class="w"> </span><span class="n">Colors</span><span class="p">.</span><span class="n">deepOrange</span><span class="p">)</span><span class="w">  </span><span class="c1">// Neon accent 荧光强调</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="n">ColorScheme</span><span class="p">.</span><span class="n">dark</span><span class="p">(</span><span class="nl">primary:</span><span class="w"> </span><span class="n">Colors</span><span class="p">.</span><span class="n">cyan</span><span class="p">);</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="c1">// Pulsing stat cards 跳动统计卡片</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="n">AnimatedOpacity</span><span class="p">(</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="w">  </span><span class="nl">opacity:</span><span class="w"> </span><span class="n">isLoading</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="m">0.5</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="m">1.0</span><span class="p">,</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="w">  </span><span class="nl">duration:</span><span class="w"> </span><span class="n">Duration</span><span class="p">(</span><span class="nl">milliseconds:</span><span class="w"> </span><span class="m">800</span><span class="p">),</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="w">  </span><span class="nl">curve:</span><span class="w"> </span><span class="n">Curves</span><span class="p">.</span><span class="n">easeInOut</span><span class="p">,</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="w">  </span><span class="nl">child:</span><span class="w"> </span><span class="n">StatCard</span><span class="p">(</span><span class="nl">value:</span><span class="w"> </span><span class="n">repCount</span><span class="p">),</span>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="p">);</span>
</span></code></pre></div>
<h3 id="54-common-patterns-across-apps">5.4 Common Patterns Across Apps 跨应用通用模式<a class="headerlink" href="#54-common-patterns-across-apps" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Feature 功能</th>
<th>Peloton</th>
<th>Apple Fitness+</th>
<th>Nike Training</th>
<th>Movement Chain AI</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Real-time Metrics 实时指标</strong></td>
<td>✅ HR, Power 心率、功率</td>
<td>✅ HR, Calories 心率、卡路里</td>
<td>✅ Time, Reps 时间、次数</td>
<td>✅ Pose Quality, Reps 姿态质量、次数</td>
</tr>
<tr>
<td><strong>Audio Cues 音频提示</strong></td>
<td>✅ Music + Coach 音乐+教练</td>
<td>✅ Instructor 教练</td>
<td>✅ Coach 教练</td>
<td>✅ Form Corrections 动作纠正</td>
</tr>
<tr>
<td><strong>Offline Mode 离线模式</strong></td>
<td>✅ Download 下载</td>
<td>❌ Streaming only 仅流式</td>
<td>✅ Download 下载</td>
<td>✅ Cached Poses 缓存姿态</td>
</tr>
<tr>
<td><strong>Wearable Integration 可穿戴集成</strong></td>
<td>✅ Heart rate strap 心率带</td>
<td>✅ Apple Watch</td>
<td>✅ Heart rate monitor 心率监测器</td>
<td>✅ ESP32-S3 IMUs</td>
</tr>
<tr>
<td><strong>Social Features 社交功能</strong></td>
<td>✅ Leaderboard 排行榜</td>
<td>✅ Burn Bar 燃烧条</td>
<td>✅ Challenges 挑战</td>
<td>⚠️ Future feature 未来功能</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="6-mobile-sdks-libraries-sdk">6. Mobile SDKs &amp; Libraries 移动端SDK与库<a class="headerlink" href="#6-mobile-sdks-libraries-sdk" title="Permanent link">&para;</a></h2>
<h3 id="61-quickpose-iosreact-native">6.1 QuickPose (iOS/React Native)<a class="headerlink" href="#61-quickpose-iosreact-native" title="Permanent link">&para;</a></h3>
<p><strong>Overview 概述</strong>:</p>
<ul>
<li><strong>Platform 平台</strong>: iOS (primary 主要), Android (roadmap 路线图)</li>
<li><strong>Technology 技术</strong>: MediaPipe/BlazePose enhanced 增强版</li>
<li><strong>Performance 性能</strong>: 120 FPS on iOS (4x faster than MediaPipe iOS上比MediaPipe快4倍)</li>
</ul>
<p><strong>Pricing 定价</strong>:</p>
<ul>
<li><strong>Free Tier 免费层</strong>: Up to 100 monthly active devices 最多100个月活跃设备</li>
<li><strong>Launch Tier 启动层</strong>: Pay-per-device after 100 users 100用户后按设备付费</li>
</ul>
<p><strong>Features 功能</strong>:</p>
<ul>
<li>Rep counting 计数, range of motion 运动范围, form feedback 动作反馈</li>
<li>33 keypoints (MediaPipe landmark set MediaPipe关键点集)</li>
<li>Audio feedback for corrections 纠正音频反馈</li>
<li>Built-in skeleton visualization 内置骨架可视化</li>
</ul>
<p><strong>When to Use 何时使用</strong>:</p>
<ul>
<li>iOS-first applications iOS优先应用</li>
<li>Need production-ready code quickly 需要快速生产就绪代码</li>
<li>Acceptable to be locked into QuickPose ecosystem 可接受QuickPose生态系统锁定</li>
</ul>
<p><strong>Why We're Not Using It 我们为什么不用</strong>:</p>
<ul>
<li>iOS-only (Android in roadmap, not production 仅iOS，Android在路线图非生产)</li>
<li>Vendor lock-in risk 供应商锁定风险</li>
<li>Custom needs require more flexibility 自定义需求需要更多灵活性</li>
</ul>
<h3 id="62-kinestex-multi-framework">6.2 KinesteX (Multi-Framework)<a class="headerlink" href="#62-kinestex-multi-framework" title="Permanent link">&para;</a></h3>
<p><strong>Overview 概述</strong>:</p>
<ul>
<li><strong>Platforms 平台</strong>: Flutter, SwiftUI, React Native, Kotlin, PWA</li>
<li><strong>Technology 技术</strong>: Proprietary CV (90%+ accuracy 专有计算机视觉，90%+准确率)</li>
<li><strong>Exercise Library 练习库</strong>: 400+ expertly crafted exercises 400+专业设计练习</li>
</ul>
<p><strong>Pricing 定价</strong>:</p>
<ul>
<li>Contact for pricing (not publicly disclosed 联系询价，未公开披露)</li>
</ul>
<p><strong>Features 功能</strong>:</p>
<ul>
<li>Real-time motion tracking with voice prompts 带语音提示的实时动作追踪</li>
<li>White-label (fully customizable UI 白标，完全可定制界面)</li>
<li>HIPAA compliant, on-device processing HIPAA合规，设备端处理</li>
<li>Multi-platform lightweight packages 多平台轻量级包</li>
</ul>
<p><strong>When to Use 何时使用</strong>:</p>
<ul>
<li>Need comprehensive exercise library 需要全面练习库</li>
<li>White-label fitness app 白标健身应用</li>
<li>Multi-platform from day one 第一天起多平台</li>
</ul>
<p><strong>Why We're Not Using It 我们为什么不用</strong>:</p>
<ul>
<li>Closed-source (can't customize ML pipeline 闭源，无法自定义ML管道)</li>
<li>Pricing unknown (potential cost concern 定价未知，潜在成本问题)</li>
<li>Our focus is movement analysis, not exercise library 我们专注于动作分析，非练习库</li>
</ul>
<h3 id="63-sency-cross-platform">6.3 Sency (Cross-Platform)<a class="headerlink" href="#63-sency-cross-platform" title="Permanent link">&para;</a></h3>
<p><strong>Overview 概述</strong>:</p>
<ul>
<li><strong>Platforms 平台</strong>: iOS, Android, Web</li>
<li><strong>Technology 技术</strong>: Proprietary AI with edge computing 专有AI与边缘计算</li>
<li><strong>Processing 处理</strong>: All on-device (zero cloud latency 全部设备端，零云延迟)</li>
</ul>
<p><strong>Pricing 定价</strong>:</p>
<ul>
<li><strong>Free Tier 免费层</strong>: Up to 100 unique active users 最多100个唯一活跃用户</li>
<li><strong>Pay-as-you-go 按需付费</strong>: After 100 users, per-active-user billing 100用户后按活跃用户计费</li>
</ul>
<p><strong>Features 功能</strong>:</p>
<ul>
<li>Initial assessment 初始评估 (4-step onboarding 4步入职, 8 mobility tests 8个活动度测试)</li>
<li>Injury risk assessment 受伤风险评估</li>
<li>Personalized workout plans 个性化训练计划</li>
<li>Real-time posture correction 实时姿态纠正</li>
</ul>
<p><strong>When to Use 何时使用</strong>:</p>
<ul>
<li>Need initial fitness assessment 需要初始健身评估</li>
<li>Cross-platform required 需要跨平台</li>
<li>Privacy-critical (GDPR compliant, edge processing GDPR合规，边缘处理)</li>
</ul>
<p><strong>Why We're Not Using It 我们为什么不用</strong>:</p>
<ul>
<li>Overkill for our MVP MVP过度设计 (we don't need assessment workflows 不需要评估工作流)</li>
<li>Prefer open-source foundation 更喜欢开源基础 (MediaPipe → RTMPose)</li>
</ul>
<h3 id="64-mediapipe-official-plugins">6.4 MediaPipe Official Plugins 官方插件<a class="headerlink" href="#64-mediapipe-official-plugins" title="Permanent link">&para;</a></h3>
<p><strong>Why We Chose This 我们为什么选择</strong> ✅:</p>
<ul>
<li><strong>Open-source 开源</strong>: Apache 2.0 (no vendor lock-in 无供应商锁定)</li>
<li><strong>Cross-platform 跨平台</strong>: iOS, Android, Web, Desktop</li>
<li><strong>3D Pose 3D姿态</strong>: Real-world coordinates 真实世界坐标 (essential for biomechanics 生物力学必备)</li>
<li><strong>Mature ecosystem 成熟生态</strong>: Extensive tutorials, community support 大量教程、社区支持</li>
<li><strong>Google backing Google支持</strong>: Long-term maintenance guaranteed 长期维护保证</li>
</ul>
<p><strong>Flutter Integration Flutter集成</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nt">dependencies</span><span class="p">:</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">  </span><span class="nt">google_mlkit_pose_detection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^0.10.0</span>
</span></code></pre></div>
<p><strong>Advantages 优势</strong>:</p>
<ul>
<li>33 keypoints with visibility/presence scores 33个带可见性/存在性评分关键点</li>
<li>Free forever (no per-user costs 永久免费，无每用户成本)</li>
<li>Can migrate to RTMPose later 之后可迁移到RTMPose (similar pipeline 相似管道)</li>
</ul>
<p><strong>Disadvantages 劣势</strong>:</p>
<ul>
<li>30-40 FPS (slower than QuickPose's 120 FPS 比QuickPose的120 FPS慢)</li>
<li>Single-person only (can't track multiple people 仅单人，无法追踪多人)</li>
</ul>
<h3 id="65-comparison-and-recommendations">6.5 Comparison and Recommendations 比较与建议<a class="headerlink" href="#65-comparison-and-recommendations" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>SDK</th>
<th>Platform Support 平台支持</th>
<th>Pricing 定价</th>
<th>Performance 性能</th>
<th>Open-Source 开源</th>
<th>Recommendation 建议</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>MediaPipe</strong> ✅</td>
<td>iOS, Android, Web</td>
<td>FREE 免费</td>
<td>30-40 FPS</td>
<td>✅ Yes</td>
<td><strong>Use for MVP 用于MVP</strong></td>
</tr>
<tr>
<td>QuickPose</td>
<td>iOS only 仅iOS</td>
<td>Free (100 devices 100设备)</td>
<td>120 FPS</td>
<td>❌ No</td>
<td>iOS-only apps 仅iOS应用</td>
</tr>
<tr>
<td>KinesteX</td>
<td>Multi-framework 多框架</td>
<td>Contact 联系</td>
<td>90%+ accuracy 准确率</td>
<td>❌ No</td>
<td>Exercise library apps 练习库应用</td>
</tr>
<tr>
<td>Sency</td>
<td>iOS, Android, Web</td>
<td>Free (100 users 100用户)</td>
<td>Excellent 优秀</td>
<td>❌ No</td>
<td>Assessment workflows 评估工作流</td>
</tr>
</tbody>
</table>
<p><strong>Our Strategy 我们的策略</strong>:</p>
<ol>
<li><strong>MVP</strong>: MediaPipe (fastest development 最快开发, free 免费, 3D pose 3D姿态)</li>
<li><strong>Optimization 优化</strong>: Migrate to RTMPose (2-3x faster 快2-3倍, higher accuracy 更高精度)</li>
<li><strong>Future 未来</strong>: Evaluate QuickPose if iOS performance becomes critical 如果iOS性能成为关键则评估QuickPose</li>
</ol>
<hr />
<h2 id="7-implementation-examples">7. Implementation Examples 实现示例<a class="headerlink" href="#7-implementation-examples" title="Permanent link">&para;</a></h2>
<h3 id="71-flutter-mediapipe-setup-flutter-mediapipe">7.1 Flutter + MediaPipe Setup Flutter + MediaPipe设置<a class="headerlink" href="#71-flutter-mediapipe-setup-flutter-mediapipe" title="Permanent link">&para;</a></h3>
<p><strong>Complete Integration 完整集成</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:camera/camera.dart&#39;</span><span class="p">;</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:google_mlkit_pose_detection/google_mlkit_pose_detection.dart&#39;</span><span class="p">;</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;dart:isolate&#39;</span><span class="p">;</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="kd">class</span><span class="w"> </span><span class="nc">RealtimePoseEstimator</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">StatefulWidget</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="w">  </span><span class="n">_RealtimePoseEstimatorState</span><span class="w"> </span><span class="n">createState</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">_RealtimePoseEstimatorState</span><span class="p">();</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="p">}</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="kd">class</span><span class="w"> </span><span class="nc">_RealtimePoseEstimatorState</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">State</span><span class="o">&lt;</span><span class="n">RealtimePoseEstimator</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">CameraController</span><span class="w"> </span><span class="n">_camera</span><span class="p">;</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="w">  </span><span class="kd">late</span><span class="w"> </span><span class="n">PoseDetector</span><span class="w"> </span><span class="n">_poseDetector</span><span class="p">;</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">_isProcessing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="w">  </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Pose</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_poses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a>
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">initState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">initState</span><span class="p">();</span>
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a><span class="w">    </span><span class="n">_initializeCamera</span><span class="p">();</span>
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a><span class="w">    </span><span class="n">_initializePoseDetector</span><span class="p">();</span>
</span><span id="__span-34-21"><a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-34-22"><a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a>
</span><span id="__span-34-23"><a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a><span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_initializeCamera</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-24"><a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">cameras</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">availableCameras</span><span class="p">();</span>
</span><span id="__span-34-25"><a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a><span class="w">    </span><span class="n">_camera</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CameraController</span><span class="p">(</span>
</span><span id="__span-34-26"><a id="__codelineno-34-26" name="__codelineno-34-26" href="#__codelineno-34-26"></a><span class="w">      </span><span class="n">cameras</span><span class="p">.</span><span class="n">first</span><span class="p">,</span>
</span><span id="__span-34-27"><a id="__codelineno-34-27" name="__codelineno-34-27" href="#__codelineno-34-27"></a><span class="w">      </span><span class="n">ResolutionPreset</span><span class="p">.</span><span class="n">medium</span><span class="p">,</span>
</span><span id="__span-34-28"><a id="__codelineno-34-28" name="__codelineno-34-28" href="#__codelineno-34-28"></a><span class="w">      </span><span class="nl">enableAudio:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-34-29"><a id="__codelineno-34-29" name="__codelineno-34-29" href="#__codelineno-34-29"></a><span class="w">      </span><span class="nl">imageFormatGroup:</span><span class="w"> </span><span class="n">ImageFormatGroup</span><span class="p">.</span><span class="n">yuv420</span><span class="p">,</span><span class="w">  </span><span class="c1">// Efficient format 高效格式</span>
</span><span id="__span-34-30"><a id="__codelineno-34-30" name="__codelineno-34-30" href="#__codelineno-34-30"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-34-31"><a id="__codelineno-34-31" name="__codelineno-34-31" href="#__codelineno-34-31"></a><span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">_camera</span><span class="p">.</span><span class="n">initialize</span><span class="p">();</span>
</span><span id="__span-34-32"><a id="__codelineno-34-32" name="__codelineno-34-32" href="#__codelineno-34-32"></a><span class="w">    </span><span class="n">_camera</span><span class="p">.</span><span class="n">startImageStream</span><span class="p">(</span><span class="n">_onCameraFrame</span><span class="p">);</span>
</span><span id="__span-34-33"><a id="__codelineno-34-33" name="__codelineno-34-33" href="#__codelineno-34-33"></a><span class="w">    </span><span class="n">setState</span><span class="p">(()</span><span class="w"> </span><span class="p">{});</span>
</span><span id="__span-34-34"><a id="__codelineno-34-34" name="__codelineno-34-34" href="#__codelineno-34-34"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-34-35"><a id="__codelineno-34-35" name="__codelineno-34-35" href="#__codelineno-34-35"></a>
</span><span id="__span-34-36"><a id="__codelineno-34-36" name="__codelineno-34-36" href="#__codelineno-34-36"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">_initializePoseDetector</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-37"><a id="__codelineno-34-37" name="__codelineno-34-37" href="#__codelineno-34-37"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PoseDetectorOptions</span><span class="p">(</span>
</span><span id="__span-34-38"><a id="__codelineno-34-38" name="__codelineno-34-38" href="#__codelineno-34-38"></a><span class="w">      </span><span class="nl">model:</span><span class="w"> </span><span class="n">PoseDetectionModel</span><span class="p">.</span><span class="n">accurate</span><span class="p">,</span>
</span><span id="__span-34-39"><a id="__codelineno-34-39" name="__codelineno-34-39" href="#__codelineno-34-39"></a><span class="w">      </span><span class="nl">mode:</span><span class="w"> </span><span class="n">PoseDetectionMode</span><span class="p">.</span><span class="n">stream</span><span class="p">,</span>
</span><span id="__span-34-40"><a id="__codelineno-34-40" name="__codelineno-34-40" href="#__codelineno-34-40"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-34-41"><a id="__codelineno-34-41" name="__codelineno-34-41" href="#__codelineno-34-41"></a><span class="w">    </span><span class="n">_poseDetector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PoseDetector</span><span class="p">(</span><span class="nl">options:</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>
</span><span id="__span-34-42"><a id="__codelineno-34-42" name="__codelineno-34-42" href="#__codelineno-34-42"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-34-43"><a id="__codelineno-34-43" name="__codelineno-34-43" href="#__codelineno-34-43"></a>
</span><span id="__span-34-44"><a id="__codelineno-34-44" name="__codelineno-34-44" href="#__codelineno-34-44"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">_onCameraFrame</span><span class="p">(</span><span class="n">CameraImage</span><span class="w"> </span><span class="n">image</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-45"><a id="__codelineno-34-45" name="__codelineno-34-45" href="#__codelineno-34-45"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_isProcessing</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span><span class="w">  </span><span class="c1">// Skip frame if still processing 仍在处理则跳过帧</span>
</span><span id="__span-34-46"><a id="__codelineno-34-46" name="__codelineno-34-46" href="#__codelineno-34-46"></a><span class="w">    </span><span class="n">_isProcessing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-34-47"><a id="__codelineno-34-47" name="__codelineno-34-47" href="#__codelineno-34-47"></a>
</span><span id="__span-34-48"><a id="__codelineno-34-48" name="__codelineno-34-48" href="#__codelineno-34-48"></a><span class="w">    </span><span class="c1">// Convert to InputImage 转换为InputImage</span>
</span><span id="__span-34-49"><a id="__codelineno-34-49" name="__codelineno-34-49" href="#__codelineno-34-49"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">inputImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_convertToInputImage</span><span class="p">(</span><span class="n">image</span><span class="p">);</span>
</span><span id="__span-34-50"><a id="__codelineno-34-50" name="__codelineno-34-50" href="#__codelineno-34-50"></a>
</span><span id="__span-34-51"><a id="__codelineno-34-51" name="__codelineno-34-51" href="#__codelineno-34-51"></a><span class="w">    </span><span class="c1">// Run pose detection (30-50ms on modern devices)</span>
</span><span id="__span-34-52"><a id="__codelineno-34-52" name="__codelineno-34-52" href="#__codelineno-34-52"></a><span class="w">    </span><span class="c1">// 运行姿态检测（现代设备上30-50毫秒）</span>
</span><span id="__span-34-53"><a id="__codelineno-34-53" name="__codelineno-34-53" href="#__codelineno-34-53"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">poses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">_poseDetector</span><span class="p">.</span><span class="n">processImage</span><span class="p">(</span><span class="n">inputImage</span><span class="p">);</span>
</span><span id="__span-34-54"><a id="__codelineno-34-54" name="__codelineno-34-54" href="#__codelineno-34-54"></a>
</span><span id="__span-34-55"><a id="__codelineno-34-55" name="__codelineno-34-55" href="#__codelineno-34-55"></a><span class="w">    </span><span class="n">setState</span><span class="p">(()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-56"><a id="__codelineno-34-56" name="__codelineno-34-56" href="#__codelineno-34-56"></a><span class="w">      </span><span class="n">_poses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poses</span><span class="p">;</span>
</span><span id="__span-34-57"><a id="__codelineno-34-57" name="__codelineno-34-57" href="#__codelineno-34-57"></a><span class="w">      </span><span class="n">_isProcessing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
</span><span id="__span-34-58"><a id="__codelineno-34-58" name="__codelineno-34-58" href="#__codelineno-34-58"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-34-59"><a id="__codelineno-34-59" name="__codelineno-34-59" href="#__codelineno-34-59"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-34-60"><a id="__codelineno-34-60" name="__codelineno-34-60" href="#__codelineno-34-60"></a>
</span><span id="__span-34-61"><a id="__codelineno-34-61" name="__codelineno-34-61" href="#__codelineno-34-61"></a><span class="w">  </span><span class="n">InputImage</span><span class="w"> </span><span class="n">_convertToInputImage</span><span class="p">(</span><span class="n">CameraImage</span><span class="w"> </span><span class="n">image</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-62"><a id="__codelineno-34-62" name="__codelineno-34-62" href="#__codelineno-34-62"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">WriteBuffer</span><span class="w"> </span><span class="n">allBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WriteBuffer</span><span class="p">();</span>
</span><span id="__span-34-63"><a id="__codelineno-34-63" name="__codelineno-34-63" href="#__codelineno-34-63"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Plane</span><span class="w"> </span><span class="n">plane</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">image</span><span class="p">.</span><span class="n">planes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-64"><a id="__codelineno-34-64" name="__codelineno-34-64" href="#__codelineno-34-64"></a><span class="w">      </span><span class="n">allBytes</span><span class="p">.</span><span class="n">putUint8List</span><span class="p">(</span><span class="n">plane</span><span class="p">.</span><span class="n">bytes</span><span class="p">);</span>
</span><span id="__span-34-65"><a id="__codelineno-34-65" name="__codelineno-34-65" href="#__codelineno-34-65"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-34-66"><a id="__codelineno-34-66" name="__codelineno-34-66" href="#__codelineno-34-66"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">allBytes</span><span class="p">.</span><span class="n">done</span><span class="p">().</span><span class="n">buffer</span><span class="p">.</span><span class="n">asUint8List</span><span class="p">();</span>
</span><span id="__span-34-67"><a id="__codelineno-34-67" name="__codelineno-34-67" href="#__codelineno-34-67"></a>
</span><span id="__span-34-68"><a id="__codelineno-34-68" name="__codelineno-34-68" href="#__codelineno-34-68"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">imageSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Size</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">width</span><span class="p">.</span><span class="n">toDouble</span><span class="p">(),</span><span class="w"> </span><span class="n">image</span><span class="p">.</span><span class="n">height</span><span class="p">.</span><span class="n">toDouble</span><span class="p">());</span>
</span><span id="__span-34-69"><a id="__codelineno-34-69" name="__codelineno-34-69" href="#__codelineno-34-69"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">imageRotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InputImageRotation</span><span class="p">.</span><span class="n">rotation0deg</span><span class="p">;</span>
</span><span id="__span-34-70"><a id="__codelineno-34-70" name="__codelineno-34-70" href="#__codelineno-34-70"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">inputImageFormat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InputImageFormatValue</span><span class="p">.</span><span class="n">fromRawValue</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">format</span><span class="p">.</span><span class="n">raw</span><span class="p">)</span><span class="w"> </span><span class="o">??</span>
</span><span id="__span-34-71"><a id="__codelineno-34-71" name="__codelineno-34-71" href="#__codelineno-34-71"></a><span class="w">        </span><span class="n">InputImageFormat</span><span class="p">.</span><span class="n">nv21</span><span class="p">;</span>
</span><span id="__span-34-72"><a id="__codelineno-34-72" name="__codelineno-34-72" href="#__codelineno-34-72"></a>
</span><span id="__span-34-73"><a id="__codelineno-34-73" name="__codelineno-34-73" href="#__codelineno-34-73"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">planeData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">image</span><span class="p">.</span><span class="n">planes</span><span class="p">.</span><span class="n">map</span><span class="p">((</span><span class="n">plane</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-74"><a id="__codelineno-34-74" name="__codelineno-34-74" href="#__codelineno-34-74"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">InputImagePlaneMetadata</span><span class="p">(</span>
</span><span id="__span-34-75"><a id="__codelineno-34-75" name="__codelineno-34-75" href="#__codelineno-34-75"></a><span class="w">        </span><span class="nl">bytesPerRow:</span><span class="w"> </span><span class="n">plane</span><span class="p">.</span><span class="n">bytesPerRow</span><span class="p">,</span>
</span><span id="__span-34-76"><a id="__codelineno-34-76" name="__codelineno-34-76" href="#__codelineno-34-76"></a><span class="w">        </span><span class="nl">height:</span><span class="w"> </span><span class="n">plane</span><span class="p">.</span><span class="n">height</span><span class="p">,</span>
</span><span id="__span-34-77"><a id="__codelineno-34-77" name="__codelineno-34-77" href="#__codelineno-34-77"></a><span class="w">        </span><span class="nl">width:</span><span class="w"> </span><span class="n">plane</span><span class="p">.</span><span class="n">width</span><span class="p">,</span>
</span><span id="__span-34-78"><a id="__codelineno-34-78" name="__codelineno-34-78" href="#__codelineno-34-78"></a><span class="w">      </span><span class="p">);</span>
</span><span id="__span-34-79"><a id="__codelineno-34-79" name="__codelineno-34-79" href="#__codelineno-34-79"></a><span class="w">    </span><span class="p">}).</span><span class="n">toList</span><span class="p">();</span>
</span><span id="__span-34-80"><a id="__codelineno-34-80" name="__codelineno-34-80" href="#__codelineno-34-80"></a>
</span><span id="__span-34-81"><a id="__codelineno-34-81" name="__codelineno-34-81" href="#__codelineno-34-81"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">inputImageData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InputImageData</span><span class="p">(</span>
</span><span id="__span-34-82"><a id="__codelineno-34-82" name="__codelineno-34-82" href="#__codelineno-34-82"></a><span class="w">      </span><span class="nl">size:</span><span class="w"> </span><span class="n">imageSize</span><span class="p">,</span>
</span><span id="__span-34-83"><a id="__codelineno-34-83" name="__codelineno-34-83" href="#__codelineno-34-83"></a><span class="w">      </span><span class="nl">imageRotation:</span><span class="w"> </span><span class="n">imageRotation</span><span class="p">,</span>
</span><span id="__span-34-84"><a id="__codelineno-34-84" name="__codelineno-34-84" href="#__codelineno-34-84"></a><span class="w">      </span><span class="nl">inputImageFormat:</span><span class="w"> </span><span class="n">inputImageFormat</span><span class="p">,</span>
</span><span id="__span-34-85"><a id="__codelineno-34-85" name="__codelineno-34-85" href="#__codelineno-34-85"></a><span class="w">      </span><span class="nl">planeData:</span><span class="w"> </span><span class="n">planeData</span><span class="p">,</span>
</span><span id="__span-34-86"><a id="__codelineno-34-86" name="__codelineno-34-86" href="#__codelineno-34-86"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-34-87"><a id="__codelineno-34-87" name="__codelineno-34-87" href="#__codelineno-34-87"></a>
</span><span id="__span-34-88"><a id="__codelineno-34-88" name="__codelineno-34-88" href="#__codelineno-34-88"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">InputImage</span><span class="p">.</span><span class="n">fromBytes</span><span class="p">(</span>
</span><span id="__span-34-89"><a id="__codelineno-34-89" name="__codelineno-34-89" href="#__codelineno-34-89"></a><span class="w">      </span><span class="nl">bytes:</span><span class="w"> </span><span class="n">bytes</span><span class="p">,</span>
</span><span id="__span-34-90"><a id="__codelineno-34-90" name="__codelineno-34-90" href="#__codelineno-34-90"></a><span class="w">      </span><span class="nl">inputImageData:</span><span class="w"> </span><span class="n">inputImageData</span><span class="p">,</span>
</span><span id="__span-34-91"><a id="__codelineno-34-91" name="__codelineno-34-91" href="#__codelineno-34-91"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-34-92"><a id="__codelineno-34-92" name="__codelineno-34-92" href="#__codelineno-34-92"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-34-93"><a id="__codelineno-34-93" name="__codelineno-34-93" href="#__codelineno-34-93"></a>
</span><span id="__span-34-94"><a id="__codelineno-34-94" name="__codelineno-34-94" href="#__codelineno-34-94"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-34-95"><a id="__codelineno-34-95" name="__codelineno-34-95" href="#__codelineno-34-95"></a><span class="w">  </span><span class="n">Widget</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-96"><a id="__codelineno-34-96" name="__codelineno-34-96" href="#__codelineno-34-96"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">_camera</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">isInitialized</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-97"><a id="__codelineno-34-97" name="__codelineno-34-97" href="#__codelineno-34-97"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">Center</span><span class="p">(</span><span class="nl">child:</span><span class="w"> </span><span class="n">CircularProgressIndicator</span><span class="p">());</span>
</span><span id="__span-34-98"><a id="__codelineno-34-98" name="__codelineno-34-98" href="#__codelineno-34-98"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-34-99"><a id="__codelineno-34-99" name="__codelineno-34-99" href="#__codelineno-34-99"></a>
</span><span id="__span-34-100"><a id="__codelineno-34-100" name="__codelineno-34-100" href="#__codelineno-34-100"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Stack</span><span class="p">(</span>
</span><span id="__span-34-101"><a id="__codelineno-34-101" name="__codelineno-34-101" href="#__codelineno-34-101"></a><span class="w">      </span><span class="nl">children:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-34-102"><a id="__codelineno-34-102" name="__codelineno-34-102" href="#__codelineno-34-102"></a><span class="w">        </span><span class="n">CameraPreview</span><span class="p">(</span><span class="n">_camera</span><span class="p">),</span>
</span><span id="__span-34-103"><a id="__codelineno-34-103" name="__codelineno-34-103" href="#__codelineno-34-103"></a><span class="w">        </span><span class="n">CustomPaint</span><span class="p">(</span>
</span><span id="__span-34-104"><a id="__codelineno-34-104" name="__codelineno-34-104" href="#__codelineno-34-104"></a><span class="w">          </span><span class="nl">painter:</span><span class="w"> </span><span class="n">PosePainter</span><span class="p">(</span><span class="n">_poses</span><span class="p">),</span>
</span><span id="__span-34-105"><a id="__codelineno-34-105" name="__codelineno-34-105" href="#__codelineno-34-105"></a><span class="w">          </span><span class="nl">child:</span><span class="w"> </span><span class="n">Container</span><span class="p">(),</span>
</span><span id="__span-34-106"><a id="__codelineno-34-106" name="__codelineno-34-106" href="#__codelineno-34-106"></a><span class="w">        </span><span class="p">),</span>
</span><span id="__span-34-107"><a id="__codelineno-34-107" name="__codelineno-34-107" href="#__codelineno-34-107"></a><span class="w">      </span><span class="p">],</span>
</span><span id="__span-34-108"><a id="__codelineno-34-108" name="__codelineno-34-108" href="#__codelineno-34-108"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-34-109"><a id="__codelineno-34-109" name="__codelineno-34-109" href="#__codelineno-34-109"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-34-110"><a id="__codelineno-34-110" name="__codelineno-34-110" href="#__codelineno-34-110"></a>
</span><span id="__span-34-111"><a id="__codelineno-34-111" name="__codelineno-34-111" href="#__codelineno-34-111"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-34-112"><a id="__codelineno-34-112" name="__codelineno-34-112" href="#__codelineno-34-112"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">dispose</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-113"><a id="__codelineno-34-113" name="__codelineno-34-113" href="#__codelineno-34-113"></a><span class="w">    </span><span class="n">_camera</span><span class="p">.</span><span class="n">dispose</span><span class="p">();</span>
</span><span id="__span-34-114"><a id="__codelineno-34-114" name="__codelineno-34-114" href="#__codelineno-34-114"></a><span class="w">    </span><span class="n">_poseDetector</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span><span id="__span-34-115"><a id="__codelineno-34-115" name="__codelineno-34-115" href="#__codelineno-34-115"></a><span class="w">    </span><span class="k">super</span><span class="p">.</span><span class="n">dispose</span><span class="p">();</span>
</span><span id="__span-34-116"><a id="__codelineno-34-116" name="__codelineno-34-116" href="#__codelineno-34-116"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-34-117"><a id="__codelineno-34-117" name="__codelineno-34-117" href="#__codelineno-34-117"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="72-ble-sensor-integration-code-ble">7.2 BLE Sensor Integration Code BLE传感器集成代码<a class="headerlink" href="#72-ble-sensor-integration-code-ble" title="Permanent link">&para;</a></h3>
<p><strong>See Section 4.2 参见4.2节</strong> for complete BLE integration example 完整BLE集成示例.</p>
<p><strong>Quick Start 快速开始</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="kd">final</span><span class="w"> </span><span class="n">imuManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IMUSensorManager</span><span class="p">();</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="kd">await</span><span class="w"> </span><span class="n">imuManager</span><span class="p">.</span><span class="n">scanAndConnect</span><span class="p">();</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="c1">// Listen to sensor stream 监听传感器流</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="n">imuManager</span><span class="p">.</span><span class="n">dataStream</span><span class="p">.</span><span class="n">listen</span><span class="p">((</span><span class="n">sensorData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">  </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;Accel 加速度: </span><span class="si">${</span><span class="n">sensorData</span><span class="p">.</span><span class="n">accel</span><span class="si">}</span><span class="s1">, Gyro 陀螺仪: </span><span class="si">${</span><span class="n">sensorData</span><span class="p">.</span><span class="n">gyro</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">);</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">  </span><span class="n">fuseSensorData</span><span class="p">(</span><span class="n">sensorData</span><span class="p">);</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="p">});</span>
</span></code></pre></div>
<h3 id="73-real-time-visualization-rendering">7.3 Real-Time Visualization Rendering 实时可视化渲染<a class="headerlink" href="#73-real-time-visualization-rendering" title="Permanent link">&para;</a></h3>
<p><strong>Skeleton Overlay Painter 骨架覆盖层绘制器</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">SkeletonPainter</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">CustomPainter</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Pose</span><span class="o">&gt;</span><span class="w"> </span><span class="n">poses</span><span class="p">;</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Color</span><span class="w"> </span><span class="n">color</span><span class="p">;</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">opacity</span><span class="p">;</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">strokeWidth</span><span class="p">;</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="w">  </span><span class="n">SkeletonPainter</span><span class="p">({</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="w">    </span><span class="kd">required</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">poses</span><span class="p">,</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Colors</span><span class="p">.</span><span class="n">white</span><span class="p">,</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">opacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.0</span><span class="p">,</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">strokeWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4.0</span><span class="p">,</span>
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a><span class="w">  </span><span class="p">});</span>
</span><span id="__span-36-13"><a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a>
</span><span id="__span-36-14"><a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-36-15"><a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">paint</span><span class="p">(</span><span class="n">Canvas</span><span class="w"> </span><span class="n">canvas</span><span class="p">,</span><span class="w"> </span><span class="n">Size</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-16"><a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">poses</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-36-17"><a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a>
</span><span id="__span-36-18"><a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">paint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Paint</span><span class="p">()</span>
</span><span id="__span-36-19"><a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a><span class="w">      </span><span class="p">..</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">.</span><span class="n">withOpacity</span><span class="p">(</span><span class="n">opacity</span><span class="p">)</span>
</span><span id="__span-36-20"><a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a><span class="w">      </span><span class="p">..</span><span class="n">strokeWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strokeWidth</span>
</span><span id="__span-36-21"><a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a><span class="w">      </span><span class="p">..</span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PaintingStyle</span><span class="p">.</span><span class="n">stroke</span><span class="p">;</span>
</span><span id="__span-36-22"><a id="__codelineno-36-22" name="__codelineno-36-22" href="#__codelineno-36-22"></a>
</span><span id="__span-36-23"><a id="__codelineno-36-23" name="__codelineno-36-23" href="#__codelineno-36-23"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">pose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poses</span><span class="p">.</span><span class="n">first</span><span class="p">;</span>
</span><span id="__span-36-24"><a id="__codelineno-36-24" name="__codelineno-36-24" href="#__codelineno-36-24"></a>
</span><span id="__span-36-25"><a id="__codelineno-36-25" name="__codelineno-36-25" href="#__codelineno-36-25"></a><span class="w">    </span><span class="c1">// Draw skeleton connections 绘制骨架连接</span>
</span><span id="__span-36-26"><a id="__codelineno-36-26" name="__codelineno-36-26" href="#__codelineno-36-26"></a><span class="w">    </span><span class="n">_drawConnection</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span><span class="w"> </span><span class="n">paint</span><span class="p">,</span><span class="w"> </span><span class="n">pose</span><span class="p">,</span><span class="w"> </span><span class="n">PoseLandmarkType</span><span class="p">.</span><span class="n">leftShoulder</span><span class="p">,</span><span class="w"> </span><span class="n">PoseLandmarkType</span><span class="p">.</span><span class="n">rightShoulder</span><span class="p">);</span>
</span><span id="__span-36-27"><a id="__codelineno-36-27" name="__codelineno-36-27" href="#__codelineno-36-27"></a><span class="w">    </span><span class="n">_drawConnection</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span><span class="w"> </span><span class="n">paint</span><span class="p">,</span><span class="w"> </span><span class="n">pose</span><span class="p">,</span><span class="w"> </span><span class="n">PoseLandmarkType</span><span class="p">.</span><span class="n">leftShoulder</span><span class="p">,</span><span class="w"> </span><span class="n">PoseLandmarkType</span><span class="p">.</span><span class="n">leftElbow</span><span class="p">);</span>
</span><span id="__span-36-28"><a id="__codelineno-36-28" name="__codelineno-36-28" href="#__codelineno-36-28"></a><span class="w">    </span><span class="n">_drawConnection</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span><span class="w"> </span><span class="n">paint</span><span class="p">,</span><span class="w"> </span><span class="n">pose</span><span class="p">,</span><span class="w"> </span><span class="n">PoseLandmarkType</span><span class="p">.</span><span class="n">leftElbow</span><span class="p">,</span><span class="w"> </span><span class="n">PoseLandmarkType</span><span class="p">.</span><span class="n">leftWrist</span><span class="p">);</span>
</span><span id="__span-36-29"><a id="__codelineno-36-29" name="__codelineno-36-29" href="#__codelineno-36-29"></a><span class="w">    </span><span class="c1">// ... continue for all body connections 继续所有身体连接</span>
</span><span id="__span-36-30"><a id="__codelineno-36-30" name="__codelineno-36-30" href="#__codelineno-36-30"></a>
</span><span id="__span-36-31"><a id="__codelineno-36-31" name="__codelineno-36-31" href="#__codelineno-36-31"></a><span class="w">    </span><span class="c1">// Draw joints as circles 将关节绘制为圆圈</span>
</span><span id="__span-36-32"><a id="__codelineno-36-32" name="__codelineno-36-32" href="#__codelineno-36-32"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">landmark</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">pose</span><span class="p">.</span><span class="n">landmarks</span><span class="p">.</span><span class="n">values</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-33"><a id="__codelineno-36-33" name="__codelineno-36-33" href="#__codelineno-36-33"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">landmark</span><span class="p">.</span><span class="n">likelihood</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-34"><a id="__codelineno-36-34" name="__codelineno-36-34" href="#__codelineno-36-34"></a><span class="w">        </span><span class="n">canvas</span><span class="p">.</span><span class="n">drawCircle</span><span class="p">(</span>
</span><span id="__span-36-35"><a id="__codelineno-36-35" name="__codelineno-36-35" href="#__codelineno-36-35"></a><span class="w">          </span><span class="n">Offset</span><span class="p">(</span><span class="n">landmark</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">landmark</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">),</span>
</span><span id="__span-36-36"><a id="__codelineno-36-36" name="__codelineno-36-36" href="#__codelineno-36-36"></a><span class="w">          </span><span class="m">5.0</span><span class="p">,</span>
</span><span id="__span-36-37"><a id="__codelineno-36-37" name="__codelineno-36-37" href="#__codelineno-36-37"></a><span class="w">          </span><span class="n">paint</span><span class="p">..</span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PaintingStyle</span><span class="p">.</span><span class="n">fill</span><span class="p">,</span>
</span><span id="__span-36-38"><a id="__codelineno-36-38" name="__codelineno-36-38" href="#__codelineno-36-38"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-36-39"><a id="__codelineno-36-39" name="__codelineno-36-39" href="#__codelineno-36-39"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-36-40"><a id="__codelineno-36-40" name="__codelineno-36-40" href="#__codelineno-36-40"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-36-41"><a id="__codelineno-36-41" name="__codelineno-36-41" href="#__codelineno-36-41"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-36-42"><a id="__codelineno-36-42" name="__codelineno-36-42" href="#__codelineno-36-42"></a>
</span><span id="__span-36-43"><a id="__codelineno-36-43" name="__codelineno-36-43" href="#__codelineno-36-43"></a><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">_drawConnection</span><span class="p">(</span><span class="n">Canvas</span><span class="w"> </span><span class="n">canvas</span><span class="p">,</span><span class="w"> </span><span class="n">Paint</span><span class="w"> </span><span class="n">paint</span><span class="p">,</span><span class="w"> </span><span class="n">Pose</span><span class="w"> </span><span class="n">pose</span><span class="p">,</span>
</span><span id="__span-36-44"><a id="__codelineno-36-44" name="__codelineno-36-44" href="#__codelineno-36-44"></a><span class="w">      </span><span class="n">PoseLandmarkType</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">PoseLandmarkType</span><span class="w"> </span><span class="n">end</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-45"><a id="__codelineno-36-45" name="__codelineno-36-45" href="#__codelineno-36-45"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">startLandmark</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pose</span><span class="p">.</span><span class="n">landmarks</span><span class="p">[</span><span class="n">start</span><span class="p">];</span>
</span><span id="__span-36-46"><a id="__codelineno-36-46" name="__codelineno-36-46" href="#__codelineno-36-46"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">endLandmark</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pose</span><span class="p">.</span><span class="n">landmarks</span><span class="p">[</span><span class="n">end</span><span class="p">];</span>
</span><span id="__span-36-47"><a id="__codelineno-36-47" name="__codelineno-36-47" href="#__codelineno-36-47"></a>
</span><span id="__span-36-48"><a id="__codelineno-36-48" name="__codelineno-36-48" href="#__codelineno-36-48"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">startLandmark</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">endLandmark</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-36-49"><a id="__codelineno-36-49" name="__codelineno-36-49" href="#__codelineno-36-49"></a><span class="w">        </span><span class="n">startLandmark</span><span class="p">.</span><span class="n">likelihood</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0.5</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">endLandmark</span><span class="p">.</span><span class="n">likelihood</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-50"><a id="__codelineno-36-50" name="__codelineno-36-50" href="#__codelineno-36-50"></a><span class="w">      </span><span class="n">canvas</span><span class="p">.</span><span class="n">drawLine</span><span class="p">(</span>
</span><span id="__span-36-51"><a id="__codelineno-36-51" name="__codelineno-36-51" href="#__codelineno-36-51"></a><span class="w">        </span><span class="n">Offset</span><span class="p">(</span><span class="n">startLandmark</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">startLandmark</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>
</span><span id="__span-36-52"><a id="__codelineno-36-52" name="__codelineno-36-52" href="#__codelineno-36-52"></a><span class="w">        </span><span class="n">Offset</span><span class="p">(</span><span class="n">endLandmark</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">endLandmark</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>
</span><span id="__span-36-53"><a id="__codelineno-36-53" name="__codelineno-36-53" href="#__codelineno-36-53"></a><span class="w">        </span><span class="n">paint</span><span class="p">,</span>
</span><span id="__span-36-54"><a id="__codelineno-36-54" name="__codelineno-36-54" href="#__codelineno-36-54"></a><span class="w">      </span><span class="p">);</span>
</span><span id="__span-36-55"><a id="__codelineno-36-55" name="__codelineno-36-55" href="#__codelineno-36-55"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-36-56"><a id="__codelineno-36-56" name="__codelineno-36-56" href="#__codelineno-36-56"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-36-57"><a id="__codelineno-36-57" name="__codelineno-36-57" href="#__codelineno-36-57"></a>
</span><span id="__span-36-58"><a id="__codelineno-36-58" name="__codelineno-36-58" href="#__codelineno-36-58"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-36-59"><a id="__codelineno-36-59" name="__codelineno-36-59" href="#__codelineno-36-59"></a><span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">shouldRepaint</span><span class="p">(</span><span class="n">SkeletonPainter</span><span class="w"> </span><span class="n">oldDelegate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-60"><a id="__codelineno-36-60" name="__codelineno-36-60" href="#__codelineno-36-60"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">poses</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">oldDelegate</span><span class="p">.</span><span class="n">poses</span><span class="p">;</span>
</span><span id="__span-36-61"><a id="__codelineno-36-61" name="__codelineno-36-61" href="#__codelineno-36-61"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-36-62"><a id="__codelineno-36-62" name="__codelineno-36-62" href="#__codelineno-36-62"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Error Arrow Overlay 错误箭头覆盖层</strong>:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">CorrectionArrow</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">StatelessWidget</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Offset</span><span class="w"> </span><span class="n">position</span><span class="p">;</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">direction</span><span class="p">;</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">severity</span><span class="p">;</span><span class="w">  </span><span class="c1">// 0.0 to 10.0 严重程度0.0到10.0</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="w">  </span><span class="n">Widget</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_getColorBySeverity</span><span class="p">(</span><span class="n">severity</span><span class="p">);</span>
</span><span id="__span-37-9"><a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_getLengthBySeverity</span><span class="p">(</span><span class="n">severity</span><span class="p">);</span>
</span><span id="__span-37-10"><a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a>
</span><span id="__span-37-11"><a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">CustomPaint</span><span class="p">(</span>
</span><span id="__span-37-12"><a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a><span class="w">      </span><span class="nl">painter:</span><span class="w"> </span><span class="n">ArrowPainter</span><span class="p">(</span>
</span><span id="__span-37-13"><a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a><span class="w">        </span><span class="nl">start:</span><span class="w"> </span><span class="n">position</span><span class="p">,</span>
</span><span id="__span-37-14"><a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a><span class="w">        </span><span class="nl">direction:</span><span class="w"> </span><span class="n">direction</span><span class="p">.</span><span class="n">normalized</span><span class="p">(),</span>
</span><span id="__span-37-15"><a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a><span class="w">        </span><span class="nl">length:</span><span class="w"> </span><span class="n">length</span><span class="p">,</span>
</span><span id="__span-37-16"><a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a><span class="w">        </span><span class="nl">color:</span><span class="w"> </span><span class="n">color</span><span class="p">,</span>
</span><span id="__span-37-17"><a id="__codelineno-37-17" name="__codelineno-37-17" href="#__codelineno-37-17"></a><span class="w">      </span><span class="p">),</span>
</span><span id="__span-37-18"><a id="__codelineno-37-18" name="__codelineno-37-18" href="#__codelineno-37-18"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-37-19"><a id="__codelineno-37-19" name="__codelineno-37-19" href="#__codelineno-37-19"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-37-20"><a id="__codelineno-37-20" name="__codelineno-37-20" href="#__codelineno-37-20"></a>
</span><span id="__span-37-21"><a id="__codelineno-37-21" name="__codelineno-37-21" href="#__codelineno-37-21"></a><span class="w">  </span><span class="n">Color</span><span class="w"> </span><span class="n">_getColorBySeverity</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">severity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-22"><a id="__codelineno-37-22" name="__codelineno-37-22" href="#__codelineno-37-22"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">severity</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">7.0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">Color</span><span class="p">(</span><span class="mh">0xFFC62828</span><span class="p">);</span><span class="w">  </span><span class="c1">// Red (critical 红色，严重)</span>
</span><span id="__span-37-23"><a id="__codelineno-37-23" name="__codelineno-37-23" href="#__codelineno-37-23"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">severity</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">4.0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">Color</span><span class="p">(</span><span class="mh">0xFFF9A825</span><span class="p">);</span><span class="w">  </span><span class="c1">// Amber (warning 琥珀色，警告)</span>
</span><span id="__span-37-24"><a id="__codelineno-37-24" name="__codelineno-37-24" href="#__codelineno-37-24"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Color</span><span class="p">(</span><span class="mh">0xFF00897B</span><span class="p">);</span><span class="w">                      </span><span class="c1">// Blue-green (good 蓝绿色，良好)</span>
</span><span id="__span-37-25"><a id="__codelineno-37-25" name="__codelineno-37-25" href="#__codelineno-37-25"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-37-26"><a id="__codelineno-37-26" name="__codelineno-37-26" href="#__codelineno-37-26"></a>
</span><span id="__span-37-27"><a id="__codelineno-37-27" name="__codelineno-37-27" href="#__codelineno-37-27"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">_getLengthBySeverity</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">severity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-28"><a id="__codelineno-37-28" name="__codelineno-37-28" href="#__codelineno-37-28"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">severity</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">10.0</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">20</span><span class="p">;</span><span class="w">  </span><span class="c1">// 20px to 80px 20px到80px</span>
</span><span id="__span-37-29"><a id="__codelineno-37-29" name="__codelineno-37-29" href="#__codelineno-37-29"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-37-30"><a id="__codelineno-37-30" name="__codelineno-37-30" href="#__codelineno-37-30"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="74-state-management-patterns">7.4 State Management Patterns 状态管理模式<a class="headerlink" href="#74-state-management-patterns" title="Permanent link">&para;</a></h3>
<p><strong>Recommended: Riverpod 推荐：Riverpod</strong> (Flutter best practice Flutter最佳实践):</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;package:flutter_riverpod/flutter_riverpod.dart&#39;</span><span class="p">;</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="c1">// Providers 提供器</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="kd">final</span><span class="w"> </span><span class="n">poseProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StateProvider</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Pose</span><span class="o">&gt;&gt;</span><span class="p">((</span><span class="n">ref</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[]);</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="kd">final</span><span class="w"> </span><span class="n">sensorDataProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StateProvider</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">SensorData</span><span class="o">&gt;&gt;</span><span class="p">((</span><span class="n">ref</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[]);</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="kd">final</span><span class="w"> </span><span class="n">errorsProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StateProvider</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ErrorReport</span><span class="o">&gt;&gt;</span><span class="p">((</span><span class="n">ref</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[]);</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="c1">// Combined state 组合状态</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="kd">final</span><span class="w"> </span><span class="n">feedbackStateProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Provider</span><span class="o">&lt;</span><span class="n">FeedbackState</span><span class="o">&gt;</span><span class="p">((</span><span class="n">ref</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">poses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ref</span><span class="p">.</span><span class="n">watch</span><span class="p">(</span><span class="n">poseProvider</span><span class="p">);</span>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">sensors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ref</span><span class="p">.</span><span class="n">watch</span><span class="p">(</span><span class="n">sensorDataProvider</span><span class="p">);</span>
</span><span id="__span-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ref</span><span class="p">.</span><span class="n">watch</span><span class="p">(</span><span class="n">errorsProvider</span><span class="p">);</span>
</span><span id="__span-38-13"><a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a>
</span><span id="__span-38-14"><a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">FeedbackState</span><span class="p">(</span>
</span><span id="__span-38-15"><a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a><span class="w">    </span><span class="nl">pose:</span><span class="w"> </span><span class="n">poses</span><span class="p">.</span><span class="n">isNotEmpty</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">poses</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
</span><span id="__span-38-16"><a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="w">    </span><span class="nl">sensorData:</span><span class="w"> </span><span class="n">sensors</span><span class="p">,</span>
</span><span id="__span-38-17"><a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="w">    </span><span class="nl">errors:</span><span class="w"> </span><span class="n">errors</span><span class="p">,</span>
</span><span id="__span-38-18"><a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-38-19"><a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a><span class="p">});</span>
</span><span id="__span-38-20"><a id="__codelineno-38-20" name="__codelineno-38-20" href="#__codelineno-38-20"></a>
</span><span id="__span-38-21"><a id="__codelineno-38-21" name="__codelineno-38-21" href="#__codelineno-38-21"></a><span class="c1">// UI consumption UI使用</span>
</span><span id="__span-38-22"><a id="__codelineno-38-22" name="__codelineno-38-22" href="#__codelineno-38-22"></a><span class="kd">class</span><span class="w"> </span><span class="nc">FeedbackOverlay</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ConsumerWidget</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-23"><a id="__codelineno-38-23" name="__codelineno-38-23" href="#__codelineno-38-23"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-38-24"><a id="__codelineno-38-24" name="__codelineno-38-24" href="#__codelineno-38-24"></a><span class="w">  </span><span class="n">Widget</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">WidgetRef</span><span class="w"> </span><span class="n">ref</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-25"><a id="__codelineno-38-25" name="__codelineno-38-25" href="#__codelineno-38-25"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">feedbackState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ref</span><span class="p">.</span><span class="n">watch</span><span class="p">(</span><span class="n">feedbackStateProvider</span><span class="p">);</span>
</span><span id="__span-38-26"><a id="__codelineno-38-26" name="__codelineno-38-26" href="#__codelineno-38-26"></a>
</span><span id="__span-38-27"><a id="__codelineno-38-27" name="__codelineno-38-27" href="#__codelineno-38-27"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Stack</span><span class="p">(</span>
</span><span id="__span-38-28"><a id="__codelineno-38-28" name="__codelineno-38-28" href="#__codelineno-38-28"></a><span class="w">      </span><span class="nl">children:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-38-29"><a id="__codelineno-38-29" name="__codelineno-38-29" href="#__codelineno-38-29"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">feedbackState</span><span class="p">.</span><span class="n">pose</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
</span><span id="__span-38-30"><a id="__codelineno-38-30" name="__codelineno-38-30" href="#__codelineno-38-30"></a><span class="w">          </span><span class="n">SkeletonRenderer</span><span class="p">(</span><span class="nl">pose:</span><span class="w"> </span><span class="n">feedbackState</span><span class="p">.</span><span class="n">pose</span><span class="o">!</span><span class="p">),</span>
</span><span id="__span-38-31"><a id="__codelineno-38-31" name="__codelineno-38-31" href="#__codelineno-38-31"></a>
</span><span id="__span-38-32"><a id="__codelineno-38-32" name="__codelineno-38-32" href="#__codelineno-38-32"></a><span class="w">        </span><span class="p">...</span><span class="n">feedbackState</span><span class="p">.</span><span class="n">errors</span><span class="p">.</span><span class="n">map</span><span class="p">((</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">CorrectionArrow</span><span class="p">(</span><span class="n">error</span><span class="p">)),</span>
</span><span id="__span-38-33"><a id="__codelineno-38-33" name="__codelineno-38-33" href="#__codelineno-38-33"></a><span class="w">      </span><span class="p">],</span>
</span><span id="__span-38-34"><a id="__codelineno-38-34" name="__codelineno-38-34" href="#__codelineno-38-34"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-38-35"><a id="__codelineno-38-35" name="__codelineno-38-35" href="#__codelineno-38-35"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-38-36"><a id="__codelineno-38-36" name="__codelineno-38-36" href="#__codelineno-38-36"></a><span class="p">}</span>
</span></code></pre></div>
<hr />
<h2 id="related-decisions">Related Decisions 相关决策<a class="headerlink" href="#related-decisions" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../../../design/decisions/0007-swift-ios-native/">ADR-0007: Swift iOS Native Development Swift iOS 原生开发</a> - Framework selection rationale 框架选择理由</li>
</ul>
<hr />
<h2 id="appendix-performance-benchmarking">Appendix: Performance Benchmarking 附录：性能基准测试<a class="headerlink" href="#appendix-performance-benchmarking" title="Permanent link">&para;</a></h2>
<h3 id="device-targets">Device Targets 设备目标<a class="headerlink" href="#device-targets" title="Permanent link">&para;</a></h3>
<p><strong>Mid-Range Baseline 中端基准</strong> (ADR-0007):</p>
<ul>
<li><strong>iOS</strong>: iPhone 11 (A13 Bionic, 4GB RAM)</li>
<li><strong>Android</strong>: Google Pixel 5 (Snapdragon 765G, 8GB RAM)</li>
</ul>
<p><strong>Expected Performance 预期性能</strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>iPhone 11:
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>  - Pose Estimation 姿态估计: 35-40 FPS (MediaPipe)
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>  - BLE Throughput BLE吞吐量: 1.2 Mbps
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>  - Battery Drain 电池消耗: 12-15%/hour 每小时
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>Pixel 5:
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>  - Pose Estimation 姿态估计: 30-35 FPS (MediaPipe)
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>  - BLE Throughput BLE吞吐量: 1.1 Mbps
</span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>  - Battery Drain 电池消耗: 14-18%/hour 每小时
</span></code></pre></div>
<h3 id="profiling-checklist">Profiling Checklist 性能分析检查清单<a class="headerlink" href="#profiling-checklist" title="Permanent link">&para;</a></h3>
<p><strong>Pre-Launch Benchmarks 发布前基准</strong>:</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Render pipeline maintains 60 FPS 渲染管道维持60 FPS (P95 &gt;55 FPS)</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Transparency overlay adds &lt;5ms per frame 透明覆盖层每帧增加&lt;5ms</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Memory usage &lt;500MB during peak rendering 峰值渲染期间内存使用&lt;500MB</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Battery drain &lt;15% per hour 每小时电池消耗&lt;15% (screen-on time 亮屏时间)</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> BLE haptic latency &lt;10ms BLE haptic延迟&lt;10ms (visual to tactile 视觉到触觉)</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Arrow animations smooth 箭头动画流畅 (no dropped frames 无丢帧)</li>
</ul>
<p><strong>Tools 工具</strong>:</p>
<ul>
<li><strong>Flutter DevTools</strong>: Frame rendering timeline 帧渲染时间线, memory allocation 内存分配</li>
<li><strong>Xcode Instruments</strong>: iOS GPU usage iOS GPU使用, battery impact 电池影响</li>
<li><strong>Android Profiler</strong>: CPU, memory, network (BLE) monitoring 网络（BLE）监控</li>
</ul>
<hr />
<p><strong>Document Version 文档版本:</strong> 1.0
<strong>Last Updated 最后更新:</strong> 2025-12-01
<strong>Maintained By 维护者:</strong> Movement Chain AI Mobile Team 移动团队
<strong>Next Review 下次审查:</strong> Q2 2025</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/movement-chain-ai" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/movement-chain-ai" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.top", "navigation.tracking", "search.suggest", "search.highlight", "content.code.copy", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>